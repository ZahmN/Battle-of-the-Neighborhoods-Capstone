{
 "cells": [
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "# The Battle of the Neighborhoods – Week 1"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "## Introduction:\n",
    "**_NextGen_** is a vegan restaurant that aims to recreate healthier verisons of common ‘comfort’ and ‘bar’ foods. **_NextGen’s_** menu is kept simple and affordable to attract younger crowds and those always on the go. Its mission is to make health foods easily accessible and to educate patrons on the importance of making better food choices daily. \n"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 1,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "Collecting package metadata (current_repodata.json): ...working... done\n",
      "Solving environment: ...working... done\n",
      "\n",
      "# All requested packages already installed.\n",
      "\n",
      "Collecting package metadata (current_repodata.json): ...working... done\n",
      "Solving environment: ...working... done\n",
      "\n",
      "# All requested packages already installed.\n",
      "\n"
     ]
    }
   ],
   "source": [
    "#Import libraries\n",
    "import numpy as np #handles data in vactorized manner\n",
    "import pandas as pd #handles data analysis\n",
    "pd.set_option('display.max_columns', None)\n",
    "pd.set_option('display.max_rows', None)\n",
    "\n",
    "import json#handles JSON files\n",
    "\n",
    "!conda install -c conda-forge geopy --yes \n",
    "from geopy.geocoders import Nominatim #converts an address into latitude and longitude values\n",
    "\n",
    "import requests #handles requests\n",
    "from pandas.io.json import json_normalize # transform JSON file into a pandas datafame\n",
    "\n",
    "#Import matplotlib and plotting modules\n",
    "import matplotlib.cm as cm\n",
    "import matplotlib.colors as colors\n",
    "\n",
    "#Import k-means for clustering\n",
    "from sklearn.cluster import KMeans\n",
    "\n",
    "!conda install -c conda-forge folium=0.5.0 --yes\n",
    "import folium #renders map"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "### Define Fourquare Credentials"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 2,
   "metadata": {},
   "outputs": [],
   "source": [
    "CLIENT_ID = 'Data Hidden'\n",
    "CLIENT_SECRET = 'Data Hidden'\n",
    "VERSION = '20180604'\n",
    "LIMIT = 100\n",
    "\n",
    "print('Credentials read in!')"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "### Geospatial Coordinates of Toronto"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 3,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "The geograpical coordinate of the City of Toronto are 43.6534817, -79.3839347.\n"
     ]
    }
   ],
   "source": [
    "geolocator = Nominatim(user_agent=\"coursera\")\n",
    "address = 'Toronto'\n",
    "\n",
    "location = geolocator.geocode(address)\n",
    "latitude = location.latitude\n",
    "longitude = location.longitude\n",
    "\n",
    "print('The geograpical coordinate of the City of Toronto are {}, {}.'.format(latitude, longitude))"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "### Search for Universities"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 4,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/plain": [
       "'https://api.foursquare.com/v2/venues/search?client_id=4N2JQWBURUPB3RAZRVHJB0GEWBEIY2XV1M52YICC1OEDQYZF&client_secret=CV1SIIOAW43MIMZ2BAWLMU4WOQ20GPE4T25HOHW024QEONS1&ll=43.6534817,-79.3839347&v=20180604&query=University&radius=500&limit=100'"
      ]
     },
     "execution_count": 5,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "#Search for universities\n",
    "search_query = 'University'\n",
    "radius = 500\n",
    "\n",
    "#Create the API request URL\n",
    "url = 'https://api.foursquare.com/v2/venues/search?client_id={}&client_secret={}&ll={},{}&v={}&query={}&radius={}&limit={}'\\\n",
    ".format(CLIENT_ID, CLIENT_SECRET, latitude, longitude, VERSION, search_query, radius, LIMIT)\n",
    "url"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 6,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "<div>\n",
       "<style scoped>\n",
       "    .dataframe tbody tr th:only-of-type {\n",
       "        vertical-align: middle;\n",
       "    }\n",
       "\n",
       "    .dataframe tbody tr th {\n",
       "        vertical-align: top;\n",
       "    }\n",
       "\n",
       "    .dataframe thead th {\n",
       "        text-align: right;\n",
       "    }\n",
       "</style>\n",
       "<table border=\"1\" class=\"dataframe\">\n",
       "  <thead>\n",
       "    <tr style=\"text-align: right;\">\n",
       "      <th></th>\n",
       "      <th>id</th>\n",
       "      <th>name</th>\n",
       "      <th>categories</th>\n",
       "      <th>referralId</th>\n",
       "      <th>hasPerk</th>\n",
       "      <th>location.lat</th>\n",
       "      <th>location.lng</th>\n",
       "      <th>location.labeledLatLngs</th>\n",
       "      <th>location.distance</th>\n",
       "      <th>location.cc</th>\n",
       "      <th>location.country</th>\n",
       "      <th>location.formattedAddress</th>\n",
       "      <th>location.address</th>\n",
       "      <th>location.postalCode</th>\n",
       "      <th>location.city</th>\n",
       "      <th>location.state</th>\n",
       "      <th>location.crossStreet</th>\n",
       "      <th>venuePage.id</th>\n",
       "    </tr>\n",
       "  </thead>\n",
       "  <tbody>\n",
       "    <tr>\n",
       "      <td>0</td>\n",
       "      <td>4cd044c29d87224bf129543b</td>\n",
       "      <td>University Centre Gym</td>\n",
       "      <td>[{'id': '4bf58dd8d48988d175941735', 'name': 'G...</td>\n",
       "      <td>v-1587928442</td>\n",
       "      <td>False</td>\n",
       "      <td>43.653571</td>\n",
       "      <td>-79.386979</td>\n",
       "      <td>[{'label': 'display', 'lat': 43.653571, 'lng':...</td>\n",
       "      <td>245</td>\n",
       "      <td>CA</td>\n",
       "      <td>Canada</td>\n",
       "      <td>[Canada]</td>\n",
       "      <td>NaN</td>\n",
       "      <td>NaN</td>\n",
       "      <td>NaN</td>\n",
       "      <td>NaN</td>\n",
       "      <td>NaN</td>\n",
       "      <td>NaN</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <td>1</td>\n",
       "      <td>4c6062b612e5c9286e131f4c</td>\n",
       "      <td>Dundas University Health Clinic</td>\n",
       "      <td>[{'id': '4bf58dd8d48988d104941735', 'name': 'M...</td>\n",
       "      <td>v-1587928442</td>\n",
       "      <td>False</td>\n",
       "      <td>43.654196</td>\n",
       "      <td>-79.388166</td>\n",
       "      <td>[{'label': 'display', 'lat': 43.65419587934101...</td>\n",
       "      <td>349</td>\n",
       "      <td>CA</td>\n",
       "      <td>Canada</td>\n",
       "      <td>[104-438 University Avenue, Toronto ON M4P 2K8...</td>\n",
       "      <td>104-438 University Avenue</td>\n",
       "      <td>M4P 2K8</td>\n",
       "      <td>Toronto</td>\n",
       "      <td>ON</td>\n",
       "      <td>NaN</td>\n",
       "      <td>NaN</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <td>2</td>\n",
       "      <td>4c45c6c6da2176b09543637a</td>\n",
       "      <td>University Centre</td>\n",
       "      <td>[{'id': '4bf58dd8d48988d124941735', 'name': 'O...</td>\n",
       "      <td>v-1587928442</td>\n",
       "      <td>False</td>\n",
       "      <td>43.653907</td>\n",
       "      <td>-79.386764</td>\n",
       "      <td>[{'label': 'display', 'lat': 43.65390719043468...</td>\n",
       "      <td>232</td>\n",
       "      <td>CA</td>\n",
       "      <td>Canada</td>\n",
       "      <td>[393 University Ave. (at Armoury St.), Toronto...</td>\n",
       "      <td>393 University Ave.</td>\n",
       "      <td>M7A 2K1</td>\n",
       "      <td>Toronto</td>\n",
       "      <td>ON</td>\n",
       "      <td>at Armoury St.</td>\n",
       "      <td>NaN</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <td>3</td>\n",
       "      <td>4d5d275fff226a3110517e69</td>\n",
       "      <td>438 University Ave</td>\n",
       "      <td>[{'id': '4bf58dd8d48988d124941735', 'name': 'O...</td>\n",
       "      <td>v-1587928442</td>\n",
       "      <td>False</td>\n",
       "      <td>43.654296</td>\n",
       "      <td>-79.388415</td>\n",
       "      <td>[{'label': 'display', 'lat': 43.65429570830456...</td>\n",
       "      <td>372</td>\n",
       "      <td>CA</td>\n",
       "      <td>Canada</td>\n",
       "      <td>[438 University Ave (at Dundas St W), Toronto ...</td>\n",
       "      <td>438 University Ave</td>\n",
       "      <td>M5G 2K8</td>\n",
       "      <td>Toronto</td>\n",
       "      <td>ON</td>\n",
       "      <td>at Dundas St W</td>\n",
       "      <td>NaN</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <td>4</td>\n",
       "      <td>4e6565fb1850e238d7048495</td>\n",
       "      <td>University Avenue Plaza</td>\n",
       "      <td>[{'id': '4bf58dd8d48988d164941735', 'name': 'P...</td>\n",
       "      <td>v-1587928442</td>\n",
       "      <td>False</td>\n",
       "      <td>43.652695</td>\n",
       "      <td>-79.387218</td>\n",
       "      <td>[{'label': 'display', 'lat': 43.65269470686765...</td>\n",
       "      <td>278</td>\n",
       "      <td>CA</td>\n",
       "      <td>Canada</td>\n",
       "      <td>[University Avenue (btwn Richmond &amp; College), ...</td>\n",
       "      <td>University Avenue</td>\n",
       "      <td>NaN</td>\n",
       "      <td>Toronto</td>\n",
       "      <td>ON</td>\n",
       "      <td>btwn Richmond &amp; College</td>\n",
       "      <td>NaN</td>\n",
       "    </tr>\n",
       "  </tbody>\n",
       "</table>\n",
       "</div>"
      ],
      "text/plain": [
       "                         id                             name  \\\n",
       "0  4cd044c29d87224bf129543b            University Centre Gym   \n",
       "1  4c6062b612e5c9286e131f4c  Dundas University Health Clinic   \n",
       "2  4c45c6c6da2176b09543637a                University Centre   \n",
       "3  4d5d275fff226a3110517e69               438 University Ave   \n",
       "4  4e6565fb1850e238d7048495          University Avenue Plaza   \n",
       "\n",
       "                                          categories    referralId  hasPerk  \\\n",
       "0  [{'id': '4bf58dd8d48988d175941735', 'name': 'G...  v-1587928442    False   \n",
       "1  [{'id': '4bf58dd8d48988d104941735', 'name': 'M...  v-1587928442    False   \n",
       "2  [{'id': '4bf58dd8d48988d124941735', 'name': 'O...  v-1587928442    False   \n",
       "3  [{'id': '4bf58dd8d48988d124941735', 'name': 'O...  v-1587928442    False   \n",
       "4  [{'id': '4bf58dd8d48988d164941735', 'name': 'P...  v-1587928442    False   \n",
       "\n",
       "   location.lat  location.lng  \\\n",
       "0     43.653571    -79.386979   \n",
       "1     43.654196    -79.388166   \n",
       "2     43.653907    -79.386764   \n",
       "3     43.654296    -79.388415   \n",
       "4     43.652695    -79.387218   \n",
       "\n",
       "                             location.labeledLatLngs  location.distance  \\\n",
       "0  [{'label': 'display', 'lat': 43.653571, 'lng':...                245   \n",
       "1  [{'label': 'display', 'lat': 43.65419587934101...                349   \n",
       "2  [{'label': 'display', 'lat': 43.65390719043468...                232   \n",
       "3  [{'label': 'display', 'lat': 43.65429570830456...                372   \n",
       "4  [{'label': 'display', 'lat': 43.65269470686765...                278   \n",
       "\n",
       "  location.cc location.country  \\\n",
       "0          CA           Canada   \n",
       "1          CA           Canada   \n",
       "2          CA           Canada   \n",
       "3          CA           Canada   \n",
       "4          CA           Canada   \n",
       "\n",
       "                           location.formattedAddress  \\\n",
       "0                                           [Canada]   \n",
       "1  [104-438 University Avenue, Toronto ON M4P 2K8...   \n",
       "2  [393 University Ave. (at Armoury St.), Toronto...   \n",
       "3  [438 University Ave (at Dundas St W), Toronto ...   \n",
       "4  [University Avenue (btwn Richmond & College), ...   \n",
       "\n",
       "            location.address location.postalCode location.city location.state  \\\n",
       "0                        NaN                 NaN           NaN            NaN   \n",
       "1  104-438 University Avenue             M4P 2K8       Toronto             ON   \n",
       "2        393 University Ave.             M7A 2K1       Toronto             ON   \n",
       "3         438 University Ave             M5G 2K8       Toronto             ON   \n",
       "4          University Avenue                 NaN       Toronto             ON   \n",
       "\n",
       "      location.crossStreet venuePage.id  \n",
       "0                      NaN          NaN  \n",
       "1                      NaN          NaN  \n",
       "2           at Armoury St.          NaN  \n",
       "3           at Dundas St W          NaN  \n",
       "4  btwn Richmond & College          NaN  "
      ]
     },
     "execution_count": 7,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "#Send the GET Request \n",
    "results = requests.get(url).json()\n",
    "\n",
    "#Assign relevant part of JSON to venues\n",
    "venues = results['response']['venues']\n",
    "\n",
    "#Tranform venues into a dataframe\n",
    "uni_df = json_normalize(venues)\n",
    "uni_df.head()"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "#### The Foursquare API returned location data for The University of Toronto and Ryerson University.  "
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "#### No data was returned for York University (ranked 3rd). Therefore, Ontario College of Art and Design University,(ranked 5th), will serve as top 3rd university, as Trent University (ranked 4th), is also not available."
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "### Clean the University Dataframe"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 8,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "<div>\n",
       "<style scoped>\n",
       "    .dataframe tbody tr th:only-of-type {\n",
       "        vertical-align: middle;\n",
       "    }\n",
       "\n",
       "    .dataframe tbody tr th {\n",
       "        vertical-align: top;\n",
       "    }\n",
       "\n",
       "    .dataframe thead th {\n",
       "        text-align: right;\n",
       "    }\n",
       "</style>\n",
       "<table border=\"1\" class=\"dataframe\">\n",
       "  <thead>\n",
       "    <tr style=\"text-align: right;\">\n",
       "      <th></th>\n",
       "      <th>name</th>\n",
       "      <th>categories</th>\n",
       "      <th>lat</th>\n",
       "      <th>lng</th>\n",
       "      <th>labeledLatLngs</th>\n",
       "      <th>distance</th>\n",
       "      <th>cc</th>\n",
       "      <th>country</th>\n",
       "      <th>formattedAddress</th>\n",
       "      <th>address</th>\n",
       "      <th>postalCode</th>\n",
       "      <th>city</th>\n",
       "      <th>state</th>\n",
       "      <th>crossStreet</th>\n",
       "      <th>id</th>\n",
       "    </tr>\n",
       "  </thead>\n",
       "  <tbody>\n",
       "    <tr>\n",
       "      <td>0</td>\n",
       "      <td>University Centre Gym</td>\n",
       "      <td>Gym / Fitness Center</td>\n",
       "      <td>43.653571</td>\n",
       "      <td>-79.386979</td>\n",
       "      <td>[{'label': 'display', 'lat': 43.653571, 'lng':...</td>\n",
       "      <td>245</td>\n",
       "      <td>CA</td>\n",
       "      <td>Canada</td>\n",
       "      <td>[Canada]</td>\n",
       "      <td>NaN</td>\n",
       "      <td>NaN</td>\n",
       "      <td>NaN</td>\n",
       "      <td>NaN</td>\n",
       "      <td>NaN</td>\n",
       "      <td>4cd044c29d87224bf129543b</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <td>1</td>\n",
       "      <td>Dundas University Health Clinic</td>\n",
       "      <td>Medical Center</td>\n",
       "      <td>43.654196</td>\n",
       "      <td>-79.388166</td>\n",
       "      <td>[{'label': 'display', 'lat': 43.65419587934101...</td>\n",
       "      <td>349</td>\n",
       "      <td>CA</td>\n",
       "      <td>Canada</td>\n",
       "      <td>[104-438 University Avenue, Toronto ON M4P 2K8...</td>\n",
       "      <td>104-438 University Avenue</td>\n",
       "      <td>M4P 2K8</td>\n",
       "      <td>Toronto</td>\n",
       "      <td>ON</td>\n",
       "      <td>NaN</td>\n",
       "      <td>4c6062b612e5c9286e131f4c</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <td>2</td>\n",
       "      <td>University Centre</td>\n",
       "      <td>Office</td>\n",
       "      <td>43.653907</td>\n",
       "      <td>-79.386764</td>\n",
       "      <td>[{'label': 'display', 'lat': 43.65390719043468...</td>\n",
       "      <td>232</td>\n",
       "      <td>CA</td>\n",
       "      <td>Canada</td>\n",
       "      <td>[393 University Ave. (at Armoury St.), Toronto...</td>\n",
       "      <td>393 University Ave.</td>\n",
       "      <td>M7A 2K1</td>\n",
       "      <td>Toronto</td>\n",
       "      <td>ON</td>\n",
       "      <td>at Armoury St.</td>\n",
       "      <td>4c45c6c6da2176b09543637a</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <td>3</td>\n",
       "      <td>438 University Ave</td>\n",
       "      <td>Office</td>\n",
       "      <td>43.654296</td>\n",
       "      <td>-79.388415</td>\n",
       "      <td>[{'label': 'display', 'lat': 43.65429570830456...</td>\n",
       "      <td>372</td>\n",
       "      <td>CA</td>\n",
       "      <td>Canada</td>\n",
       "      <td>[438 University Ave (at Dundas St W), Toronto ...</td>\n",
       "      <td>438 University Ave</td>\n",
       "      <td>M5G 2K8</td>\n",
       "      <td>Toronto</td>\n",
       "      <td>ON</td>\n",
       "      <td>at Dundas St W</td>\n",
       "      <td>4d5d275fff226a3110517e69</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <td>4</td>\n",
       "      <td>University Avenue Plaza</td>\n",
       "      <td>Plaza</td>\n",
       "      <td>43.652695</td>\n",
       "      <td>-79.387218</td>\n",
       "      <td>[{'label': 'display', 'lat': 43.65269470686765...</td>\n",
       "      <td>278</td>\n",
       "      <td>CA</td>\n",
       "      <td>Canada</td>\n",
       "      <td>[University Avenue (btwn Richmond &amp; College), ...</td>\n",
       "      <td>University Avenue</td>\n",
       "      <td>NaN</td>\n",
       "      <td>Toronto</td>\n",
       "      <td>ON</td>\n",
       "      <td>btwn Richmond &amp; College</td>\n",
       "      <td>4e6565fb1850e238d7048495</td>\n",
       "    </tr>\n",
       "  </tbody>\n",
       "</table>\n",
       "</div>"
      ],
      "text/plain": [
       "                              name            categories        lat  \\\n",
       "0            University Centre Gym  Gym / Fitness Center  43.653571   \n",
       "1  Dundas University Health Clinic        Medical Center  43.654196   \n",
       "2                University Centre                Office  43.653907   \n",
       "3               438 University Ave                Office  43.654296   \n",
       "4          University Avenue Plaza                 Plaza  43.652695   \n",
       "\n",
       "         lng                                     labeledLatLngs  distance  cc  \\\n",
       "0 -79.386979  [{'label': 'display', 'lat': 43.653571, 'lng':...       245  CA   \n",
       "1 -79.388166  [{'label': 'display', 'lat': 43.65419587934101...       349  CA   \n",
       "2 -79.386764  [{'label': 'display', 'lat': 43.65390719043468...       232  CA   \n",
       "3 -79.388415  [{'label': 'display', 'lat': 43.65429570830456...       372  CA   \n",
       "4 -79.387218  [{'label': 'display', 'lat': 43.65269470686765...       278  CA   \n",
       "\n",
       "  country                                   formattedAddress  \\\n",
       "0  Canada                                           [Canada]   \n",
       "1  Canada  [104-438 University Avenue, Toronto ON M4P 2K8...   \n",
       "2  Canada  [393 University Ave. (at Armoury St.), Toronto...   \n",
       "3  Canada  [438 University Ave (at Dundas St W), Toronto ...   \n",
       "4  Canada  [University Avenue (btwn Richmond & College), ...   \n",
       "\n",
       "                     address postalCode     city state  \\\n",
       "0                        NaN        NaN      NaN   NaN   \n",
       "1  104-438 University Avenue    M4P 2K8  Toronto    ON   \n",
       "2        393 University Ave.    M7A 2K1  Toronto    ON   \n",
       "3         438 University Ave    M5G 2K8  Toronto    ON   \n",
       "4          University Avenue        NaN  Toronto    ON   \n",
       "\n",
       "               crossStreet                        id  \n",
       "0                      NaN  4cd044c29d87224bf129543b  \n",
       "1                      NaN  4c6062b612e5c9286e131f4c  \n",
       "2           at Armoury St.  4c45c6c6da2176b09543637a  \n",
       "3           at Dundas St W  4d5d275fff226a3110517e69  \n",
       "4  btwn Richmond & College  4e6565fb1850e238d7048495  "
      ]
     },
     "execution_count": 9,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "#Keep columns that include venue name and any associated with location\n",
    "uni_clean_col = ['name', 'categories'] + [col for col in uni_df.columns if col.startswith('location.')]+ ['id']\n",
    "uni_clean_df = uni_df.loc[:,uni_clean_col]\n",
    "\n",
    "#Retrieve venue category \n",
    "def get_category_type(row):\n",
    "    try:\n",
    "        categories_list = row['categories']\n",
    "    except:\n",
    "        categories_list = row['venue.categories']\n",
    "        \n",
    "    if len(categories_list) == 0:\n",
    "        return None\n",
    "    else:\n",
    "        return categories_list[0]['name']\n",
    "\n",
    "#Filter category for each row\n",
    "uni_clean_df['categories'] = uni_clean_df.apply(get_category_type, axis=1)\n",
    "\n",
    "#Clean column names by removing the first term\n",
    "uni_clean_df.columns = [column.split('.')[-1] for column in uni_clean_df.columns]\n",
    "uni_clean_df.head()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 10,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "<div>\n",
       "<style scoped>\n",
       "    .dataframe tbody tr th:only-of-type {\n",
       "        vertical-align: middle;\n",
       "    }\n",
       "\n",
       "    .dataframe tbody tr th {\n",
       "        vertical-align: top;\n",
       "    }\n",
       "\n",
       "    .dataframe thead th {\n",
       "        text-align: right;\n",
       "    }\n",
       "</style>\n",
       "<table border=\"1\" class=\"dataframe\">\n",
       "  <thead>\n",
       "    <tr style=\"text-align: right;\">\n",
       "      <th></th>\n",
       "      <th>name</th>\n",
       "      <th>categories</th>\n",
       "      <th>lat</th>\n",
       "      <th>lng</th>\n",
       "      <th>address</th>\n",
       "      <th>postalCode</th>\n",
       "      <th>state</th>\n",
       "    </tr>\n",
       "  </thead>\n",
       "  <tbody>\n",
       "    <tr>\n",
       "      <td>0</td>\n",
       "      <td>University Centre Gym</td>\n",
       "      <td>Gym / Fitness Center</td>\n",
       "      <td>43.653571</td>\n",
       "      <td>-79.386979</td>\n",
       "      <td>NaN</td>\n",
       "      <td>NaN</td>\n",
       "      <td>NaN</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <td>1</td>\n",
       "      <td>Dundas University Health Clinic</td>\n",
       "      <td>Medical Center</td>\n",
       "      <td>43.654196</td>\n",
       "      <td>-79.388166</td>\n",
       "      <td>104-438 University Avenue</td>\n",
       "      <td>M4P 2K8</td>\n",
       "      <td>ON</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <td>2</td>\n",
       "      <td>University Centre</td>\n",
       "      <td>Office</td>\n",
       "      <td>43.653907</td>\n",
       "      <td>-79.386764</td>\n",
       "      <td>393 University Ave.</td>\n",
       "      <td>M7A 2K1</td>\n",
       "      <td>ON</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <td>3</td>\n",
       "      <td>438 University Ave</td>\n",
       "      <td>Office</td>\n",
       "      <td>43.654296</td>\n",
       "      <td>-79.388415</td>\n",
       "      <td>438 University Ave</td>\n",
       "      <td>M5G 2K8</td>\n",
       "      <td>ON</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <td>4</td>\n",
       "      <td>University Avenue Plaza</td>\n",
       "      <td>Plaza</td>\n",
       "      <td>43.652695</td>\n",
       "      <td>-79.387218</td>\n",
       "      <td>University Avenue</td>\n",
       "      <td>NaN</td>\n",
       "      <td>ON</td>\n",
       "    </tr>\n",
       "  </tbody>\n",
       "</table>\n",
       "</div>"
      ],
      "text/plain": [
       "                              name            categories        lat  \\\n",
       "0            University Centre Gym  Gym / Fitness Center  43.653571   \n",
       "1  Dundas University Health Clinic        Medical Center  43.654196   \n",
       "2                University Centre                Office  43.653907   \n",
       "3               438 University Ave                Office  43.654296   \n",
       "4          University Avenue Plaza                 Plaza  43.652695   \n",
       "\n",
       "         lng                    address postalCode state  \n",
       "0 -79.386979                        NaN        NaN   NaN  \n",
       "1 -79.388166  104-438 University Avenue    M4P 2K8    ON  \n",
       "2 -79.386764        393 University Ave.    M7A 2K1    ON  \n",
       "3 -79.388415         438 University Ave    M5G 2K8    ON  \n",
       "4 -79.387218          University Avenue        NaN    ON  "
      ]
     },
     "execution_count": 11,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "#Delete unnecessary columns\n",
    "uni_clean_df2= uni_clean_df.drop(['cc', 'city', 'country', 'crossStreet', 'distance','formattedAddress', 'id','labeledLatLngs'], axis=1)\n",
    "uni_clean_df2.head()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 12,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "<div>\n",
       "<style scoped>\n",
       "    .dataframe tbody tr th:only-of-type {\n",
       "        vertical-align: middle;\n",
       "    }\n",
       "\n",
       "    .dataframe tbody tr th {\n",
       "        vertical-align: top;\n",
       "    }\n",
       "\n",
       "    .dataframe thead th {\n",
       "        text-align: right;\n",
       "    }\n",
       "</style>\n",
       "<table border=\"1\" class=\"dataframe\">\n",
       "  <thead>\n",
       "    <tr style=\"text-align: right;\">\n",
       "      <th></th>\n",
       "      <th>name</th>\n",
       "      <th>categories</th>\n",
       "      <th>lat</th>\n",
       "      <th>lng</th>\n",
       "      <th>address</th>\n",
       "      <th>postalCode</th>\n",
       "      <th>state</th>\n",
       "    </tr>\n",
       "  </thead>\n",
       "  <tbody>\n",
       "    <tr>\n",
       "      <td>1</td>\n",
       "      <td>Dundas University Health Clinic</td>\n",
       "      <td>Medical Center</td>\n",
       "      <td>43.654196</td>\n",
       "      <td>-79.388166</td>\n",
       "      <td>104-438 University Avenue</td>\n",
       "      <td>M4P 2K8</td>\n",
       "      <td>ON</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <td>2</td>\n",
       "      <td>University Centre</td>\n",
       "      <td>Office</td>\n",
       "      <td>43.653907</td>\n",
       "      <td>-79.386764</td>\n",
       "      <td>393 University Ave.</td>\n",
       "      <td>M7A 2K1</td>\n",
       "      <td>ON</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <td>3</td>\n",
       "      <td>438 University Ave</td>\n",
       "      <td>Office</td>\n",
       "      <td>43.654296</td>\n",
       "      <td>-79.388415</td>\n",
       "      <td>438 University Ave</td>\n",
       "      <td>M5G 2K8</td>\n",
       "      <td>ON</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <td>6</td>\n",
       "      <td>393 University Ave</td>\n",
       "      <td>Office</td>\n",
       "      <td>43.653752</td>\n",
       "      <td>-79.388150</td>\n",
       "      <td>393 University Ave</td>\n",
       "      <td>M5G 1E6</td>\n",
       "      <td>ON</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <td>9</td>\n",
       "      <td>480 University Ave</td>\n",
       "      <td>Office</td>\n",
       "      <td>43.655099</td>\n",
       "      <td>-79.388648</td>\n",
       "      <td>480 University Ave</td>\n",
       "      <td>M5G 1V2</td>\n",
       "      <td>ON</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <td>12</td>\n",
       "      <td>Ontario College of Art and Design University (...</td>\n",
       "      <td>University</td>\n",
       "      <td>43.652803</td>\n",
       "      <td>-79.391074</td>\n",
       "      <td>100 McCaul St</td>\n",
       "      <td>M5T 1W1</td>\n",
       "      <td>ON</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <td>14</td>\n",
       "      <td>425 University Avenue</td>\n",
       "      <td>Office</td>\n",
       "      <td>43.653769</td>\n",
       "      <td>-79.383949</td>\n",
       "      <td>425 University Avenue</td>\n",
       "      <td>M5G 1T6</td>\n",
       "      <td>ON</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <td>28</td>\n",
       "      <td>University Health Network Spiritual Care Depar...</td>\n",
       "      <td>Spiritual Center</td>\n",
       "      <td>43.658209</td>\n",
       "      <td>-79.384962</td>\n",
       "      <td>700 Bay St</td>\n",
       "      <td>M5G 0A2</td>\n",
       "      <td>ON</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <td>30</td>\n",
       "      <td>University Settlement Recreation Centre</td>\n",
       "      <td>College Gym</td>\n",
       "      <td>43.652139</td>\n",
       "      <td>-79.391477</td>\n",
       "      <td>23 Grange Rd.</td>\n",
       "      <td>M5T 1C3</td>\n",
       "      <td>ON</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <td>31</td>\n",
       "      <td>Ryerson University</td>\n",
       "      <td>University</td>\n",
       "      <td>43.657935</td>\n",
       "      <td>-79.380490</td>\n",
       "      <td>350 Victoria St.</td>\n",
       "      <td>M5B 2K3</td>\n",
       "      <td>ON</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <td>32</td>\n",
       "      <td>Regus - Ontario, Toronto - University &amp; Dundas</td>\n",
       "      <td>Business Service</td>\n",
       "      <td>43.654400</td>\n",
       "      <td>-79.387900</td>\n",
       "      <td>439 University Avenue, 5th Floor</td>\n",
       "      <td>M5G 1Y8</td>\n",
       "      <td>ON</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <td>39</td>\n",
       "      <td>Dundas &amp; University</td>\n",
       "      <td>Intersection</td>\n",
       "      <td>43.654620</td>\n",
       "      <td>-79.389150</td>\n",
       "      <td>University Ave</td>\n",
       "      <td>M5G 1V1</td>\n",
       "      <td>ON</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <td>43</td>\n",
       "      <td>Breather - 181 University Ave</td>\n",
       "      <td>Office</td>\n",
       "      <td>43.649258</td>\n",
       "      <td>-79.385300</td>\n",
       "      <td>181 University Ave</td>\n",
       "      <td>M5H</td>\n",
       "      <td>ON</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <td>44</td>\n",
       "      <td>Ryerson University Digital Media Experience Lab</td>\n",
       "      <td>College Library</td>\n",
       "      <td>43.657303</td>\n",
       "      <td>-79.381371</td>\n",
       "      <td>341 Yonge St</td>\n",
       "      <td>M5B 1S1</td>\n",
       "      <td>ON</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <td>45</td>\n",
       "      <td>Family and Community Medicine (University of T...</td>\n",
       "      <td>Medical School</td>\n",
       "      <td>43.655528</td>\n",
       "      <td>-79.389057</td>\n",
       "      <td>500 University Ave</td>\n",
       "      <td>M5G 1V7</td>\n",
       "      <td>ON</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <td>47</td>\n",
       "      <td>Deloitte University North</td>\n",
       "      <td>Office</td>\n",
       "      <td>43.650511</td>\n",
       "      <td>-79.379722</td>\n",
       "      <td>22 Adelaide St W</td>\n",
       "      <td>M5H 1L6</td>\n",
       "      <td>ON</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <td>49</td>\n",
       "      <td>The DMZ at Ryerson University</td>\n",
       "      <td>Office</td>\n",
       "      <td>43.656052</td>\n",
       "      <td>-79.380323</td>\n",
       "      <td>10 Dundas St E</td>\n",
       "      <td>M5B 2G9</td>\n",
       "      <td>ON</td>\n",
       "    </tr>\n",
       "  </tbody>\n",
       "</table>\n",
       "</div>"
      ],
      "text/plain": [
       "                                                 name        categories  \\\n",
       "1                     Dundas University Health Clinic    Medical Center   \n",
       "2                                   University Centre            Office   \n",
       "3                                  438 University Ave            Office   \n",
       "6                                  393 University Ave            Office   \n",
       "9                                  480 University Ave            Office   \n",
       "12  Ontario College of Art and Design University (...        University   \n",
       "14                              425 University Avenue            Office   \n",
       "28  University Health Network Spiritual Care Depar...  Spiritual Center   \n",
       "30            University Settlement Recreation Centre       College Gym   \n",
       "31                                 Ryerson University        University   \n",
       "32     Regus - Ontario, Toronto - University & Dundas  Business Service   \n",
       "39                                Dundas & University      Intersection   \n",
       "43                      Breather - 181 University Ave            Office   \n",
       "44    Ryerson University Digital Media Experience Lab   College Library   \n",
       "45  Family and Community Medicine (University of T...    Medical School   \n",
       "47                          Deloitte University North            Office   \n",
       "49                      The DMZ at Ryerson University            Office   \n",
       "\n",
       "          lat        lng                           address postalCode state  \n",
       "1   43.654196 -79.388166         104-438 University Avenue    M4P 2K8    ON  \n",
       "2   43.653907 -79.386764               393 University Ave.    M7A 2K1    ON  \n",
       "3   43.654296 -79.388415                438 University Ave    M5G 2K8    ON  \n",
       "6   43.653752 -79.388150                393 University Ave    M5G 1E6    ON  \n",
       "9   43.655099 -79.388648                480 University Ave    M5G 1V2    ON  \n",
       "12  43.652803 -79.391074                     100 McCaul St    M5T 1W1    ON  \n",
       "14  43.653769 -79.383949             425 University Avenue    M5G 1T6    ON  \n",
       "28  43.658209 -79.384962                        700 Bay St    M5G 0A2    ON  \n",
       "30  43.652139 -79.391477                     23 Grange Rd.    M5T 1C3    ON  \n",
       "31  43.657935 -79.380490                  350 Victoria St.    M5B 2K3    ON  \n",
       "32  43.654400 -79.387900  439 University Avenue, 5th Floor    M5G 1Y8    ON  \n",
       "39  43.654620 -79.389150                    University Ave    M5G 1V1    ON  \n",
       "43  43.649258 -79.385300                181 University Ave        M5H    ON  \n",
       "44  43.657303 -79.381371                      341 Yonge St    M5B 1S1    ON  \n",
       "45  43.655528 -79.389057                500 University Ave    M5G 1V7    ON  \n",
       "47  43.650511 -79.379722                  22 Adelaide St W    M5H 1L6    ON  \n",
       "49  43.656052 -79.380323                    10 Dundas St E    M5B 2G9    ON  "
      ]
     },
     "execution_count": 13,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "#Delete rows with NaN values\n",
    "uni_clean_df3 = uni_clean_df2.dropna(axis=0, how='any', thresh=None, subset=None, inplace=False) \n",
    "uni_clean_df3"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "#### The location data does not display direct location information for The University of Toronto. However, the addresses that include ('University Ave') are within The University of Toronto campus boundaries. "
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "#### For purposes of further analysis, **Dundas & University** in the 'Intersection' category will be used as the University of Toronto's main address. This replacement location identifier is approx. 3 minutes driving distance from the offical campus address. "
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "### Clean and Isolate Top 3 Universities Dataframe"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 14,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "<div>\n",
       "<style scoped>\n",
       "    .dataframe tbody tr th:only-of-type {\n",
       "        vertical-align: middle;\n",
       "    }\n",
       "\n",
       "    .dataframe tbody tr th {\n",
       "        vertical-align: top;\n",
       "    }\n",
       "\n",
       "    .dataframe thead th {\n",
       "        text-align: right;\n",
       "    }\n",
       "</style>\n",
       "<table border=\"1\" class=\"dataframe\">\n",
       "  <thead>\n",
       "    <tr style=\"text-align: right;\">\n",
       "      <th></th>\n",
       "      <th>name</th>\n",
       "      <th>categories</th>\n",
       "      <th>lat</th>\n",
       "      <th>lng</th>\n",
       "      <th>address</th>\n",
       "      <th>postalCode</th>\n",
       "      <th>state</th>\n",
       "    </tr>\n",
       "  </thead>\n",
       "  <tbody>\n",
       "    <tr>\n",
       "      <td>12</td>\n",
       "      <td>OCAD University</td>\n",
       "      <td>University</td>\n",
       "      <td>43.652803</td>\n",
       "      <td>-79.391074</td>\n",
       "      <td>100 McCaul St</td>\n",
       "      <td>M5T 1W1</td>\n",
       "      <td>ON</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <td>31</td>\n",
       "      <td>Ryerson University</td>\n",
       "      <td>University</td>\n",
       "      <td>43.657935</td>\n",
       "      <td>-79.380490</td>\n",
       "      <td>350 Victoria St.</td>\n",
       "      <td>M5B 2K3</td>\n",
       "      <td>ON</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <td>39</td>\n",
       "      <td>University of Toronto</td>\n",
       "      <td>University</td>\n",
       "      <td>43.654620</td>\n",
       "      <td>-79.389150</td>\n",
       "      <td>University Ave</td>\n",
       "      <td>M5G 1V1</td>\n",
       "      <td>ON</td>\n",
       "    </tr>\n",
       "  </tbody>\n",
       "</table>\n",
       "</div>"
      ],
      "text/plain": [
       "                     name  categories        lat        lng           address  \\\n",
       "12        OCAD University  University  43.652803 -79.391074     100 McCaul St   \n",
       "31     Ryerson University  University  43.657935 -79.380490  350 Victoria St.   \n",
       "39  University of Toronto  University  43.654620 -79.389150    University Ave   \n",
       "\n",
       "   postalCode state  \n",
       "12    M5T 1W1    ON  \n",
       "31    M5B 2K3    ON  \n",
       "39    M5G 1V1    ON  "
      ]
     },
     "execution_count": 15,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "#Isolate the top 3 university locations by selecting where category is equal to Intersection or University\n",
    "array= ['Intersection', 'University']\n",
    "topuni_df= uni_clean_df3.loc[uni_clean_df3['categories'].isin(array)]\n",
    "\n",
    "#Replace Ontario College of Art and Design University with acronym 'OCAD' University\n",
    "topuni_df.loc[12, 'name'] = 'OCAD University'\n",
    "\n",
    "#Replace 'Dundas & University' name with 'University of Toronto'\n",
    "topuni_df.loc[39,'name'] = 'University of Toronto'\n",
    "\n",
    "#Replace category 'Intersection' with 'University'\n",
    "topuni_df.loc[39,'categories'] = 'University'\n",
    "\n",
    "topuni_df"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "### Search for Gyms"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 16,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/plain": [
       "\"https://api.foursquare.com/v2/venues/search?client_id=4N2JQWBURUPB3RAZRVHJB0GEWBEIY2XV1M52YICC1OEDQYZF&client_secret=CV1SIIOAW43MIMZ2BAWLMU4WOQ20GPE4T25HOHW024QEONS1&ll=43.6534817,-79.3839347&v=20180604&query=['Fitness', 'Training']&radius=500&limit=100\""
      ]
     },
     "execution_count": 17,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "#Search for Gyms\n",
    "search_query = ['Fitness','Training']\n",
    "radius = 500\n",
    "\n",
    "#Create the API request URL\n",
    "url = 'https://api.foursquare.com/v2/venues/search?client_id={}&client_secret={}&ll={},{}&v={}&query={}&radius={}&limit={}'\\\n",
    ".format(CLIENT_ID, CLIENT_SECRET, latitude, longitude, VERSION, search_query, radius, LIMIT)\n",
    "url"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 18,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "<div>\n",
       "<style scoped>\n",
       "    .dataframe tbody tr th:only-of-type {\n",
       "        vertical-align: middle;\n",
       "    }\n",
       "\n",
       "    .dataframe tbody tr th {\n",
       "        vertical-align: top;\n",
       "    }\n",
       "\n",
       "    .dataframe thead th {\n",
       "        text-align: right;\n",
       "    }\n",
       "</style>\n",
       "<table border=\"1\" class=\"dataframe\">\n",
       "  <thead>\n",
       "    <tr style=\"text-align: right;\">\n",
       "      <th></th>\n",
       "      <th>id</th>\n",
       "      <th>name</th>\n",
       "      <th>categories</th>\n",
       "      <th>referralId</th>\n",
       "      <th>hasPerk</th>\n",
       "      <th>location.address</th>\n",
       "      <th>location.crossStreet</th>\n",
       "      <th>location.lat</th>\n",
       "      <th>location.lng</th>\n",
       "      <th>location.labeledLatLngs</th>\n",
       "      <th>location.distance</th>\n",
       "      <th>location.postalCode</th>\n",
       "      <th>location.cc</th>\n",
       "      <th>location.city</th>\n",
       "      <th>location.state</th>\n",
       "      <th>location.country</th>\n",
       "      <th>location.formattedAddress</th>\n",
       "      <th>venuePage.id</th>\n",
       "      <th>location.neighborhood</th>\n",
       "    </tr>\n",
       "  </thead>\n",
       "  <tbody>\n",
       "    <tr>\n",
       "      <td>0</td>\n",
       "      <td>4b5243a7f964a5209d7327e3</td>\n",
       "      <td>Fitness Centre</td>\n",
       "      <td>[{'id': '4bf58dd8d48988d176941735', 'name': 'G...</td>\n",
       "      <td>v-1587990715</td>\n",
       "      <td>False</td>\n",
       "      <td>Sheraton Centre</td>\n",
       "      <td>123 Queen St W</td>\n",
       "      <td>43.650985</td>\n",
       "      <td>-79.384002</td>\n",
       "      <td>[{'label': 'display', 'lat': 43.65098505166592...</td>\n",
       "      <td>277</td>\n",
       "      <td>M5H 2M9</td>\n",
       "      <td>CA</td>\n",
       "      <td>Toronto</td>\n",
       "      <td>ON</td>\n",
       "      <td>Canada</td>\n",
       "      <td>[Sheraton Centre (123 Queen St W), Toronto ON ...</td>\n",
       "      <td>NaN</td>\n",
       "      <td>NaN</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <td>1</td>\n",
       "      <td>4ff8e46fe4b03705cefc7075</td>\n",
       "      <td>Fitness Centre</td>\n",
       "      <td>[{'id': '4bf58dd8d48988d176941735', 'name': 'G...</td>\n",
       "      <td>v-1587990715</td>\n",
       "      <td>False</td>\n",
       "      <td>525 Bay St.</td>\n",
       "      <td>in Marriott Downtown</td>\n",
       "      <td>43.654690</td>\n",
       "      <td>-79.381739</td>\n",
       "      <td>[{'label': 'display', 'lat': 43.65469045595554...</td>\n",
       "      <td>222</td>\n",
       "      <td>M5G 2L2</td>\n",
       "      <td>CA</td>\n",
       "      <td>Toronto</td>\n",
       "      <td>ON</td>\n",
       "      <td>Canada</td>\n",
       "      <td>[525 Bay St. (in Marriott Downtown), Toronto O...</td>\n",
       "      <td>NaN</td>\n",
       "      <td>NaN</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <td>2</td>\n",
       "      <td>50885719498ea7b5aab3a74c</td>\n",
       "      <td>GoodLife Fitness Toronto Bell Trinity Centre</td>\n",
       "      <td>[{'id': '4bf58dd8d48988d176941735', 'name': 'G...</td>\n",
       "      <td>v-1587990715</td>\n",
       "      <td>False</td>\n",
       "      <td>483 Bay St</td>\n",
       "      <td>NaN</td>\n",
       "      <td>43.653436</td>\n",
       "      <td>-79.382314</td>\n",
       "      <td>[{'label': 'display', 'lat': 43.653436, 'lng':...</td>\n",
       "      <td>130</td>\n",
       "      <td>M5G 2C9</td>\n",
       "      <td>CA</td>\n",
       "      <td>Toronto</td>\n",
       "      <td>ON</td>\n",
       "      <td>Canada</td>\n",
       "      <td>[483 Bay St, Toronto ON M5G 2C9, Canada]</td>\n",
       "      <td>NaN</td>\n",
       "      <td>NaN</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <td>3</td>\n",
       "      <td>4bcc4b370687ef3b3cf1decc</td>\n",
       "      <td>Global Knowledge Training Centre</td>\n",
       "      <td>[{'id': '4bf58dd8d48988d1ad941735', 'name': 'T...</td>\n",
       "      <td>v-1587990715</td>\n",
       "      <td>False</td>\n",
       "      <td>1000-401 Bay St</td>\n",
       "      <td>NaN</td>\n",
       "      <td>43.651886</td>\n",
       "      <td>-79.380974</td>\n",
       "      <td>[{'label': 'display', 'lat': 43.65188637537396...</td>\n",
       "      <td>297</td>\n",
       "      <td>NaN</td>\n",
       "      <td>CA</td>\n",
       "      <td>Toronto</td>\n",
       "      <td>ON</td>\n",
       "      <td>Canada</td>\n",
       "      <td>[1000-401 Bay St, Toronto ON, Canada]</td>\n",
       "      <td>33632420</td>\n",
       "      <td>NaN</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <td>4</td>\n",
       "      <td>53451cff498e555a4e340937</td>\n",
       "      <td>doubletree fitness center (Doubletree Fitness ...</td>\n",
       "      <td>[{'id': '4bf58dd8d48988d175941735', 'name': 'G...</td>\n",
       "      <td>v-1587990715</td>\n",
       "      <td>False</td>\n",
       "      <td>108 Chestnut Street</td>\n",
       "      <td>Dundas St W</td>\n",
       "      <td>43.654603</td>\n",
       "      <td>-79.386204</td>\n",
       "      <td>[{'label': 'display', 'lat': 43.65460313972433...</td>\n",
       "      <td>221</td>\n",
       "      <td>M5G 1R3</td>\n",
       "      <td>CA</td>\n",
       "      <td>Toronto</td>\n",
       "      <td>ON</td>\n",
       "      <td>Canada</td>\n",
       "      <td>[108 Chestnut Street (Dundas St W), Toronto ON...</td>\n",
       "      <td>NaN</td>\n",
       "      <td>NaN</td>\n",
       "    </tr>\n",
       "  </tbody>\n",
       "</table>\n",
       "</div>"
      ],
      "text/plain": [
       "                         id  \\\n",
       "0  4b5243a7f964a5209d7327e3   \n",
       "1  4ff8e46fe4b03705cefc7075   \n",
       "2  50885719498ea7b5aab3a74c   \n",
       "3  4bcc4b370687ef3b3cf1decc   \n",
       "4  53451cff498e555a4e340937   \n",
       "\n",
       "                                                name  \\\n",
       "0                                     Fitness Centre   \n",
       "1                                     Fitness Centre   \n",
       "2       GoodLife Fitness Toronto Bell Trinity Centre   \n",
       "3                   Global Knowledge Training Centre   \n",
       "4  doubletree fitness center (Doubletree Fitness ...   \n",
       "\n",
       "                                          categories    referralId  hasPerk  \\\n",
       "0  [{'id': '4bf58dd8d48988d176941735', 'name': 'G...  v-1587990715    False   \n",
       "1  [{'id': '4bf58dd8d48988d176941735', 'name': 'G...  v-1587990715    False   \n",
       "2  [{'id': '4bf58dd8d48988d176941735', 'name': 'G...  v-1587990715    False   \n",
       "3  [{'id': '4bf58dd8d48988d1ad941735', 'name': 'T...  v-1587990715    False   \n",
       "4  [{'id': '4bf58dd8d48988d175941735', 'name': 'G...  v-1587990715    False   \n",
       "\n",
       "      location.address  location.crossStreet  location.lat  location.lng  \\\n",
       "0      Sheraton Centre        123 Queen St W     43.650985    -79.384002   \n",
       "1          525 Bay St.  in Marriott Downtown     43.654690    -79.381739   \n",
       "2           483 Bay St                   NaN     43.653436    -79.382314   \n",
       "3      1000-401 Bay St                   NaN     43.651886    -79.380974   \n",
       "4  108 Chestnut Street           Dundas St W     43.654603    -79.386204   \n",
       "\n",
       "                             location.labeledLatLngs  location.distance  \\\n",
       "0  [{'label': 'display', 'lat': 43.65098505166592...                277   \n",
       "1  [{'label': 'display', 'lat': 43.65469045595554...                222   \n",
       "2  [{'label': 'display', 'lat': 43.653436, 'lng':...                130   \n",
       "3  [{'label': 'display', 'lat': 43.65188637537396...                297   \n",
       "4  [{'label': 'display', 'lat': 43.65460313972433...                221   \n",
       "\n",
       "  location.postalCode location.cc location.city location.state  \\\n",
       "0             M5H 2M9          CA       Toronto             ON   \n",
       "1             M5G 2L2          CA       Toronto             ON   \n",
       "2             M5G 2C9          CA       Toronto             ON   \n",
       "3                 NaN          CA       Toronto             ON   \n",
       "4             M5G 1R3          CA       Toronto             ON   \n",
       "\n",
       "  location.country                          location.formattedAddress  \\\n",
       "0           Canada  [Sheraton Centre (123 Queen St W), Toronto ON ...   \n",
       "1           Canada  [525 Bay St. (in Marriott Downtown), Toronto O...   \n",
       "2           Canada           [483 Bay St, Toronto ON M5G 2C9, Canada]   \n",
       "3           Canada              [1000-401 Bay St, Toronto ON, Canada]   \n",
       "4           Canada  [108 Chestnut Street (Dundas St W), Toronto ON...   \n",
       "\n",
       "  venuePage.id location.neighborhood  \n",
       "0          NaN                   NaN  \n",
       "1          NaN                   NaN  \n",
       "2          NaN                   NaN  \n",
       "3     33632420                   NaN  \n",
       "4          NaN                   NaN  "
      ]
     },
     "execution_count": 19,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "#Send the GET Request \n",
    "gym_results = requests.get(url).json()\n",
    "\n",
    "#Assign relevant part of JSON to venues\n",
    "venues = gym_results['response']['venues']\n",
    "\n",
    "#Tranform venues into a dataframe\n",
    "gym_df = json_normalize(venues)\n",
    "gym_df.head()"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "### Clean the Gym Dataframe"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 20,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "<div>\n",
       "<style scoped>\n",
       "    .dataframe tbody tr th:only-of-type {\n",
       "        vertical-align: middle;\n",
       "    }\n",
       "\n",
       "    .dataframe tbody tr th {\n",
       "        vertical-align: top;\n",
       "    }\n",
       "\n",
       "    .dataframe thead th {\n",
       "        text-align: right;\n",
       "    }\n",
       "</style>\n",
       "<table border=\"1\" class=\"dataframe\">\n",
       "  <thead>\n",
       "    <tr style=\"text-align: right;\">\n",
       "      <th></th>\n",
       "      <th>name</th>\n",
       "      <th>categories</th>\n",
       "      <th>address</th>\n",
       "      <th>crossStreet</th>\n",
       "      <th>lat</th>\n",
       "      <th>lng</th>\n",
       "      <th>labeledLatLngs</th>\n",
       "      <th>distance</th>\n",
       "      <th>postalCode</th>\n",
       "      <th>cc</th>\n",
       "      <th>city</th>\n",
       "      <th>state</th>\n",
       "      <th>country</th>\n",
       "      <th>formattedAddress</th>\n",
       "      <th>neighborhood</th>\n",
       "      <th>id</th>\n",
       "    </tr>\n",
       "  </thead>\n",
       "  <tbody>\n",
       "    <tr>\n",
       "      <td>0</td>\n",
       "      <td>Fitness Centre</td>\n",
       "      <td>Gym</td>\n",
       "      <td>Sheraton Centre</td>\n",
       "      <td>123 Queen St W</td>\n",
       "      <td>43.650985</td>\n",
       "      <td>-79.384002</td>\n",
       "      <td>[{'label': 'display', 'lat': 43.65098505166592...</td>\n",
       "      <td>277</td>\n",
       "      <td>M5H 2M9</td>\n",
       "      <td>CA</td>\n",
       "      <td>Toronto</td>\n",
       "      <td>ON</td>\n",
       "      <td>Canada</td>\n",
       "      <td>[Sheraton Centre (123 Queen St W), Toronto ON ...</td>\n",
       "      <td>NaN</td>\n",
       "      <td>4b5243a7f964a5209d7327e3</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <td>1</td>\n",
       "      <td>Fitness Centre</td>\n",
       "      <td>Gym</td>\n",
       "      <td>525 Bay St.</td>\n",
       "      <td>in Marriott Downtown</td>\n",
       "      <td>43.654690</td>\n",
       "      <td>-79.381739</td>\n",
       "      <td>[{'label': 'display', 'lat': 43.65469045595554...</td>\n",
       "      <td>222</td>\n",
       "      <td>M5G 2L2</td>\n",
       "      <td>CA</td>\n",
       "      <td>Toronto</td>\n",
       "      <td>ON</td>\n",
       "      <td>Canada</td>\n",
       "      <td>[525 Bay St. (in Marriott Downtown), Toronto O...</td>\n",
       "      <td>NaN</td>\n",
       "      <td>4ff8e46fe4b03705cefc7075</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <td>2</td>\n",
       "      <td>GoodLife Fitness Toronto Bell Trinity Centre</td>\n",
       "      <td>Gym</td>\n",
       "      <td>483 Bay St</td>\n",
       "      <td>NaN</td>\n",
       "      <td>43.653436</td>\n",
       "      <td>-79.382314</td>\n",
       "      <td>[{'label': 'display', 'lat': 43.653436, 'lng':...</td>\n",
       "      <td>130</td>\n",
       "      <td>M5G 2C9</td>\n",
       "      <td>CA</td>\n",
       "      <td>Toronto</td>\n",
       "      <td>ON</td>\n",
       "      <td>Canada</td>\n",
       "      <td>[483 Bay St, Toronto ON M5G 2C9, Canada]</td>\n",
       "      <td>NaN</td>\n",
       "      <td>50885719498ea7b5aab3a74c</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <td>3</td>\n",
       "      <td>Global Knowledge Training Centre</td>\n",
       "      <td>Trade School</td>\n",
       "      <td>1000-401 Bay St</td>\n",
       "      <td>NaN</td>\n",
       "      <td>43.651886</td>\n",
       "      <td>-79.380974</td>\n",
       "      <td>[{'label': 'display', 'lat': 43.65188637537396...</td>\n",
       "      <td>297</td>\n",
       "      <td>NaN</td>\n",
       "      <td>CA</td>\n",
       "      <td>Toronto</td>\n",
       "      <td>ON</td>\n",
       "      <td>Canada</td>\n",
       "      <td>[1000-401 Bay St, Toronto ON, Canada]</td>\n",
       "      <td>NaN</td>\n",
       "      <td>4bcc4b370687ef3b3cf1decc</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <td>4</td>\n",
       "      <td>doubletree fitness center (Doubletree Fitness ...</td>\n",
       "      <td>Gym / Fitness Center</td>\n",
       "      <td>108 Chestnut Street</td>\n",
       "      <td>Dundas St W</td>\n",
       "      <td>43.654603</td>\n",
       "      <td>-79.386204</td>\n",
       "      <td>[{'label': 'display', 'lat': 43.65460313972433...</td>\n",
       "      <td>221</td>\n",
       "      <td>M5G 1R3</td>\n",
       "      <td>CA</td>\n",
       "      <td>Toronto</td>\n",
       "      <td>ON</td>\n",
       "      <td>Canada</td>\n",
       "      <td>[108 Chestnut Street (Dundas St W), Toronto ON...</td>\n",
       "      <td>NaN</td>\n",
       "      <td>53451cff498e555a4e340937</td>\n",
       "    </tr>\n",
       "  </tbody>\n",
       "</table>\n",
       "</div>"
      ],
      "text/plain": [
       "                                                name            categories  \\\n",
       "0                                     Fitness Centre                   Gym   \n",
       "1                                     Fitness Centre                   Gym   \n",
       "2       GoodLife Fitness Toronto Bell Trinity Centre                   Gym   \n",
       "3                   Global Knowledge Training Centre          Trade School   \n",
       "4  doubletree fitness center (Doubletree Fitness ...  Gym / Fitness Center   \n",
       "\n",
       "               address           crossStreet        lat        lng  \\\n",
       "0      Sheraton Centre        123 Queen St W  43.650985 -79.384002   \n",
       "1          525 Bay St.  in Marriott Downtown  43.654690 -79.381739   \n",
       "2           483 Bay St                   NaN  43.653436 -79.382314   \n",
       "3      1000-401 Bay St                   NaN  43.651886 -79.380974   \n",
       "4  108 Chestnut Street           Dundas St W  43.654603 -79.386204   \n",
       "\n",
       "                                      labeledLatLngs  distance postalCode  cc  \\\n",
       "0  [{'label': 'display', 'lat': 43.65098505166592...       277    M5H 2M9  CA   \n",
       "1  [{'label': 'display', 'lat': 43.65469045595554...       222    M5G 2L2  CA   \n",
       "2  [{'label': 'display', 'lat': 43.653436, 'lng':...       130    M5G 2C9  CA   \n",
       "3  [{'label': 'display', 'lat': 43.65188637537396...       297        NaN  CA   \n",
       "4  [{'label': 'display', 'lat': 43.65460313972433...       221    M5G 1R3  CA   \n",
       "\n",
       "      city state country                                   formattedAddress  \\\n",
       "0  Toronto    ON  Canada  [Sheraton Centre (123 Queen St W), Toronto ON ...   \n",
       "1  Toronto    ON  Canada  [525 Bay St. (in Marriott Downtown), Toronto O...   \n",
       "2  Toronto    ON  Canada           [483 Bay St, Toronto ON M5G 2C9, Canada]   \n",
       "3  Toronto    ON  Canada              [1000-401 Bay St, Toronto ON, Canada]   \n",
       "4  Toronto    ON  Canada  [108 Chestnut Street (Dundas St W), Toronto ON...   \n",
       "\n",
       "  neighborhood                        id  \n",
       "0          NaN  4b5243a7f964a5209d7327e3  \n",
       "1          NaN  4ff8e46fe4b03705cefc7075  \n",
       "2          NaN  50885719498ea7b5aab3a74c  \n",
       "3          NaN  4bcc4b370687ef3b3cf1decc  \n",
       "4          NaN  53451cff498e555a4e340937  "
      ]
     },
     "execution_count": 21,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "#Keep columns that include venue name and any associated with location\n",
    "gym_clean_col = ['name', 'categories'] + [col for col in gym_df.columns if col.startswith('location.')]+ ['id']\n",
    "gym_clean_df = gym_df.loc[:,gym_clean_col]\n",
    "\n",
    "#Retrieve venue category \n",
    "def get_category_type(row):\n",
    "    try:\n",
    "        categories_list = row['categories']\n",
    "    except:\n",
    "        categories_list = row['venue.categories']\n",
    "        \n",
    "    if len(categories_list) == 0:\n",
    "        return None\n",
    "    else:\n",
    "        return categories_list[0]['name']\n",
    "\n",
    "#Filter category for each row\n",
    "gym_clean_df['categories'] = gym_clean_df.apply(get_category_type, axis=1)\n",
    "\n",
    "#Clean column names by removing the first term\n",
    "gym_clean_df.columns = [column.split('.')[-1] for column in gym_clean_df.columns]\n",
    "gym_clean_df.head()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 22,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "<div>\n",
       "<style scoped>\n",
       "    .dataframe tbody tr th:only-of-type {\n",
       "        vertical-align: middle;\n",
       "    }\n",
       "\n",
       "    .dataframe tbody tr th {\n",
       "        vertical-align: top;\n",
       "    }\n",
       "\n",
       "    .dataframe thead th {\n",
       "        text-align: right;\n",
       "    }\n",
       "</style>\n",
       "<table border=\"1\" class=\"dataframe\">\n",
       "  <thead>\n",
       "    <tr style=\"text-align: right;\">\n",
       "      <th></th>\n",
       "      <th>name</th>\n",
       "      <th>categories</th>\n",
       "      <th>address</th>\n",
       "      <th>lat</th>\n",
       "      <th>lng</th>\n",
       "      <th>postalCode</th>\n",
       "      <th>state</th>\n",
       "    </tr>\n",
       "  </thead>\n",
       "  <tbody>\n",
       "    <tr>\n",
       "      <td>0</td>\n",
       "      <td>Fitness Centre</td>\n",
       "      <td>Gym</td>\n",
       "      <td>Sheraton Centre</td>\n",
       "      <td>43.650985</td>\n",
       "      <td>-79.384002</td>\n",
       "      <td>M5H 2M9</td>\n",
       "      <td>ON</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <td>1</td>\n",
       "      <td>Fitness Centre</td>\n",
       "      <td>Gym</td>\n",
       "      <td>525 Bay St.</td>\n",
       "      <td>43.654690</td>\n",
       "      <td>-79.381739</td>\n",
       "      <td>M5G 2L2</td>\n",
       "      <td>ON</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <td>2</td>\n",
       "      <td>GoodLife Fitness Toronto Bell Trinity Centre</td>\n",
       "      <td>Gym</td>\n",
       "      <td>483 Bay St</td>\n",
       "      <td>43.653436</td>\n",
       "      <td>-79.382314</td>\n",
       "      <td>M5G 2C9</td>\n",
       "      <td>ON</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <td>3</td>\n",
       "      <td>Global Knowledge Training Centre</td>\n",
       "      <td>Trade School</td>\n",
       "      <td>1000-401 Bay St</td>\n",
       "      <td>43.651886</td>\n",
       "      <td>-79.380974</td>\n",
       "      <td>NaN</td>\n",
       "      <td>ON</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <td>4</td>\n",
       "      <td>doubletree fitness center (Doubletree Fitness ...</td>\n",
       "      <td>Gym / Fitness Center</td>\n",
       "      <td>108 Chestnut Street</td>\n",
       "      <td>43.654603</td>\n",
       "      <td>-79.386204</td>\n",
       "      <td>M5G 1R3</td>\n",
       "      <td>ON</td>\n",
       "    </tr>\n",
       "  </tbody>\n",
       "</table>\n",
       "</div>"
      ],
      "text/plain": [
       "                                                name            categories  \\\n",
       "0                                     Fitness Centre                   Gym   \n",
       "1                                     Fitness Centre                   Gym   \n",
       "2       GoodLife Fitness Toronto Bell Trinity Centre                   Gym   \n",
       "3                   Global Knowledge Training Centre          Trade School   \n",
       "4  doubletree fitness center (Doubletree Fitness ...  Gym / Fitness Center   \n",
       "\n",
       "               address        lat        lng postalCode state  \n",
       "0      Sheraton Centre  43.650985 -79.384002    M5H 2M9    ON  \n",
       "1          525 Bay St.  43.654690 -79.381739    M5G 2L2    ON  \n",
       "2           483 Bay St  43.653436 -79.382314    M5G 2C9    ON  \n",
       "3      1000-401 Bay St  43.651886 -79.380974        NaN    ON  \n",
       "4  108 Chestnut Street  43.654603 -79.386204    M5G 1R3    ON  "
      ]
     },
     "execution_count": 23,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "#Delete unnecessary columns\n",
    "gym_clean_df2= gym_clean_df.drop(['cc', 'city', 'country', 'crossStreet', 'distance','formattedAddress', 'id','labeledLatLngs', 'neighborhood'], axis=1)\n",
    "gym_clean_df2.head()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 24,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "<div>\n",
       "<style scoped>\n",
       "    .dataframe tbody tr th:only-of-type {\n",
       "        vertical-align: middle;\n",
       "    }\n",
       "\n",
       "    .dataframe tbody tr th {\n",
       "        vertical-align: top;\n",
       "    }\n",
       "\n",
       "    .dataframe thead th {\n",
       "        text-align: right;\n",
       "    }\n",
       "</style>\n",
       "<table border=\"1\" class=\"dataframe\">\n",
       "  <thead>\n",
       "    <tr style=\"text-align: right;\">\n",
       "      <th></th>\n",
       "      <th>name</th>\n",
       "      <th>categories</th>\n",
       "      <th>address</th>\n",
       "      <th>lat</th>\n",
       "      <th>lng</th>\n",
       "      <th>postalCode</th>\n",
       "      <th>state</th>\n",
       "    </tr>\n",
       "  </thead>\n",
       "  <tbody>\n",
       "    <tr>\n",
       "      <td>0</td>\n",
       "      <td>Fitness Centre</td>\n",
       "      <td>Gym</td>\n",
       "      <td>Sheraton Centre</td>\n",
       "      <td>43.650985</td>\n",
       "      <td>-79.384002</td>\n",
       "      <td>M5H 2M9</td>\n",
       "      <td>ON</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <td>1</td>\n",
       "      <td>Fitness Centre</td>\n",
       "      <td>Gym</td>\n",
       "      <td>525 Bay St.</td>\n",
       "      <td>43.654690</td>\n",
       "      <td>-79.381739</td>\n",
       "      <td>M5G 2L2</td>\n",
       "      <td>ON</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <td>2</td>\n",
       "      <td>GoodLife Fitness Toronto Bell Trinity Centre</td>\n",
       "      <td>Gym</td>\n",
       "      <td>483 Bay St</td>\n",
       "      <td>43.653436</td>\n",
       "      <td>-79.382314</td>\n",
       "      <td>M5G 2C9</td>\n",
       "      <td>ON</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <td>4</td>\n",
       "      <td>doubletree fitness center (Doubletree Fitness ...</td>\n",
       "      <td>Gym</td>\n",
       "      <td>108 Chestnut Street</td>\n",
       "      <td>43.654603</td>\n",
       "      <td>-79.386204</td>\n",
       "      <td>M5G 1R3</td>\n",
       "      <td>ON</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <td>5</td>\n",
       "      <td>Busy Bee Fitness Experts</td>\n",
       "      <td>Gym</td>\n",
       "      <td>319 Merton Street</td>\n",
       "      <td>43.653944</td>\n",
       "      <td>-79.383370</td>\n",
       "      <td>M4S 1A5</td>\n",
       "      <td>ON</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <td>6</td>\n",
       "      <td>GoodLife Fitness Toronto Plaza</td>\n",
       "      <td>Gym</td>\n",
       "      <td>100 Yonge St</td>\n",
       "      <td>43.649742</td>\n",
       "      <td>-79.378537</td>\n",
       "      <td>M5C 2W1</td>\n",
       "      <td>ON</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <td>9</td>\n",
       "      <td>Google Toronto Fitness Centre</td>\n",
       "      <td>Gym</td>\n",
       "      <td>111 Richmond St W, 11F</td>\n",
       "      <td>43.650319</td>\n",
       "      <td>-79.383782</td>\n",
       "      <td>M5H 2G4</td>\n",
       "      <td>ON</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <td>10</td>\n",
       "      <td>GoodLife Fitness Toronto McCaul and Queen</td>\n",
       "      <td>Gym</td>\n",
       "      <td>21 McCaul St</td>\n",
       "      <td>43.651148</td>\n",
       "      <td>-79.389683</td>\n",
       "      <td>M5T 1V7</td>\n",
       "      <td>ON</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <td>11</td>\n",
       "      <td>GoodLife Fitness Toronto 137 Yonge Street</td>\n",
       "      <td>Gym</td>\n",
       "      <td>137 Yonge St</td>\n",
       "      <td>43.651242</td>\n",
       "      <td>-79.378068</td>\n",
       "      <td>M5C 1W6</td>\n",
       "      <td>ON</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <td>12</td>\n",
       "      <td>Flex - Personal Training Delivered to You</td>\n",
       "      <td>Gym</td>\n",
       "      <td>250 Yonge St</td>\n",
       "      <td>43.654196</td>\n",
       "      <td>-79.381714</td>\n",
       "      <td>M5B 2M6</td>\n",
       "      <td>ON</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <td>14</td>\n",
       "      <td>Medx Precision Fitness</td>\n",
       "      <td>Gym</td>\n",
       "      <td>100-80 Richmond St W</td>\n",
       "      <td>43.651429</td>\n",
       "      <td>-79.382356</td>\n",
       "      <td>M5H 2A4</td>\n",
       "      <td>ON</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <td>16</td>\n",
       "      <td>Great West Life Fitness Centre</td>\n",
       "      <td>Gym</td>\n",
       "      <td>02 - 190 Simcoe St</td>\n",
       "      <td>43.652721</td>\n",
       "      <td>-79.381328</td>\n",
       "      <td>M5T 3M3</td>\n",
       "      <td>ON</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <td>17</td>\n",
       "      <td>Training Centres of Canada</td>\n",
       "      <td>School</td>\n",
       "      <td>330 Bay St</td>\n",
       "      <td>43.650042</td>\n",
       "      <td>-79.380875</td>\n",
       "      <td>M5H 2S8</td>\n",
       "      <td>ON</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <td>18</td>\n",
       "      <td>New Element Training</td>\n",
       "      <td>Gym</td>\n",
       "      <td>439 University Ave</td>\n",
       "      <td>43.654297</td>\n",
       "      <td>-79.387679</td>\n",
       "      <td>M5G 1T6 ‎</td>\n",
       "      <td>ON</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <td>22</td>\n",
       "      <td>Managed IT Training &amp; Courses in Toronto | Res...</td>\n",
       "      <td>IT Services</td>\n",
       "      <td>55 Eglington Avenue East</td>\n",
       "      <td>43.651168</td>\n",
       "      <td>-79.389138</td>\n",
       "      <td>M4P 1G8</td>\n",
       "      <td>ON</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <td>23</td>\n",
       "      <td>Hilton Precor Fitness</td>\n",
       "      <td>Gym</td>\n",
       "      <td>145 Richmond St. W</td>\n",
       "      <td>43.649126</td>\n",
       "      <td>-79.385323</td>\n",
       "      <td>M5H 2L2</td>\n",
       "      <td>ON</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <td>24</td>\n",
       "      <td>Ivy-Anne | Career Training &amp; Development</td>\n",
       "      <td>Business Service</td>\n",
       "      <td>350-1 First Canadian Place</td>\n",
       "      <td>43.648839</td>\n",
       "      <td>-79.382236</td>\n",
       "      <td>M5X 1C1</td>\n",
       "      <td>ON</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <td>26</td>\n",
       "      <td>grange fitness</td>\n",
       "      <td>Gym</td>\n",
       "      <td>32 Grange Rd</td>\n",
       "      <td>43.651920</td>\n",
       "      <td>-79.391255</td>\n",
       "      <td>M5T 1C3</td>\n",
       "      <td>ON</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <td>27</td>\n",
       "      <td>Goodlife Fitness</td>\n",
       "      <td>Gym</td>\n",
       "      <td>139 Yonge Street</td>\n",
       "      <td>43.651203</td>\n",
       "      <td>-79.378760</td>\n",
       "      <td>M5C</td>\n",
       "      <td>ON</td>\n",
       "    </tr>\n",
       "  </tbody>\n",
       "</table>\n",
       "</div>"
      ],
      "text/plain": [
       "                                                 name        categories  \\\n",
       "0                                      Fitness Centre               Gym   \n",
       "1                                      Fitness Centre               Gym   \n",
       "2        GoodLife Fitness Toronto Bell Trinity Centre               Gym   \n",
       "4   doubletree fitness center (Doubletree Fitness ...               Gym   \n",
       "5                            Busy Bee Fitness Experts               Gym   \n",
       "6                      GoodLife Fitness Toronto Plaza               Gym   \n",
       "9                       Google Toronto Fitness Centre               Gym   \n",
       "10          GoodLife Fitness Toronto McCaul and Queen               Gym   \n",
       "11          GoodLife Fitness Toronto 137 Yonge Street               Gym   \n",
       "12          Flex - Personal Training Delivered to You               Gym   \n",
       "14                             Medx Precision Fitness               Gym   \n",
       "16                     Great West Life Fitness Centre               Gym   \n",
       "17                         Training Centres of Canada            School   \n",
       "18                               New Element Training               Gym   \n",
       "22  Managed IT Training & Courses in Toronto | Res...       IT Services   \n",
       "23                              Hilton Precor Fitness               Gym   \n",
       "24           Ivy-Anne | Career Training & Development  Business Service   \n",
       "26                                     grange fitness               Gym   \n",
       "27                                   Goodlife Fitness               Gym   \n",
       "\n",
       "                       address        lat        lng postalCode state  \n",
       "0              Sheraton Centre  43.650985 -79.384002    M5H 2M9    ON  \n",
       "1                  525 Bay St.  43.654690 -79.381739    M5G 2L2    ON  \n",
       "2                   483 Bay St  43.653436 -79.382314    M5G 2C9    ON  \n",
       "4          108 Chestnut Street  43.654603 -79.386204    M5G 1R3    ON  \n",
       "5            319 Merton Street  43.653944 -79.383370    M4S 1A5    ON  \n",
       "6                 100 Yonge St  43.649742 -79.378537    M5C 2W1    ON  \n",
       "9       111 Richmond St W, 11F  43.650319 -79.383782    M5H 2G4    ON  \n",
       "10                21 McCaul St  43.651148 -79.389683    M5T 1V7    ON  \n",
       "11                137 Yonge St  43.651242 -79.378068    M5C 1W6    ON  \n",
       "12                250 Yonge St  43.654196 -79.381714    M5B 2M6    ON  \n",
       "14        100-80 Richmond St W  43.651429 -79.382356    M5H 2A4    ON  \n",
       "16          02 - 190 Simcoe St  43.652721 -79.381328    M5T 3M3    ON  \n",
       "17                  330 Bay St  43.650042 -79.380875    M5H 2S8    ON  \n",
       "18          439 University Ave  43.654297 -79.387679  M5G 1T6 ‎    ON  \n",
       "22    55 Eglington Avenue East  43.651168 -79.389138    M4P 1G8    ON  \n",
       "23          145 Richmond St. W  43.649126 -79.385323    M5H 2L2    ON  \n",
       "24  350-1 First Canadian Place  43.648839 -79.382236    M5X 1C1    ON  \n",
       "26                32 Grange Rd  43.651920 -79.391255    M5T 1C3    ON  \n",
       "27            139 Yonge Street  43.651203 -79.378760        M5C    ON  "
      ]
     },
     "execution_count": 25,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "#Delete rows with NaN values\n",
    "gym_clean_df3 = gym_clean_df2.dropna(axis=0, how='any', thresh=None, subset=None, inplace=False) \n",
    "gym_clean_df3\n",
    "gym_clean_df4 = gym_clean_df3.replace({'categories': r'^Gym / Fitness Center'}, {'categories':'Gym'},regex=True)\n",
    "gym_clean_df3 = gym_clean_df4.replace({'categories': r'Athletics & Sports'}, {'categories':'Gym'},regex=True)\n",
    "\n",
    "gym_clean_df3"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "#### The definition for the Gym category includes: 'Gym', 'Fitness Center', 'Athletics & Sports'"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 26,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "<div>\n",
       "<style scoped>\n",
       "    .dataframe tbody tr th:only-of-type {\n",
       "        vertical-align: middle;\n",
       "    }\n",
       "\n",
       "    .dataframe tbody tr th {\n",
       "        vertical-align: top;\n",
       "    }\n",
       "\n",
       "    .dataframe thead th {\n",
       "        text-align: right;\n",
       "    }\n",
       "</style>\n",
       "<table border=\"1\" class=\"dataframe\">\n",
       "  <thead>\n",
       "    <tr style=\"text-align: right;\">\n",
       "      <th></th>\n",
       "      <th>name</th>\n",
       "      <th>categories</th>\n",
       "      <th>address</th>\n",
       "      <th>lat</th>\n",
       "      <th>lng</th>\n",
       "      <th>postalCode</th>\n",
       "      <th>state</th>\n",
       "    </tr>\n",
       "  </thead>\n",
       "  <tbody>\n",
       "    <tr>\n",
       "      <td>0</td>\n",
       "      <td>Fitness Centre</td>\n",
       "      <td>Gym</td>\n",
       "      <td>Sheraton Centre</td>\n",
       "      <td>43.650985</td>\n",
       "      <td>-79.384002</td>\n",
       "      <td>M5H 2M9</td>\n",
       "      <td>ON</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <td>1</td>\n",
       "      <td>Fitness Centre</td>\n",
       "      <td>Gym</td>\n",
       "      <td>525 Bay St.</td>\n",
       "      <td>43.654690</td>\n",
       "      <td>-79.381739</td>\n",
       "      <td>M5G 2L2</td>\n",
       "      <td>ON</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <td>2</td>\n",
       "      <td>GoodLife Fitness Toronto Bell Trinity Centre</td>\n",
       "      <td>Gym</td>\n",
       "      <td>483 Bay St</td>\n",
       "      <td>43.653436</td>\n",
       "      <td>-79.382314</td>\n",
       "      <td>M5G 2C9</td>\n",
       "      <td>ON</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <td>4</td>\n",
       "      <td>doubletree fitness center (Doubletree Fitness ...</td>\n",
       "      <td>Gym</td>\n",
       "      <td>108 Chestnut Street</td>\n",
       "      <td>43.654603</td>\n",
       "      <td>-79.386204</td>\n",
       "      <td>M5G 1R3</td>\n",
       "      <td>ON</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <td>5</td>\n",
       "      <td>Busy Bee Fitness Experts</td>\n",
       "      <td>Gym</td>\n",
       "      <td>319 Merton Street</td>\n",
       "      <td>43.653944</td>\n",
       "      <td>-79.383370</td>\n",
       "      <td>M4S 1A5</td>\n",
       "      <td>ON</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <td>6</td>\n",
       "      <td>GoodLife Fitness Toronto Plaza</td>\n",
       "      <td>Gym</td>\n",
       "      <td>100 Yonge St</td>\n",
       "      <td>43.649742</td>\n",
       "      <td>-79.378537</td>\n",
       "      <td>M5C 2W1</td>\n",
       "      <td>ON</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <td>9</td>\n",
       "      <td>Google Toronto Fitness Centre</td>\n",
       "      <td>Gym</td>\n",
       "      <td>111 Richmond St W, 11F</td>\n",
       "      <td>43.650319</td>\n",
       "      <td>-79.383782</td>\n",
       "      <td>M5H 2G4</td>\n",
       "      <td>ON</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <td>10</td>\n",
       "      <td>GoodLife Fitness Toronto McCaul and Queen</td>\n",
       "      <td>Gym</td>\n",
       "      <td>21 McCaul St</td>\n",
       "      <td>43.651148</td>\n",
       "      <td>-79.389683</td>\n",
       "      <td>M5T 1V7</td>\n",
       "      <td>ON</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <td>11</td>\n",
       "      <td>GoodLife Fitness Toronto 137 Yonge Street</td>\n",
       "      <td>Gym</td>\n",
       "      <td>137 Yonge St</td>\n",
       "      <td>43.651242</td>\n",
       "      <td>-79.378068</td>\n",
       "      <td>M5C 1W6</td>\n",
       "      <td>ON</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <td>12</td>\n",
       "      <td>Flex - Personal Training Delivered to You</td>\n",
       "      <td>Gym</td>\n",
       "      <td>250 Yonge St</td>\n",
       "      <td>43.654196</td>\n",
       "      <td>-79.381714</td>\n",
       "      <td>M5B 2M6</td>\n",
       "      <td>ON</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <td>14</td>\n",
       "      <td>Medx Precision Fitness</td>\n",
       "      <td>Gym</td>\n",
       "      <td>100-80 Richmond St W</td>\n",
       "      <td>43.651429</td>\n",
       "      <td>-79.382356</td>\n",
       "      <td>M5H 2A4</td>\n",
       "      <td>ON</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <td>16</td>\n",
       "      <td>Great West Life Fitness Centre</td>\n",
       "      <td>Gym</td>\n",
       "      <td>02 - 190 Simcoe St</td>\n",
       "      <td>43.652721</td>\n",
       "      <td>-79.381328</td>\n",
       "      <td>M5T 3M3</td>\n",
       "      <td>ON</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <td>18</td>\n",
       "      <td>New Element Training</td>\n",
       "      <td>Gym</td>\n",
       "      <td>439 University Ave</td>\n",
       "      <td>43.654297</td>\n",
       "      <td>-79.387679</td>\n",
       "      <td>M5G 1T6 ‎</td>\n",
       "      <td>ON</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <td>23</td>\n",
       "      <td>Hilton Precor Fitness</td>\n",
       "      <td>Gym</td>\n",
       "      <td>145 Richmond St. W</td>\n",
       "      <td>43.649126</td>\n",
       "      <td>-79.385323</td>\n",
       "      <td>M5H 2L2</td>\n",
       "      <td>ON</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <td>26</td>\n",
       "      <td>grange fitness</td>\n",
       "      <td>Gym</td>\n",
       "      <td>32 Grange Rd</td>\n",
       "      <td>43.651920</td>\n",
       "      <td>-79.391255</td>\n",
       "      <td>M5T 1C3</td>\n",
       "      <td>ON</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <td>27</td>\n",
       "      <td>Goodlife Fitness</td>\n",
       "      <td>Gym</td>\n",
       "      <td>139 Yonge Street</td>\n",
       "      <td>43.651203</td>\n",
       "      <td>-79.378760</td>\n",
       "      <td>M5C</td>\n",
       "      <td>ON</td>\n",
       "    </tr>\n",
       "  </tbody>\n",
       "</table>\n",
       "</div>"
      ],
      "text/plain": [
       "                                                 name categories  \\\n",
       "0                                      Fitness Centre        Gym   \n",
       "1                                      Fitness Centre        Gym   \n",
       "2        GoodLife Fitness Toronto Bell Trinity Centre        Gym   \n",
       "4   doubletree fitness center (Doubletree Fitness ...        Gym   \n",
       "5                            Busy Bee Fitness Experts        Gym   \n",
       "6                      GoodLife Fitness Toronto Plaza        Gym   \n",
       "9                       Google Toronto Fitness Centre        Gym   \n",
       "10          GoodLife Fitness Toronto McCaul and Queen        Gym   \n",
       "11          GoodLife Fitness Toronto 137 Yonge Street        Gym   \n",
       "12          Flex - Personal Training Delivered to You        Gym   \n",
       "14                             Medx Precision Fitness        Gym   \n",
       "16                     Great West Life Fitness Centre        Gym   \n",
       "18                               New Element Training        Gym   \n",
       "23                              Hilton Precor Fitness        Gym   \n",
       "26                                     grange fitness        Gym   \n",
       "27                                   Goodlife Fitness        Gym   \n",
       "\n",
       "                   address        lat        lng postalCode state  \n",
       "0          Sheraton Centre  43.650985 -79.384002    M5H 2M9    ON  \n",
       "1              525 Bay St.  43.654690 -79.381739    M5G 2L2    ON  \n",
       "2               483 Bay St  43.653436 -79.382314    M5G 2C9    ON  \n",
       "4      108 Chestnut Street  43.654603 -79.386204    M5G 1R3    ON  \n",
       "5        319 Merton Street  43.653944 -79.383370    M4S 1A5    ON  \n",
       "6             100 Yonge St  43.649742 -79.378537    M5C 2W1    ON  \n",
       "9   111 Richmond St W, 11F  43.650319 -79.383782    M5H 2G4    ON  \n",
       "10            21 McCaul St  43.651148 -79.389683    M5T 1V7    ON  \n",
       "11            137 Yonge St  43.651242 -79.378068    M5C 1W6    ON  \n",
       "12            250 Yonge St  43.654196 -79.381714    M5B 2M6    ON  \n",
       "14    100-80 Richmond St W  43.651429 -79.382356    M5H 2A4    ON  \n",
       "16      02 - 190 Simcoe St  43.652721 -79.381328    M5T 3M3    ON  \n",
       "18      439 University Ave  43.654297 -79.387679  M5G 1T6 ‎    ON  \n",
       "23      145 Richmond St. W  43.649126 -79.385323    M5H 2L2    ON  \n",
       "26            32 Grange Rd  43.651920 -79.391255    M5T 1C3    ON  \n",
       "27        139 Yonge Street  43.651203 -79.378760        M5C    ON  "
      ]
     },
     "execution_count": 27,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "#Isolate gym locations by selecting where category is equal to Gym, Fitness Center and Athletics & Sports\n",
    "array= ['Gym', 'Gym / Fitness Center', 'Athletics & Sports']\n",
    "gym_df= gym_clean_df3.loc[gym_clean_df3['categories'].isin(array)]\n",
    "gym_df"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "### Search for Bars"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 28,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/plain": [
       "'https://api.foursquare.com/v2/venues/search?client_id=4N2JQWBURUPB3RAZRVHJB0GEWBEIY2XV1M52YICC1OEDQYZF&client_secret=CV1SIIOAW43MIMZ2BAWLMU4WOQ20GPE4T25HOHW024QEONS1&ll=43.6534817,-79.3839347&v=20180604&query=Bar&radius=500&limit=100'"
      ]
     },
     "execution_count": 29,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "#Search for Bars\n",
    "search_query = 'Bar'\n",
    "radius = 500\n",
    "\n",
    "#Create the API request URL\n",
    "url = 'https://api.foursquare.com/v2/venues/search?client_id={}&client_secret={}&ll={},{}&v={}&query={}&radius={}&limit={}'\\\n",
    ".format(CLIENT_ID, CLIENT_SECRET, latitude, longitude, VERSION, search_query, radius, LIMIT)\n",
    "url"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 30,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "<div>\n",
       "<style scoped>\n",
       "    .dataframe tbody tr th:only-of-type {\n",
       "        vertical-align: middle;\n",
       "    }\n",
       "\n",
       "    .dataframe tbody tr th {\n",
       "        vertical-align: top;\n",
       "    }\n",
       "\n",
       "    .dataframe thead th {\n",
       "        text-align: right;\n",
       "    }\n",
       "</style>\n",
       "<table border=\"1\" class=\"dataframe\">\n",
       "  <thead>\n",
       "    <tr style=\"text-align: right;\">\n",
       "      <th></th>\n",
       "      <th>id</th>\n",
       "      <th>name</th>\n",
       "      <th>categories</th>\n",
       "      <th>referralId</th>\n",
       "      <th>hasPerk</th>\n",
       "      <th>location.address</th>\n",
       "      <th>location.crossStreet</th>\n",
       "      <th>location.lat</th>\n",
       "      <th>location.lng</th>\n",
       "      <th>location.labeledLatLngs</th>\n",
       "      <th>location.distance</th>\n",
       "      <th>location.postalCode</th>\n",
       "      <th>location.cc</th>\n",
       "      <th>location.neighborhood</th>\n",
       "      <th>location.city</th>\n",
       "      <th>location.state</th>\n",
       "      <th>location.country</th>\n",
       "      <th>location.formattedAddress</th>\n",
       "      <th>venuePage.id</th>\n",
       "    </tr>\n",
       "  </thead>\n",
       "  <tbody>\n",
       "    <tr>\n",
       "      <td>0</td>\n",
       "      <td>4b3db5e4f964a520709625e3</td>\n",
       "      <td>Quinn's Steakhouse &amp; Bar</td>\n",
       "      <td>[{'id': '4bf58dd8d48988d1cc941735', 'name': 'S...</td>\n",
       "      <td>v-1587990732</td>\n",
       "      <td>False</td>\n",
       "      <td>96 Richmond Street West</td>\n",
       "      <td>at Bay</td>\n",
       "      <td>43.651197</td>\n",
       "      <td>-79.382976</td>\n",
       "      <td>[{'label': 'display', 'lat': 43.65119745750837...</td>\n",
       "      <td>265</td>\n",
       "      <td>M5H 2A3</td>\n",
       "      <td>CA</td>\n",
       "      <td>Financial District</td>\n",
       "      <td>Toronto</td>\n",
       "      <td>ON</td>\n",
       "      <td>Canada</td>\n",
       "      <td>[96 Richmond Street West (at Bay), Toronto ON ...</td>\n",
       "      <td>90490783</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <td>1</td>\n",
       "      <td>57dd99cb498ee67580d16390</td>\n",
       "      <td>Bar Verde</td>\n",
       "      <td>[{'id': '4bf58dd8d48988d157941735', 'name': 'N...</td>\n",
       "      <td>v-1587990732</td>\n",
       "      <td>False</td>\n",
       "      <td>260 Yonge Street</td>\n",
       "      <td>NaN</td>\n",
       "      <td>43.654837</td>\n",
       "      <td>-79.380742</td>\n",
       "      <td>[{'label': 'display', 'lat': 43.654837, 'lng':...</td>\n",
       "      <td>298</td>\n",
       "      <td>M5B 2L9</td>\n",
       "      <td>CA</td>\n",
       "      <td>NaN</td>\n",
       "      <td>Toronto</td>\n",
       "      <td>ON</td>\n",
       "      <td>Canada</td>\n",
       "      <td>[260 Yonge Street, Toronto ON M5B 2L9, Canada]</td>\n",
       "      <td>NaN</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <td>2</td>\n",
       "      <td>4af8da92f964a5204a1022e3</td>\n",
       "      <td>Blue Stone Grill &amp; Bar</td>\n",
       "      <td>[{'id': '4bf58dd8d48988d11b941735', 'name': 'P...</td>\n",
       "      <td>v-1587990732</td>\n",
       "      <td>False</td>\n",
       "      <td>372 Bay St.</td>\n",
       "      <td>at Richmond St.</td>\n",
       "      <td>43.651187</td>\n",
       "      <td>-79.381139</td>\n",
       "      <td>[{'label': 'display', 'lat': 43.65118713330148...</td>\n",
       "      <td>340</td>\n",
       "      <td>M5H 1M7</td>\n",
       "      <td>CA</td>\n",
       "      <td>NaN</td>\n",
       "      <td>Toronto</td>\n",
       "      <td>ON</td>\n",
       "      <td>Canada</td>\n",
       "      <td>[372 Bay St. (at Richmond St.), Toronto ON M5H...</td>\n",
       "      <td>NaN</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <td>3</td>\n",
       "      <td>50ca02be245f2d4aa8c2ab5b</td>\n",
       "      <td>Barristers Bar</td>\n",
       "      <td>[{'id': '4bf58dd8d48988d1c4941735', 'name': 'R...</td>\n",
       "      <td>v-1587990732</td>\n",
       "      <td>False</td>\n",
       "      <td>145 Richmond Street West</td>\n",
       "      <td>Hilton Toronto</td>\n",
       "      <td>43.649797</td>\n",
       "      <td>-79.385807</td>\n",
       "      <td>[{'label': 'display', 'lat': 43.64979669604817...</td>\n",
       "      <td>437</td>\n",
       "      <td>M5H 2L2</td>\n",
       "      <td>CA</td>\n",
       "      <td>NaN</td>\n",
       "      <td>Toronto</td>\n",
       "      <td>ON</td>\n",
       "      <td>Canada</td>\n",
       "      <td>[145 Richmond Street West (Hilton Toronto), To...</td>\n",
       "      <td>NaN</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <td>4</td>\n",
       "      <td>4ad949def964a520991921e3</td>\n",
       "      <td>Bar+ Karaoke Lounge</td>\n",
       "      <td>[{'id': '4bf58dd8d48988d120941735', 'name': 'K...</td>\n",
       "      <td>v-1587990732</td>\n",
       "      <td>False</td>\n",
       "      <td>360 Yonge St.</td>\n",
       "      <td>at Elm St.</td>\n",
       "      <td>43.658338</td>\n",
       "      <td>-79.381902</td>\n",
       "      <td>[{'label': 'display', 'lat': 43.65833815125888...</td>\n",
       "      <td>564</td>\n",
       "      <td>M5B 1S5</td>\n",
       "      <td>CA</td>\n",
       "      <td>NaN</td>\n",
       "      <td>Toronto</td>\n",
       "      <td>ON</td>\n",
       "      <td>Canada</td>\n",
       "      <td>[360 Yonge St. (at Elm St.), Toronto ON M5B 1S...</td>\n",
       "      <td>NaN</td>\n",
       "    </tr>\n",
       "  </tbody>\n",
       "</table>\n",
       "</div>"
      ],
      "text/plain": [
       "                         id                      name  \\\n",
       "0  4b3db5e4f964a520709625e3  Quinn's Steakhouse & Bar   \n",
       "1  57dd99cb498ee67580d16390                 Bar Verde   \n",
       "2  4af8da92f964a5204a1022e3    Blue Stone Grill & Bar   \n",
       "3  50ca02be245f2d4aa8c2ab5b            Barristers Bar   \n",
       "4  4ad949def964a520991921e3       Bar+ Karaoke Lounge   \n",
       "\n",
       "                                          categories    referralId  hasPerk  \\\n",
       "0  [{'id': '4bf58dd8d48988d1cc941735', 'name': 'S...  v-1587990732    False   \n",
       "1  [{'id': '4bf58dd8d48988d157941735', 'name': 'N...  v-1587990732    False   \n",
       "2  [{'id': '4bf58dd8d48988d11b941735', 'name': 'P...  v-1587990732    False   \n",
       "3  [{'id': '4bf58dd8d48988d1c4941735', 'name': 'R...  v-1587990732    False   \n",
       "4  [{'id': '4bf58dd8d48988d120941735', 'name': 'K...  v-1587990732    False   \n",
       "\n",
       "           location.address location.crossStreet  location.lat  location.lng  \\\n",
       "0   96 Richmond Street West               at Bay     43.651197    -79.382976   \n",
       "1          260 Yonge Street                  NaN     43.654837    -79.380742   \n",
       "2               372 Bay St.      at Richmond St.     43.651187    -79.381139   \n",
       "3  145 Richmond Street West       Hilton Toronto     43.649797    -79.385807   \n",
       "4             360 Yonge St.           at Elm St.     43.658338    -79.381902   \n",
       "\n",
       "                             location.labeledLatLngs  location.distance  \\\n",
       "0  [{'label': 'display', 'lat': 43.65119745750837...                265   \n",
       "1  [{'label': 'display', 'lat': 43.654837, 'lng':...                298   \n",
       "2  [{'label': 'display', 'lat': 43.65118713330148...                340   \n",
       "3  [{'label': 'display', 'lat': 43.64979669604817...                437   \n",
       "4  [{'label': 'display', 'lat': 43.65833815125888...                564   \n",
       "\n",
       "  location.postalCode location.cc location.neighborhood location.city  \\\n",
       "0             M5H 2A3          CA    Financial District       Toronto   \n",
       "1             M5B 2L9          CA                   NaN       Toronto   \n",
       "2             M5H 1M7          CA                   NaN       Toronto   \n",
       "3             M5H 2L2          CA                   NaN       Toronto   \n",
       "4             M5B 1S5          CA                   NaN       Toronto   \n",
       "\n",
       "  location.state location.country  \\\n",
       "0             ON           Canada   \n",
       "1             ON           Canada   \n",
       "2             ON           Canada   \n",
       "3             ON           Canada   \n",
       "4             ON           Canada   \n",
       "\n",
       "                           location.formattedAddress venuePage.id  \n",
       "0  [96 Richmond Street West (at Bay), Toronto ON ...     90490783  \n",
       "1     [260 Yonge Street, Toronto ON M5B 2L9, Canada]          NaN  \n",
       "2  [372 Bay St. (at Richmond St.), Toronto ON M5H...          NaN  \n",
       "3  [145 Richmond Street West (Hilton Toronto), To...          NaN  \n",
       "4  [360 Yonge St. (at Elm St.), Toronto ON M5B 1S...          NaN  "
      ]
     },
     "execution_count": 31,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "#Send the GET Request \n",
    "bar_results = requests.get(url).json()\n",
    "\n",
    "#Assign relevant part of JSON to venues\n",
    "venues = bar_results['response']['venues']\n",
    "\n",
    "#Tranform venues into a dataframe\n",
    "bar_df = json_normalize(venues)\n",
    "bar_df.head()"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "### Clean the Bar Dataframe"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 32,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "<div>\n",
       "<style scoped>\n",
       "    .dataframe tbody tr th:only-of-type {\n",
       "        vertical-align: middle;\n",
       "    }\n",
       "\n",
       "    .dataframe tbody tr th {\n",
       "        vertical-align: top;\n",
       "    }\n",
       "\n",
       "    .dataframe thead th {\n",
       "        text-align: right;\n",
       "    }\n",
       "</style>\n",
       "<table border=\"1\" class=\"dataframe\">\n",
       "  <thead>\n",
       "    <tr style=\"text-align: right;\">\n",
       "      <th></th>\n",
       "      <th>name</th>\n",
       "      <th>categories</th>\n",
       "      <th>address</th>\n",
       "      <th>crossStreet</th>\n",
       "      <th>lat</th>\n",
       "      <th>lng</th>\n",
       "      <th>labeledLatLngs</th>\n",
       "      <th>distance</th>\n",
       "      <th>postalCode</th>\n",
       "      <th>cc</th>\n",
       "      <th>neighborhood</th>\n",
       "      <th>city</th>\n",
       "      <th>state</th>\n",
       "      <th>country</th>\n",
       "      <th>formattedAddress</th>\n",
       "      <th>id</th>\n",
       "    </tr>\n",
       "  </thead>\n",
       "  <tbody>\n",
       "    <tr>\n",
       "      <td>0</td>\n",
       "      <td>Quinn's Steakhouse &amp; Bar</td>\n",
       "      <td>Steakhouse</td>\n",
       "      <td>96 Richmond Street West</td>\n",
       "      <td>at Bay</td>\n",
       "      <td>43.651197</td>\n",
       "      <td>-79.382976</td>\n",
       "      <td>[{'label': 'display', 'lat': 43.65119745750837...</td>\n",
       "      <td>265</td>\n",
       "      <td>M5H 2A3</td>\n",
       "      <td>CA</td>\n",
       "      <td>Financial District</td>\n",
       "      <td>Toronto</td>\n",
       "      <td>ON</td>\n",
       "      <td>Canada</td>\n",
       "      <td>[96 Richmond Street West (at Bay), Toronto ON ...</td>\n",
       "      <td>4b3db5e4f964a520709625e3</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <td>1</td>\n",
       "      <td>Bar Verde</td>\n",
       "      <td>New American Restaurant</td>\n",
       "      <td>260 Yonge Street</td>\n",
       "      <td>NaN</td>\n",
       "      <td>43.654837</td>\n",
       "      <td>-79.380742</td>\n",
       "      <td>[{'label': 'display', 'lat': 43.654837, 'lng':...</td>\n",
       "      <td>298</td>\n",
       "      <td>M5B 2L9</td>\n",
       "      <td>CA</td>\n",
       "      <td>NaN</td>\n",
       "      <td>Toronto</td>\n",
       "      <td>ON</td>\n",
       "      <td>Canada</td>\n",
       "      <td>[260 Yonge Street, Toronto ON M5B 2L9, Canada]</td>\n",
       "      <td>57dd99cb498ee67580d16390</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <td>2</td>\n",
       "      <td>Blue Stone Grill &amp; Bar</td>\n",
       "      <td>Pub</td>\n",
       "      <td>372 Bay St.</td>\n",
       "      <td>at Richmond St.</td>\n",
       "      <td>43.651187</td>\n",
       "      <td>-79.381139</td>\n",
       "      <td>[{'label': 'display', 'lat': 43.65118713330148...</td>\n",
       "      <td>340</td>\n",
       "      <td>M5H 1M7</td>\n",
       "      <td>CA</td>\n",
       "      <td>NaN</td>\n",
       "      <td>Toronto</td>\n",
       "      <td>ON</td>\n",
       "      <td>Canada</td>\n",
       "      <td>[372 Bay St. (at Richmond St.), Toronto ON M5H...</td>\n",
       "      <td>4af8da92f964a5204a1022e3</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <td>3</td>\n",
       "      <td>Barristers Bar</td>\n",
       "      <td>Restaurant</td>\n",
       "      <td>145 Richmond Street West</td>\n",
       "      <td>Hilton Toronto</td>\n",
       "      <td>43.649797</td>\n",
       "      <td>-79.385807</td>\n",
       "      <td>[{'label': 'display', 'lat': 43.64979669604817...</td>\n",
       "      <td>437</td>\n",
       "      <td>M5H 2L2</td>\n",
       "      <td>CA</td>\n",
       "      <td>NaN</td>\n",
       "      <td>Toronto</td>\n",
       "      <td>ON</td>\n",
       "      <td>Canada</td>\n",
       "      <td>[145 Richmond Street West (Hilton Toronto), To...</td>\n",
       "      <td>50ca02be245f2d4aa8c2ab5b</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <td>4</td>\n",
       "      <td>Bar+ Karaoke Lounge</td>\n",
       "      <td>Karaoke Bar</td>\n",
       "      <td>360 Yonge St.</td>\n",
       "      <td>at Elm St.</td>\n",
       "      <td>43.658338</td>\n",
       "      <td>-79.381902</td>\n",
       "      <td>[{'label': 'display', 'lat': 43.65833815125888...</td>\n",
       "      <td>564</td>\n",
       "      <td>M5B 1S5</td>\n",
       "      <td>CA</td>\n",
       "      <td>NaN</td>\n",
       "      <td>Toronto</td>\n",
       "      <td>ON</td>\n",
       "      <td>Canada</td>\n",
       "      <td>[360 Yonge St. (at Elm St.), Toronto ON M5B 1S...</td>\n",
       "      <td>4ad949def964a520991921e3</td>\n",
       "    </tr>\n",
       "  </tbody>\n",
       "</table>\n",
       "</div>"
      ],
      "text/plain": [
       "                       name               categories  \\\n",
       "0  Quinn's Steakhouse & Bar               Steakhouse   \n",
       "1                 Bar Verde  New American Restaurant   \n",
       "2    Blue Stone Grill & Bar                      Pub   \n",
       "3            Barristers Bar               Restaurant   \n",
       "4       Bar+ Karaoke Lounge              Karaoke Bar   \n",
       "\n",
       "                    address      crossStreet        lat        lng  \\\n",
       "0   96 Richmond Street West           at Bay  43.651197 -79.382976   \n",
       "1          260 Yonge Street              NaN  43.654837 -79.380742   \n",
       "2               372 Bay St.  at Richmond St.  43.651187 -79.381139   \n",
       "3  145 Richmond Street West   Hilton Toronto  43.649797 -79.385807   \n",
       "4             360 Yonge St.       at Elm St.  43.658338 -79.381902   \n",
       "\n",
       "                                      labeledLatLngs  distance postalCode  cc  \\\n",
       "0  [{'label': 'display', 'lat': 43.65119745750837...       265    M5H 2A3  CA   \n",
       "1  [{'label': 'display', 'lat': 43.654837, 'lng':...       298    M5B 2L9  CA   \n",
       "2  [{'label': 'display', 'lat': 43.65118713330148...       340    M5H 1M7  CA   \n",
       "3  [{'label': 'display', 'lat': 43.64979669604817...       437    M5H 2L2  CA   \n",
       "4  [{'label': 'display', 'lat': 43.65833815125888...       564    M5B 1S5  CA   \n",
       "\n",
       "         neighborhood     city state country  \\\n",
       "0  Financial District  Toronto    ON  Canada   \n",
       "1                 NaN  Toronto    ON  Canada   \n",
       "2                 NaN  Toronto    ON  Canada   \n",
       "3                 NaN  Toronto    ON  Canada   \n",
       "4                 NaN  Toronto    ON  Canada   \n",
       "\n",
       "                                    formattedAddress                        id  \n",
       "0  [96 Richmond Street West (at Bay), Toronto ON ...  4b3db5e4f964a520709625e3  \n",
       "1     [260 Yonge Street, Toronto ON M5B 2L9, Canada]  57dd99cb498ee67580d16390  \n",
       "2  [372 Bay St. (at Richmond St.), Toronto ON M5H...  4af8da92f964a5204a1022e3  \n",
       "3  [145 Richmond Street West (Hilton Toronto), To...  50ca02be245f2d4aa8c2ab5b  \n",
       "4  [360 Yonge St. (at Elm St.), Toronto ON M5B 1S...  4ad949def964a520991921e3  "
      ]
     },
     "execution_count": 33,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "#Keep columns that include venue name and any associated with location\n",
    "bar_clean_col = ['name', 'categories'] + [col for col in bar_df.columns if col.startswith('location.')]+ ['id']\n",
    "bar_clean_df = bar_df.loc[:,bar_clean_col]\n",
    "\n",
    "#Retrieve venue category \n",
    "def get_category_type(row):\n",
    "    try:\n",
    "        categories_list = row['categories']\n",
    "    except:\n",
    "        categories_list = row['venue.categories']\n",
    "        \n",
    "    if len(categories_list) == 0:\n",
    "        return None\n",
    "    else:\n",
    "        return categories_list[0]['name']\n",
    "\n",
    "#Filter category for each row\n",
    "bar_clean_df['categories'] = bar_clean_df.apply(get_category_type, axis=1)\n",
    "\n",
    "#Clean column names by removing the first term\n",
    "bar_clean_df.columns = [column.split('.')[-1] for column in bar_clean_df.columns]\n",
    "bar_clean_df.head()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 34,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "<div>\n",
       "<style scoped>\n",
       "    .dataframe tbody tr th:only-of-type {\n",
       "        vertical-align: middle;\n",
       "    }\n",
       "\n",
       "    .dataframe tbody tr th {\n",
       "        vertical-align: top;\n",
       "    }\n",
       "\n",
       "    .dataframe thead th {\n",
       "        text-align: right;\n",
       "    }\n",
       "</style>\n",
       "<table border=\"1\" class=\"dataframe\">\n",
       "  <thead>\n",
       "    <tr style=\"text-align: right;\">\n",
       "      <th></th>\n",
       "      <th>name</th>\n",
       "      <th>categories</th>\n",
       "      <th>address</th>\n",
       "      <th>lat</th>\n",
       "      <th>lng</th>\n",
       "      <th>postalCode</th>\n",
       "      <th>state</th>\n",
       "    </tr>\n",
       "  </thead>\n",
       "  <tbody>\n",
       "    <tr>\n",
       "      <td>0</td>\n",
       "      <td>Quinn's Steakhouse &amp; Bar</td>\n",
       "      <td>Steakhouse</td>\n",
       "      <td>96 Richmond Street West</td>\n",
       "      <td>43.651197</td>\n",
       "      <td>-79.382976</td>\n",
       "      <td>M5H 2A3</td>\n",
       "      <td>ON</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <td>1</td>\n",
       "      <td>Bar Verde</td>\n",
       "      <td>New American Restaurant</td>\n",
       "      <td>260 Yonge Street</td>\n",
       "      <td>43.654837</td>\n",
       "      <td>-79.380742</td>\n",
       "      <td>M5B 2L9</td>\n",
       "      <td>ON</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <td>2</td>\n",
       "      <td>Blue Stone Grill &amp; Bar</td>\n",
       "      <td>Pub</td>\n",
       "      <td>372 Bay St.</td>\n",
       "      <td>43.651187</td>\n",
       "      <td>-79.381139</td>\n",
       "      <td>M5H 1M7</td>\n",
       "      <td>ON</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <td>3</td>\n",
       "      <td>Barristers Bar</td>\n",
       "      <td>Restaurant</td>\n",
       "      <td>145 Richmond Street West</td>\n",
       "      <td>43.649797</td>\n",
       "      <td>-79.385807</td>\n",
       "      <td>M5H 2L2</td>\n",
       "      <td>ON</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <td>4</td>\n",
       "      <td>Bar+ Karaoke Lounge</td>\n",
       "      <td>Karaoke Bar</td>\n",
       "      <td>360 Yonge St.</td>\n",
       "      <td>43.658338</td>\n",
       "      <td>-79.381902</td>\n",
       "      <td>M5B 1S5</td>\n",
       "      <td>ON</td>\n",
       "    </tr>\n",
       "  </tbody>\n",
       "</table>\n",
       "</div>"
      ],
      "text/plain": [
       "                       name               categories  \\\n",
       "0  Quinn's Steakhouse & Bar               Steakhouse   \n",
       "1                 Bar Verde  New American Restaurant   \n",
       "2    Blue Stone Grill & Bar                      Pub   \n",
       "3            Barristers Bar               Restaurant   \n",
       "4       Bar+ Karaoke Lounge              Karaoke Bar   \n",
       "\n",
       "                    address        lat        lng postalCode state  \n",
       "0   96 Richmond Street West  43.651197 -79.382976    M5H 2A3    ON  \n",
       "1          260 Yonge Street  43.654837 -79.380742    M5B 2L9    ON  \n",
       "2               372 Bay St.  43.651187 -79.381139    M5H 1M7    ON  \n",
       "3  145 Richmond Street West  43.649797 -79.385807    M5H 2L2    ON  \n",
       "4             360 Yonge St.  43.658338 -79.381902    M5B 1S5    ON  "
      ]
     },
     "execution_count": 35,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "#Delete unnecessary columns\n",
    "bar_clean_df2= bar_clean_df.drop(['cc', 'city', 'country', 'crossStreet', 'distance','formattedAddress', 'id','labeledLatLngs', 'neighborhood'], axis=1)\n",
    "bar_clean_df2.head()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 36,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "<div>\n",
       "<style scoped>\n",
       "    .dataframe tbody tr th:only-of-type {\n",
       "        vertical-align: middle;\n",
       "    }\n",
       "\n",
       "    .dataframe tbody tr th {\n",
       "        vertical-align: top;\n",
       "    }\n",
       "\n",
       "    .dataframe thead th {\n",
       "        text-align: right;\n",
       "    }\n",
       "</style>\n",
       "<table border=\"1\" class=\"dataframe\">\n",
       "  <thead>\n",
       "    <tr style=\"text-align: right;\">\n",
       "      <th></th>\n",
       "      <th>name</th>\n",
       "      <th>categories</th>\n",
       "      <th>address</th>\n",
       "      <th>lat</th>\n",
       "      <th>lng</th>\n",
       "      <th>postalCode</th>\n",
       "      <th>state</th>\n",
       "    </tr>\n",
       "  </thead>\n",
       "  <tbody>\n",
       "    <tr>\n",
       "      <td>0</td>\n",
       "      <td>Quinn's Steakhouse &amp; Bar</td>\n",
       "      <td>Steakhouse</td>\n",
       "      <td>96 Richmond Street West</td>\n",
       "      <td>43.651197</td>\n",
       "      <td>-79.382976</td>\n",
       "      <td>M5H 2A3</td>\n",
       "      <td>ON</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <td>1</td>\n",
       "      <td>Bar Verde</td>\n",
       "      <td>New American Restaurant</td>\n",
       "      <td>260 Yonge Street</td>\n",
       "      <td>43.654837</td>\n",
       "      <td>-79.380742</td>\n",
       "      <td>M5B 2L9</td>\n",
       "      <td>ON</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <td>2</td>\n",
       "      <td>Blue Stone Grill &amp; Bar</td>\n",
       "      <td>Pub</td>\n",
       "      <td>372 Bay St.</td>\n",
       "      <td>43.651187</td>\n",
       "      <td>-79.381139</td>\n",
       "      <td>M5H 1M7</td>\n",
       "      <td>ON</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <td>3</td>\n",
       "      <td>Barristers Bar</td>\n",
       "      <td>Restaurant</td>\n",
       "      <td>145 Richmond Street West</td>\n",
       "      <td>43.649797</td>\n",
       "      <td>-79.385807</td>\n",
       "      <td>M5H 2L2</td>\n",
       "      <td>ON</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <td>4</td>\n",
       "      <td>Bar+ Karaoke Lounge</td>\n",
       "      <td>Karaoke Bar</td>\n",
       "      <td>360 Yonge St.</td>\n",
       "      <td>43.658338</td>\n",
       "      <td>-79.381902</td>\n",
       "      <td>M5B 1S5</td>\n",
       "      <td>ON</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <td>5</td>\n",
       "      <td>Pantages Lounge &amp; Bar</td>\n",
       "      <td>Cocktail Bar</td>\n",
       "      <td>200 Victoria St.</td>\n",
       "      <td>43.654493</td>\n",
       "      <td>-79.379000</td>\n",
       "      <td>M5B 1W8</td>\n",
       "      <td>ON</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <td>7</td>\n",
       "      <td>St. Louis Bar &amp; Grill</td>\n",
       "      <td>Bar</td>\n",
       "      <td>595 Bay St #A09</td>\n",
       "      <td>43.656562</td>\n",
       "      <td>-79.382737</td>\n",
       "      <td>M5G 2C2</td>\n",
       "      <td>ON</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <td>8</td>\n",
       "      <td>The Rex Hotel Jazz &amp; Blues Bar</td>\n",
       "      <td>Jazz Club</td>\n",
       "      <td>194 Queen St W</td>\n",
       "      <td>43.650505</td>\n",
       "      <td>-79.388577</td>\n",
       "      <td>M5V 1Z1</td>\n",
       "      <td>ON</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <td>9</td>\n",
       "      <td>The Keg Steakhouse + Bar - York Street</td>\n",
       "      <td>Restaurant</td>\n",
       "      <td>165 York St</td>\n",
       "      <td>43.649987</td>\n",
       "      <td>-79.384103</td>\n",
       "      <td>M5H 3R8</td>\n",
       "      <td>ON</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <td>10</td>\n",
       "      <td>Milestones Grill + Bar</td>\n",
       "      <td>American Restaurant</td>\n",
       "      <td>400 - 10 Dundas St E</td>\n",
       "      <td>43.656345</td>\n",
       "      <td>-79.380840</td>\n",
       "      <td>M5B 2G9</td>\n",
       "      <td>ON</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <td>13</td>\n",
       "      <td>Aroma Espresso Bar</td>\n",
       "      <td>Café</td>\n",
       "      <td>562 Bay Street</td>\n",
       "      <td>43.655185</td>\n",
       "      <td>-79.383594</td>\n",
       "      <td>M5G 0B3</td>\n",
       "      <td>ON</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <td>15</td>\n",
       "      <td>Benefit Cosmetics Brow Bar</td>\n",
       "      <td>Health &amp; Beauty Service</td>\n",
       "      <td>220 Yonge Street</td>\n",
       "      <td>43.653670</td>\n",
       "      <td>-79.380070</td>\n",
       "      <td>M5B 2H1</td>\n",
       "      <td>ON</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <td>18</td>\n",
       "      <td>CF Bubbly Bar</td>\n",
       "      <td>Shopping Mall</td>\n",
       "      <td>250 Yonge street</td>\n",
       "      <td>43.654986</td>\n",
       "      <td>-79.381169</td>\n",
       "      <td>M5G 1B1</td>\n",
       "      <td>ON</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <td>19</td>\n",
       "      <td>St. Louis Bar &amp; Grill</td>\n",
       "      <td>Bar</td>\n",
       "      <td>595 Bay St.,Unit A08</td>\n",
       "      <td>43.655992</td>\n",
       "      <td>-79.383463</td>\n",
       "      <td>M5G 2C2</td>\n",
       "      <td>ON</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <td>20</td>\n",
       "      <td>Bar Senator</td>\n",
       "      <td>Cocktail Bar</td>\n",
       "      <td>249 Victoria Street</td>\n",
       "      <td>43.655380</td>\n",
       "      <td>-79.379088</td>\n",
       "      <td>M5B 1V8</td>\n",
       "      <td>ON</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <td>23</td>\n",
       "      <td>Blo Blow Dry Bar</td>\n",
       "      <td>Health &amp; Beauty Service</td>\n",
       "      <td>130 King Street West</td>\n",
       "      <td>43.648617</td>\n",
       "      <td>-79.383325</td>\n",
       "      <td>M5X 1E2</td>\n",
       "      <td>ON</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <td>26</td>\n",
       "      <td>Bar+ Karaoke</td>\n",
       "      <td>Bar</td>\n",
       "      <td>360 Yonge St</td>\n",
       "      <td>43.657968</td>\n",
       "      <td>-79.381907</td>\n",
       "      <td>M6S 1Z9</td>\n",
       "      <td>ON</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <td>28</td>\n",
       "      <td>T|Bar</td>\n",
       "      <td>Cocktail Bar</td>\n",
       "      <td>33 Gerrard Street West</td>\n",
       "      <td>43.658727</td>\n",
       "      <td>-79.383047</td>\n",
       "      <td>M5G 1Z4</td>\n",
       "      <td>ON</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <td>29</td>\n",
       "      <td>Aroma Espresso Bar</td>\n",
       "      <td>Coffee Shop</td>\n",
       "      <td>220 Yonge St</td>\n",
       "      <td>43.654462</td>\n",
       "      <td>-79.380908</td>\n",
       "      <td>M5B 2H1</td>\n",
       "      <td>ON</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <td>30</td>\n",
       "      <td>Bar Adelaide</td>\n",
       "      <td>Hotel Bar</td>\n",
       "      <td>325 Bay Street</td>\n",
       "      <td>43.649800</td>\n",
       "      <td>-79.380160</td>\n",
       "      <td>M5H</td>\n",
       "      <td>ON</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <td>31</td>\n",
       "      <td>Maezo Restaurant &amp; Bar</td>\n",
       "      <td>Indian Restaurant</td>\n",
       "      <td>67 Richmond Street West</td>\n",
       "      <td>43.651091</td>\n",
       "      <td>-79.381843</td>\n",
       "      <td>M5H 1Z5</td>\n",
       "      <td>ON</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <td>32</td>\n",
       "      <td>Polish’d Nail Bar - Richmond-Adelaide Centre</td>\n",
       "      <td>Nail Salon</td>\n",
       "      <td>130 Adelaide St W</td>\n",
       "      <td>43.649699</td>\n",
       "      <td>-79.383866</td>\n",
       "      <td>M5H 3P5</td>\n",
       "      <td>ON</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <td>33</td>\n",
       "      <td>Cherry Street Bar-B-Que</td>\n",
       "      <td>BBQ Joint</td>\n",
       "      <td>111 Richmond St W</td>\n",
       "      <td>43.650421</td>\n",
       "      <td>-79.383919</td>\n",
       "      <td>M5H 2G4</td>\n",
       "      <td>ON</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <td>34</td>\n",
       "      <td>Champagne Bar</td>\n",
       "      <td>Cocktail Bar</td>\n",
       "      <td>Pusateri’s @ Saks Fith Avenue</td>\n",
       "      <td>43.652209</td>\n",
       "      <td>-79.379316</td>\n",
       "      <td>M5C 1X7</td>\n",
       "      <td>ON</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <td>35</td>\n",
       "      <td>Tundra Bar</td>\n",
       "      <td>Hotel Bar</td>\n",
       "      <td>145 Richmond St W</td>\n",
       "      <td>43.649999</td>\n",
       "      <td>-79.385607</td>\n",
       "      <td>M5H 2L2</td>\n",
       "      <td>ON</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <td>36</td>\n",
       "      <td>Blo Blow Dry Bar</td>\n",
       "      <td>Health &amp; Beauty Service</td>\n",
       "      <td>180 University Avenue</td>\n",
       "      <td>43.649066</td>\n",
       "      <td>-79.386017</td>\n",
       "      <td>M5H 3C6</td>\n",
       "      <td>ON</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <td>39</td>\n",
       "      <td>Shark Club Sports Bar &amp; Grill</td>\n",
       "      <td>Sports Bar</td>\n",
       "      <td>10 Dundas St E</td>\n",
       "      <td>43.656745</td>\n",
       "      <td>-79.380484</td>\n",
       "      <td>M5B 0A1</td>\n",
       "      <td>ON</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <td>40</td>\n",
       "      <td>Drake Mini Bar</td>\n",
       "      <td>Restaurant</td>\n",
       "      <td>150 York St.</td>\n",
       "      <td>43.649501</td>\n",
       "      <td>-79.384427</td>\n",
       "      <td>M5H 3S5</td>\n",
       "      <td>ON</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <td>41</td>\n",
       "      <td>The Vegas Bar</td>\n",
       "      <td>Nightclub</td>\n",
       "      <td>22 Duncan St.</td>\n",
       "      <td>43.649962</td>\n",
       "      <td>-79.386945</td>\n",
       "      <td>M5H 3G8</td>\n",
       "      <td>ON</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <td>43</td>\n",
       "      <td>Blo Blow Dry Bar</td>\n",
       "      <td>Salon / Barbershop</td>\n",
       "      <td>130 King St W</td>\n",
       "      <td>43.648542</td>\n",
       "      <td>-79.383258</td>\n",
       "      <td>M5X 1E2</td>\n",
       "      <td>ON</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <td>44</td>\n",
       "      <td>Alio Restaurant &amp; Wine Bar</td>\n",
       "      <td>Italian Restaurant</td>\n",
       "      <td>108 Dundas St W</td>\n",
       "      <td>43.655655</td>\n",
       "      <td>-79.384124</td>\n",
       "      <td>M5G 1C3</td>\n",
       "      <td>ON</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <td>45</td>\n",
       "      <td>The Black Canary Espresso Bar</td>\n",
       "      <td>Café</td>\n",
       "      <td>329 Yonge St.</td>\n",
       "      <td>43.657029</td>\n",
       "      <td>-79.381385</td>\n",
       "      <td>M5B 1R7</td>\n",
       "      <td>ON</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <td>46</td>\n",
       "      <td>Hendricks Restaurant &amp; Bar</td>\n",
       "      <td>Restaurant</td>\n",
       "      <td>Yonge And Queen</td>\n",
       "      <td>43.653415</td>\n",
       "      <td>-79.379698</td>\n",
       "      <td>M5G 2H6</td>\n",
       "      <td>ON</td>\n",
       "    </tr>\n",
       "  </tbody>\n",
       "</table>\n",
       "</div>"
      ],
      "text/plain": [
       "                                            name               categories  \\\n",
       "0                       Quinn's Steakhouse & Bar               Steakhouse   \n",
       "1                                      Bar Verde  New American Restaurant   \n",
       "2                         Blue Stone Grill & Bar                      Pub   \n",
       "3                                 Barristers Bar               Restaurant   \n",
       "4                            Bar+ Karaoke Lounge              Karaoke Bar   \n",
       "5                          Pantages Lounge & Bar             Cocktail Bar   \n",
       "7                          St. Louis Bar & Grill                      Bar   \n",
       "8                 The Rex Hotel Jazz & Blues Bar                Jazz Club   \n",
       "9         The Keg Steakhouse + Bar - York Street               Restaurant   \n",
       "10                        Milestones Grill + Bar      American Restaurant   \n",
       "13                            Aroma Espresso Bar                     Café   \n",
       "15                    Benefit Cosmetics Brow Bar  Health & Beauty Service   \n",
       "18                                 CF Bubbly Bar            Shopping Mall   \n",
       "19                         St. Louis Bar & Grill                      Bar   \n",
       "20                                   Bar Senator             Cocktail Bar   \n",
       "23                              Blo Blow Dry Bar  Health & Beauty Service   \n",
       "26                                  Bar+ Karaoke                      Bar   \n",
       "28                                         T|Bar             Cocktail Bar   \n",
       "29                            Aroma Espresso Bar              Coffee Shop   \n",
       "30                                  Bar Adelaide                Hotel Bar   \n",
       "31                        Maezo Restaurant & Bar        Indian Restaurant   \n",
       "32  Polish’d Nail Bar - Richmond-Adelaide Centre               Nail Salon   \n",
       "33                       Cherry Street Bar-B-Que                BBQ Joint   \n",
       "34                                 Champagne Bar             Cocktail Bar   \n",
       "35                                    Tundra Bar                Hotel Bar   \n",
       "36                              Blo Blow Dry Bar  Health & Beauty Service   \n",
       "39                 Shark Club Sports Bar & Grill               Sports Bar   \n",
       "40                                Drake Mini Bar               Restaurant   \n",
       "41                                 The Vegas Bar                Nightclub   \n",
       "43                              Blo Blow Dry Bar       Salon / Barbershop   \n",
       "44                    Alio Restaurant & Wine Bar       Italian Restaurant   \n",
       "45                 The Black Canary Espresso Bar                     Café   \n",
       "46                    Hendricks Restaurant & Bar               Restaurant   \n",
       "\n",
       "                          address        lat        lng postalCode state  \n",
       "0         96 Richmond Street West  43.651197 -79.382976    M5H 2A3    ON  \n",
       "1                260 Yonge Street  43.654837 -79.380742    M5B 2L9    ON  \n",
       "2                     372 Bay St.  43.651187 -79.381139    M5H 1M7    ON  \n",
       "3        145 Richmond Street West  43.649797 -79.385807    M5H 2L2    ON  \n",
       "4                   360 Yonge St.  43.658338 -79.381902    M5B 1S5    ON  \n",
       "5                200 Victoria St.  43.654493 -79.379000    M5B 1W8    ON  \n",
       "7                 595 Bay St #A09  43.656562 -79.382737    M5G 2C2    ON  \n",
       "8                  194 Queen St W  43.650505 -79.388577    M5V 1Z1    ON  \n",
       "9                     165 York St  43.649987 -79.384103    M5H 3R8    ON  \n",
       "10           400 - 10 Dundas St E  43.656345 -79.380840    M5B 2G9    ON  \n",
       "13                 562 Bay Street  43.655185 -79.383594    M5G 0B3    ON  \n",
       "15               220 Yonge Street  43.653670 -79.380070    M5B 2H1    ON  \n",
       "18               250 Yonge street  43.654986 -79.381169    M5G 1B1    ON  \n",
       "19           595 Bay St.,Unit A08  43.655992 -79.383463    M5G 2C2    ON  \n",
       "20            249 Victoria Street  43.655380 -79.379088    M5B 1V8    ON  \n",
       "23           130 King Street West  43.648617 -79.383325    M5X 1E2    ON  \n",
       "26                   360 Yonge St  43.657968 -79.381907    M6S 1Z9    ON  \n",
       "28         33 Gerrard Street West  43.658727 -79.383047    M5G 1Z4    ON  \n",
       "29                   220 Yonge St  43.654462 -79.380908    M5B 2H1    ON  \n",
       "30                 325 Bay Street  43.649800 -79.380160        M5H    ON  \n",
       "31        67 Richmond Street West  43.651091 -79.381843    M5H 1Z5    ON  \n",
       "32              130 Adelaide St W  43.649699 -79.383866    M5H 3P5    ON  \n",
       "33              111 Richmond St W  43.650421 -79.383919    M5H 2G4    ON  \n",
       "34  Pusateri’s @ Saks Fith Avenue  43.652209 -79.379316    M5C 1X7    ON  \n",
       "35              145 Richmond St W  43.649999 -79.385607    M5H 2L2    ON  \n",
       "36          180 University Avenue  43.649066 -79.386017    M5H 3C6    ON  \n",
       "39                 10 Dundas St E  43.656745 -79.380484    M5B 0A1    ON  \n",
       "40                   150 York St.  43.649501 -79.384427    M5H 3S5    ON  \n",
       "41                  22 Duncan St.  43.649962 -79.386945    M5H 3G8    ON  \n",
       "43                  130 King St W  43.648542 -79.383258    M5X 1E2    ON  \n",
       "44                108 Dundas St W  43.655655 -79.384124    M5G 1C3    ON  \n",
       "45                  329 Yonge St.  43.657029 -79.381385    M5B 1R7    ON  \n",
       "46                Yonge And Queen  43.653415 -79.379698    M5G 2H6    ON  "
      ]
     },
     "execution_count": 37,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "#Delete rows with NaN values\n",
    "bar_clean_df3 = bar_clean_df2.dropna(axis=0, how='any', thresh=None, subset=None, inplace=False) \n",
    "bar_clean_df3"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "#### The definition for the Bar category includes: 'Bar', 'Sports Bar', 'Nightclub', 'Cocktail Bar', 'Hotel Bar', 'Pub', 'Jazz Club', 'Karaoke Bar'."
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 38,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "<div>\n",
       "<style scoped>\n",
       "    .dataframe tbody tr th:only-of-type {\n",
       "        vertical-align: middle;\n",
       "    }\n",
       "\n",
       "    .dataframe tbody tr th {\n",
       "        vertical-align: top;\n",
       "    }\n",
       "\n",
       "    .dataframe thead th {\n",
       "        text-align: right;\n",
       "    }\n",
       "</style>\n",
       "<table border=\"1\" class=\"dataframe\">\n",
       "  <thead>\n",
       "    <tr style=\"text-align: right;\">\n",
       "      <th></th>\n",
       "      <th>name</th>\n",
       "      <th>categories</th>\n",
       "      <th>address</th>\n",
       "      <th>lat</th>\n",
       "      <th>lng</th>\n",
       "      <th>postalCode</th>\n",
       "      <th>state</th>\n",
       "    </tr>\n",
       "  </thead>\n",
       "  <tbody>\n",
       "    <tr>\n",
       "      <td>2</td>\n",
       "      <td>Blue Stone Grill &amp; Bar</td>\n",
       "      <td>Bar</td>\n",
       "      <td>372 Bay St.</td>\n",
       "      <td>43.651187</td>\n",
       "      <td>-79.381139</td>\n",
       "      <td>M5H 1M7</td>\n",
       "      <td>ON</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <td>4</td>\n",
       "      <td>Bar+ Karaoke Lounge</td>\n",
       "      <td>Bar</td>\n",
       "      <td>360 Yonge St.</td>\n",
       "      <td>43.658338</td>\n",
       "      <td>-79.381902</td>\n",
       "      <td>M5B 1S5</td>\n",
       "      <td>ON</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <td>5</td>\n",
       "      <td>Pantages Lounge &amp; Bar</td>\n",
       "      <td>Bar</td>\n",
       "      <td>200 Victoria St.</td>\n",
       "      <td>43.654493</td>\n",
       "      <td>-79.379000</td>\n",
       "      <td>M5B 1W8</td>\n",
       "      <td>ON</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <td>7</td>\n",
       "      <td>St. Louis Bar &amp; Grill</td>\n",
       "      <td>Bar</td>\n",
       "      <td>595 Bay St #A09</td>\n",
       "      <td>43.656562</td>\n",
       "      <td>-79.382737</td>\n",
       "      <td>M5G 2C2</td>\n",
       "      <td>ON</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <td>8</td>\n",
       "      <td>The Rex Hotel Jazz &amp; Blues Bar</td>\n",
       "      <td>Bar</td>\n",
       "      <td>194 Queen St W</td>\n",
       "      <td>43.650505</td>\n",
       "      <td>-79.388577</td>\n",
       "      <td>M5V 1Z1</td>\n",
       "      <td>ON</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <td>19</td>\n",
       "      <td>St. Louis Bar &amp; Grill</td>\n",
       "      <td>Bar</td>\n",
       "      <td>595 Bay St.,Unit A08</td>\n",
       "      <td>43.655992</td>\n",
       "      <td>-79.383463</td>\n",
       "      <td>M5G 2C2</td>\n",
       "      <td>ON</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <td>20</td>\n",
       "      <td>Bar Senator</td>\n",
       "      <td>Bar</td>\n",
       "      <td>249 Victoria Street</td>\n",
       "      <td>43.655380</td>\n",
       "      <td>-79.379088</td>\n",
       "      <td>M5B 1V8</td>\n",
       "      <td>ON</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <td>26</td>\n",
       "      <td>Bar+ Karaoke</td>\n",
       "      <td>Bar</td>\n",
       "      <td>360 Yonge St</td>\n",
       "      <td>43.657968</td>\n",
       "      <td>-79.381907</td>\n",
       "      <td>M6S 1Z9</td>\n",
       "      <td>ON</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <td>28</td>\n",
       "      <td>T|Bar</td>\n",
       "      <td>Bar</td>\n",
       "      <td>33 Gerrard Street West</td>\n",
       "      <td>43.658727</td>\n",
       "      <td>-79.383047</td>\n",
       "      <td>M5G 1Z4</td>\n",
       "      <td>ON</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <td>30</td>\n",
       "      <td>Bar Adelaide</td>\n",
       "      <td>Bar</td>\n",
       "      <td>325 Bay Street</td>\n",
       "      <td>43.649800</td>\n",
       "      <td>-79.380160</td>\n",
       "      <td>M5H</td>\n",
       "      <td>ON</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <td>34</td>\n",
       "      <td>Champagne Bar</td>\n",
       "      <td>Bar</td>\n",
       "      <td>Pusateri’s @ Saks Fith Avenue</td>\n",
       "      <td>43.652209</td>\n",
       "      <td>-79.379316</td>\n",
       "      <td>M5C 1X7</td>\n",
       "      <td>ON</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <td>35</td>\n",
       "      <td>Tundra Bar</td>\n",
       "      <td>Bar</td>\n",
       "      <td>145 Richmond St W</td>\n",
       "      <td>43.649999</td>\n",
       "      <td>-79.385607</td>\n",
       "      <td>M5H 2L2</td>\n",
       "      <td>ON</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <td>39</td>\n",
       "      <td>Shark Club Sports Bar &amp; Grill</td>\n",
       "      <td>Bar</td>\n",
       "      <td>10 Dundas St E</td>\n",
       "      <td>43.656745</td>\n",
       "      <td>-79.380484</td>\n",
       "      <td>M5B 0A1</td>\n",
       "      <td>ON</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <td>41</td>\n",
       "      <td>The Vegas Bar</td>\n",
       "      <td>Bar</td>\n",
       "      <td>22 Duncan St.</td>\n",
       "      <td>43.649962</td>\n",
       "      <td>-79.386945</td>\n",
       "      <td>M5H 3G8</td>\n",
       "      <td>ON</td>\n",
       "    </tr>\n",
       "  </tbody>\n",
       "</table>\n",
       "</div>"
      ],
      "text/plain": [
       "                              name categories                        address  \\\n",
       "2           Blue Stone Grill & Bar        Bar                    372 Bay St.   \n",
       "4              Bar+ Karaoke Lounge        Bar                  360 Yonge St.   \n",
       "5            Pantages Lounge & Bar        Bar               200 Victoria St.   \n",
       "7            St. Louis Bar & Grill        Bar                595 Bay St #A09   \n",
       "8   The Rex Hotel Jazz & Blues Bar        Bar                 194 Queen St W   \n",
       "19           St. Louis Bar & Grill        Bar           595 Bay St.,Unit A08   \n",
       "20                     Bar Senator        Bar            249 Victoria Street   \n",
       "26                    Bar+ Karaoke        Bar                   360 Yonge St   \n",
       "28                           T|Bar        Bar         33 Gerrard Street West   \n",
       "30                    Bar Adelaide        Bar                 325 Bay Street   \n",
       "34                   Champagne Bar        Bar  Pusateri’s @ Saks Fith Avenue   \n",
       "35                      Tundra Bar        Bar              145 Richmond St W   \n",
       "39   Shark Club Sports Bar & Grill        Bar                 10 Dundas St E   \n",
       "41                   The Vegas Bar        Bar                  22 Duncan St.   \n",
       "\n",
       "          lat        lng postalCode state  \n",
       "2   43.651187 -79.381139    M5H 1M7    ON  \n",
       "4   43.658338 -79.381902    M5B 1S5    ON  \n",
       "5   43.654493 -79.379000    M5B 1W8    ON  \n",
       "7   43.656562 -79.382737    M5G 2C2    ON  \n",
       "8   43.650505 -79.388577    M5V 1Z1    ON  \n",
       "19  43.655992 -79.383463    M5G 2C2    ON  \n",
       "20  43.655380 -79.379088    M5B 1V8    ON  \n",
       "26  43.657968 -79.381907    M6S 1Z9    ON  \n",
       "28  43.658727 -79.383047    M5G 1Z4    ON  \n",
       "30  43.649800 -79.380160        M5H    ON  \n",
       "34  43.652209 -79.379316    M5C 1X7    ON  \n",
       "35  43.649999 -79.385607    M5H 2L2    ON  \n",
       "39  43.656745 -79.380484    M5B 0A1    ON  \n",
       "41  43.649962 -79.386945    M5H 3G8    ON  "
      ]
     },
     "execution_count": 39,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "#Isolate bar locations by selecting where category is equal to 'Bar','Sports Bar', 'Nightclub', 'Cocktail Bar', 'Hotel Bar', 'Pub', 'Jazz Club' and 'Karaoke Bar'\n",
    "array= ['Bar', 'Sports Bar', 'Nightclub', 'Cocktail Bar', 'Hotel Bar', 'Pub', 'Jazz Club', 'Karaoke Bar']\n",
    "bar_df= bar_clean_df3.loc[bar_clean_df3['categories'].isin(array)]\n",
    "\n",
    "#Replace venue category names with 'Bar'\n",
    "bar_df = bar_df2.replace({'categories': r'^Nightclub'},{'categories': 'Bar'}, regex=True)\n",
    "bar_df2 = bar_df.replace({'categories': r'^Karaoke Bar'},{'categories': 'Bar'}, regex=True)\n",
    "bar_df = bar_df2.replace({'categories': r'^Jazz Club'},{'categories': 'Bar'}, regex=True)\n",
    "bar_df2 = bar_df.replace({'categories': r'^Cocktail Bar'},{'categories': 'Bar'}, regex=True)\n",
    "bar_df = bar_df2.replace({'categories': r'^Hotel Bar'},{'categories': 'Bar'}, regex=True)\n",
    "bar_df2 = bar_df.replace({'categories': r'^Sports Bar'},{'categories': 'Bar'}, regex=True)\n",
    "bar_df = bar_df2.replace({'categories': r'^Pub'},{'categories': 'Bar'}, regex=True)\n",
    "                      \n",
    "bar_df"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "### Search for Shopping Malls"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 40,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/plain": [
       "'https://api.foursquare.com/v2/venues/search?client_id=4N2JQWBURUPB3RAZRVHJB0GEWBEIY2XV1M52YICC1OEDQYZF&client_secret=CV1SIIOAW43MIMZ2BAWLMU4WOQ20GPE4T25HOHW024QEONS1&ll=43.6534817,-79.3839347&v=20180604&query=Shopping&radius=1000&limit=100'"
      ]
     },
     "execution_count": 41,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "#Search for shopping malls\n",
    "search_query = 'Shopping'\n",
    "radius = 1000\n",
    "\n",
    "#Create the API request URL\n",
    "url = 'https://api.foursquare.com/v2/venues/search?client_id={}&client_secret={}&ll={},{}&v={}&query={}&radius={}&limit={}'\\\n",
    ".format(CLIENT_ID, CLIENT_SECRET, latitude, longitude, VERSION, search_query, radius, LIMIT)\n",
    "url"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 42,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "<div>\n",
       "<style scoped>\n",
       "    .dataframe tbody tr th:only-of-type {\n",
       "        vertical-align: middle;\n",
       "    }\n",
       "\n",
       "    .dataframe tbody tr th {\n",
       "        vertical-align: top;\n",
       "    }\n",
       "\n",
       "    .dataframe thead th {\n",
       "        text-align: right;\n",
       "    }\n",
       "</style>\n",
       "<table border=\"1\" class=\"dataframe\">\n",
       "  <thead>\n",
       "    <tr style=\"text-align: right;\">\n",
       "      <th></th>\n",
       "      <th>id</th>\n",
       "      <th>name</th>\n",
       "      <th>categories</th>\n",
       "      <th>referralId</th>\n",
       "      <th>hasPerk</th>\n",
       "      <th>location.address</th>\n",
       "      <th>location.crossStreet</th>\n",
       "      <th>location.lat</th>\n",
       "      <th>location.lng</th>\n",
       "      <th>location.labeledLatLngs</th>\n",
       "      <th>location.distance</th>\n",
       "      <th>location.postalCode</th>\n",
       "      <th>location.cc</th>\n",
       "      <th>location.city</th>\n",
       "      <th>location.state</th>\n",
       "      <th>location.country</th>\n",
       "      <th>location.formattedAddress</th>\n",
       "      <th>location.neighborhood</th>\n",
       "    </tr>\n",
       "  </thead>\n",
       "  <tbody>\n",
       "    <tr>\n",
       "      <td>0</td>\n",
       "      <td>5840cafe06f1a34af80cc609</td>\n",
       "      <td>Saks Fifth Avenue Club - Personal Shopping</td>\n",
       "      <td>[{'id': '4bf58dd8d48988d1f6941735', 'name': 'D...</td>\n",
       "      <td>v-1587990786</td>\n",
       "      <td>False</td>\n",
       "      <td>176 Yonge Street</td>\n",
       "      <td>Queen Street West</td>\n",
       "      <td>43.651810</td>\n",
       "      <td>-79.379192</td>\n",
       "      <td>[{'label': 'display', 'lat': 43.65181, 'lng': ...</td>\n",
       "      <td>424</td>\n",
       "      <td>M5C 2L7</td>\n",
       "      <td>CA</td>\n",
       "      <td>Toronto</td>\n",
       "      <td>ON</td>\n",
       "      <td>Canada</td>\n",
       "      <td>[176 Yonge Street (Queen Street West), Toronto...</td>\n",
       "      <td>NaN</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <td>1</td>\n",
       "      <td>4b9e86dff964a520e6eb36e3</td>\n",
       "      <td>TD Centre Shopping Concourse</td>\n",
       "      <td>[{'id': '4bf58dd8d48988d1fd941735', 'name': 'S...</td>\n",
       "      <td>v-1587990786</td>\n",
       "      <td>False</td>\n",
       "      <td>66 Wellington St W</td>\n",
       "      <td>btw York &amp; Bay St</td>\n",
       "      <td>43.647184</td>\n",
       "      <td>-79.380932</td>\n",
       "      <td>[{'label': 'display', 'lat': 43.64718424611984...</td>\n",
       "      <td>741</td>\n",
       "      <td>M5K 1A1</td>\n",
       "      <td>CA</td>\n",
       "      <td>Toronto</td>\n",
       "      <td>ON</td>\n",
       "      <td>Canada</td>\n",
       "      <td>[66 Wellington St W (btw York &amp; Bay St), Toron...</td>\n",
       "      <td>NaN</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <td>2</td>\n",
       "      <td>4ad77a12f964a520260b21e3</td>\n",
       "      <td>CF Toronto Eaton Centre</td>\n",
       "      <td>[{'id': '4bf58dd8d48988d1fd941735', 'name': 'S...</td>\n",
       "      <td>v-1587990786</td>\n",
       "      <td>False</td>\n",
       "      <td>220 Yonge St</td>\n",
       "      <td>btwn Queen &amp; Dundas</td>\n",
       "      <td>43.654540</td>\n",
       "      <td>-79.380677</td>\n",
       "      <td>NaN</td>\n",
       "      <td>287</td>\n",
       "      <td>M5B 2H1</td>\n",
       "      <td>CA</td>\n",
       "      <td>Toronto</td>\n",
       "      <td>ON</td>\n",
       "      <td>Canada</td>\n",
       "      <td>[220 Yonge St (btwn Queen &amp; Dundas), Toronto O...</td>\n",
       "      <td>Downtown Toronto, Toronto, ON</td>\n",
       "    </tr>\n",
       "  </tbody>\n",
       "</table>\n",
       "</div>"
      ],
      "text/plain": [
       "                         id                                        name  \\\n",
       "0  5840cafe06f1a34af80cc609  Saks Fifth Avenue Club - Personal Shopping   \n",
       "1  4b9e86dff964a520e6eb36e3                TD Centre Shopping Concourse   \n",
       "2  4ad77a12f964a520260b21e3                     CF Toronto Eaton Centre   \n",
       "\n",
       "                                          categories    referralId  hasPerk  \\\n",
       "0  [{'id': '4bf58dd8d48988d1f6941735', 'name': 'D...  v-1587990786    False   \n",
       "1  [{'id': '4bf58dd8d48988d1fd941735', 'name': 'S...  v-1587990786    False   \n",
       "2  [{'id': '4bf58dd8d48988d1fd941735', 'name': 'S...  v-1587990786    False   \n",
       "\n",
       "     location.address location.crossStreet  location.lat  location.lng  \\\n",
       "0    176 Yonge Street    Queen Street West     43.651810    -79.379192   \n",
       "1  66 Wellington St W    btw York & Bay St     43.647184    -79.380932   \n",
       "2        220 Yonge St  btwn Queen & Dundas     43.654540    -79.380677   \n",
       "\n",
       "                             location.labeledLatLngs  location.distance  \\\n",
       "0  [{'label': 'display', 'lat': 43.65181, 'lng': ...                424   \n",
       "1  [{'label': 'display', 'lat': 43.64718424611984...                741   \n",
       "2                                                NaN                287   \n",
       "\n",
       "  location.postalCode location.cc location.city location.state  \\\n",
       "0             M5C 2L7          CA       Toronto             ON   \n",
       "1             M5K 1A1          CA       Toronto             ON   \n",
       "2             M5B 2H1          CA       Toronto             ON   \n",
       "\n",
       "  location.country                          location.formattedAddress  \\\n",
       "0           Canada  [176 Yonge Street (Queen Street West), Toronto...   \n",
       "1           Canada  [66 Wellington St W (btw York & Bay St), Toron...   \n",
       "2           Canada  [220 Yonge St (btwn Queen & Dundas), Toronto O...   \n",
       "\n",
       "           location.neighborhood  \n",
       "0                            NaN  \n",
       "1                            NaN  \n",
       "2  Downtown Toronto, Toronto, ON  "
      ]
     },
     "execution_count": 43,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "#Send the GET Request \n",
    "mall_results = requests.get(url).json()\n",
    "\n",
    "#Assign relevant part of JSON to venues\n",
    "venues = mall_results['response']['venues']\n",
    "\n",
    "#Tranform venues into a dataframe\n",
    "mall_df = json_normalize(venues)\n",
    "mall_df"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "### Clean the Shopping Mall Dataframe"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 44,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "<div>\n",
       "<style scoped>\n",
       "    .dataframe tbody tr th:only-of-type {\n",
       "        vertical-align: middle;\n",
       "    }\n",
       "\n",
       "    .dataframe tbody tr th {\n",
       "        vertical-align: top;\n",
       "    }\n",
       "\n",
       "    .dataframe thead th {\n",
       "        text-align: right;\n",
       "    }\n",
       "</style>\n",
       "<table border=\"1\" class=\"dataframe\">\n",
       "  <thead>\n",
       "    <tr style=\"text-align: right;\">\n",
       "      <th></th>\n",
       "      <th>name</th>\n",
       "      <th>categories</th>\n",
       "      <th>address</th>\n",
       "      <th>crossStreet</th>\n",
       "      <th>lat</th>\n",
       "      <th>lng</th>\n",
       "      <th>labeledLatLngs</th>\n",
       "      <th>distance</th>\n",
       "      <th>postalCode</th>\n",
       "      <th>cc</th>\n",
       "      <th>city</th>\n",
       "      <th>state</th>\n",
       "      <th>country</th>\n",
       "      <th>formattedAddress</th>\n",
       "      <th>neighborhood</th>\n",
       "      <th>id</th>\n",
       "    </tr>\n",
       "  </thead>\n",
       "  <tbody>\n",
       "    <tr>\n",
       "      <td>0</td>\n",
       "      <td>Saks Fifth Avenue Club - Personal Shopping</td>\n",
       "      <td>Department Store</td>\n",
       "      <td>176 Yonge Street</td>\n",
       "      <td>Queen Street West</td>\n",
       "      <td>43.651810</td>\n",
       "      <td>-79.379192</td>\n",
       "      <td>[{'label': 'display', 'lat': 43.65181, 'lng': ...</td>\n",
       "      <td>424</td>\n",
       "      <td>M5C 2L7</td>\n",
       "      <td>CA</td>\n",
       "      <td>Toronto</td>\n",
       "      <td>ON</td>\n",
       "      <td>Canada</td>\n",
       "      <td>[176 Yonge Street (Queen Street West), Toronto...</td>\n",
       "      <td>NaN</td>\n",
       "      <td>5840cafe06f1a34af80cc609</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <td>1</td>\n",
       "      <td>TD Centre Shopping Concourse</td>\n",
       "      <td>Shopping Mall</td>\n",
       "      <td>66 Wellington St W</td>\n",
       "      <td>btw York &amp; Bay St</td>\n",
       "      <td>43.647184</td>\n",
       "      <td>-79.380932</td>\n",
       "      <td>[{'label': 'display', 'lat': 43.64718424611984...</td>\n",
       "      <td>741</td>\n",
       "      <td>M5K 1A1</td>\n",
       "      <td>CA</td>\n",
       "      <td>Toronto</td>\n",
       "      <td>ON</td>\n",
       "      <td>Canada</td>\n",
       "      <td>[66 Wellington St W (btw York &amp; Bay St), Toron...</td>\n",
       "      <td>NaN</td>\n",
       "      <td>4b9e86dff964a520e6eb36e3</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <td>2</td>\n",
       "      <td>CF Toronto Eaton Centre</td>\n",
       "      <td>Shopping Mall</td>\n",
       "      <td>220 Yonge St</td>\n",
       "      <td>btwn Queen &amp; Dundas</td>\n",
       "      <td>43.654540</td>\n",
       "      <td>-79.380677</td>\n",
       "      <td>NaN</td>\n",
       "      <td>287</td>\n",
       "      <td>M5B 2H1</td>\n",
       "      <td>CA</td>\n",
       "      <td>Toronto</td>\n",
       "      <td>ON</td>\n",
       "      <td>Canada</td>\n",
       "      <td>[220 Yonge St (btwn Queen &amp; Dundas), Toronto O...</td>\n",
       "      <td>Downtown Toronto, Toronto, ON</td>\n",
       "      <td>4ad77a12f964a520260b21e3</td>\n",
       "    </tr>\n",
       "  </tbody>\n",
       "</table>\n",
       "</div>"
      ],
      "text/plain": [
       "                                         name        categories  \\\n",
       "0  Saks Fifth Avenue Club - Personal Shopping  Department Store   \n",
       "1                TD Centre Shopping Concourse     Shopping Mall   \n",
       "2                     CF Toronto Eaton Centre     Shopping Mall   \n",
       "\n",
       "              address          crossStreet        lat        lng  \\\n",
       "0    176 Yonge Street    Queen Street West  43.651810 -79.379192   \n",
       "1  66 Wellington St W    btw York & Bay St  43.647184 -79.380932   \n",
       "2        220 Yonge St  btwn Queen & Dundas  43.654540 -79.380677   \n",
       "\n",
       "                                      labeledLatLngs  distance postalCode  cc  \\\n",
       "0  [{'label': 'display', 'lat': 43.65181, 'lng': ...       424    M5C 2L7  CA   \n",
       "1  [{'label': 'display', 'lat': 43.64718424611984...       741    M5K 1A1  CA   \n",
       "2                                                NaN       287    M5B 2H1  CA   \n",
       "\n",
       "      city state country                                   formattedAddress  \\\n",
       "0  Toronto    ON  Canada  [176 Yonge Street (Queen Street West), Toronto...   \n",
       "1  Toronto    ON  Canada  [66 Wellington St W (btw York & Bay St), Toron...   \n",
       "2  Toronto    ON  Canada  [220 Yonge St (btwn Queen & Dundas), Toronto O...   \n",
       "\n",
       "                    neighborhood                        id  \n",
       "0                            NaN  5840cafe06f1a34af80cc609  \n",
       "1                            NaN  4b9e86dff964a520e6eb36e3  \n",
       "2  Downtown Toronto, Toronto, ON  4ad77a12f964a520260b21e3  "
      ]
     },
     "execution_count": 45,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "#Keep columns that include venue name and any associated with location\n",
    "mall_clean_col = ['name', 'categories'] + [col for col in mall_df.columns if col.startswith('location.')]+ ['id']\n",
    "mall_clean_df = mall_df.loc[:,mall_clean_col]\n",
    "\n",
    "#Retrieve venue category \n",
    "def get_category_type(row):\n",
    "    try:\n",
    "        categories_list = row['categories']\n",
    "    except:\n",
    "        categories_list = row['venue.categories']\n",
    "        \n",
    "    if len(categories_list) == 0:\n",
    "        return None\n",
    "    else:\n",
    "        return categories_list[0]['name']\n",
    "\n",
    "#Filter category for each row\n",
    "mall_clean_df['categories'] = mall_clean_df.apply(get_category_type, axis=1)\n",
    "\n",
    "#Clean column names by removing the first term\n",
    "mall_clean_df.columns = [column.split('.')[-1] for column in mall_clean_df.columns]\n",
    "mall_clean_df.head()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 46,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "<div>\n",
       "<style scoped>\n",
       "    .dataframe tbody tr th:only-of-type {\n",
       "        vertical-align: middle;\n",
       "    }\n",
       "\n",
       "    .dataframe tbody tr th {\n",
       "        vertical-align: top;\n",
       "    }\n",
       "\n",
       "    .dataframe thead th {\n",
       "        text-align: right;\n",
       "    }\n",
       "</style>\n",
       "<table border=\"1\" class=\"dataframe\">\n",
       "  <thead>\n",
       "    <tr style=\"text-align: right;\">\n",
       "      <th></th>\n",
       "      <th>name</th>\n",
       "      <th>categories</th>\n",
       "      <th>address</th>\n",
       "      <th>lat</th>\n",
       "      <th>lng</th>\n",
       "      <th>postalCode</th>\n",
       "      <th>state</th>\n",
       "    </tr>\n",
       "  </thead>\n",
       "  <tbody>\n",
       "    <tr>\n",
       "      <td>0</td>\n",
       "      <td>Saks Fifth Avenue Club - Personal Shopping</td>\n",
       "      <td>Department Store</td>\n",
       "      <td>176 Yonge Street</td>\n",
       "      <td>43.651810</td>\n",
       "      <td>-79.379192</td>\n",
       "      <td>M5C 2L7</td>\n",
       "      <td>ON</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <td>1</td>\n",
       "      <td>TD Centre Shopping Concourse</td>\n",
       "      <td>Shopping Mall</td>\n",
       "      <td>66 Wellington St W</td>\n",
       "      <td>43.647184</td>\n",
       "      <td>-79.380932</td>\n",
       "      <td>M5K 1A1</td>\n",
       "      <td>ON</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <td>2</td>\n",
       "      <td>CF Toronto Eaton Centre</td>\n",
       "      <td>Shopping Mall</td>\n",
       "      <td>220 Yonge St</td>\n",
       "      <td>43.654540</td>\n",
       "      <td>-79.380677</td>\n",
       "      <td>M5B 2H1</td>\n",
       "      <td>ON</td>\n",
       "    </tr>\n",
       "  </tbody>\n",
       "</table>\n",
       "</div>"
      ],
      "text/plain": [
       "                                         name        categories  \\\n",
       "0  Saks Fifth Avenue Club - Personal Shopping  Department Store   \n",
       "1                TD Centre Shopping Concourse     Shopping Mall   \n",
       "2                     CF Toronto Eaton Centre     Shopping Mall   \n",
       "\n",
       "              address        lat        lng postalCode state  \n",
       "0    176 Yonge Street  43.651810 -79.379192    M5C 2L7    ON  \n",
       "1  66 Wellington St W  43.647184 -79.380932    M5K 1A1    ON  \n",
       "2        220 Yonge St  43.654540 -79.380677    M5B 2H1    ON  "
      ]
     },
     "execution_count": 47,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "#Delete unnecessary columns\n",
    "mall_clean_df2= mall_clean_df.drop(['cc', 'city', 'country', 'crossStreet', 'distance','formattedAddress', 'id','labeledLatLngs', 'neighborhood'], axis=1)\n",
    "mall_clean_df2.head()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 48,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "<div>\n",
       "<style scoped>\n",
       "    .dataframe tbody tr th:only-of-type {\n",
       "        vertical-align: middle;\n",
       "    }\n",
       "\n",
       "    .dataframe tbody tr th {\n",
       "        vertical-align: top;\n",
       "    }\n",
       "\n",
       "    .dataframe thead th {\n",
       "        text-align: right;\n",
       "    }\n",
       "</style>\n",
       "<table border=\"1\" class=\"dataframe\">\n",
       "  <thead>\n",
       "    <tr style=\"text-align: right;\">\n",
       "      <th></th>\n",
       "      <th>name</th>\n",
       "      <th>categories</th>\n",
       "      <th>address</th>\n",
       "      <th>lat</th>\n",
       "      <th>lng</th>\n",
       "      <th>postalCode</th>\n",
       "      <th>state</th>\n",
       "    </tr>\n",
       "  </thead>\n",
       "  <tbody>\n",
       "    <tr>\n",
       "      <td>1</td>\n",
       "      <td>CF Toronto Eaton Centre</td>\n",
       "      <td>Shopping Mall</td>\n",
       "      <td>220 Yonge St</td>\n",
       "      <td>43.654540</td>\n",
       "      <td>-79.380677</td>\n",
       "      <td>M5B 2H1</td>\n",
       "      <td>ON</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <td>2</td>\n",
       "      <td>TD Centre Shopping Concourse</td>\n",
       "      <td>Shopping Mall</td>\n",
       "      <td>66 Wellington St W</td>\n",
       "      <td>43.647184</td>\n",
       "      <td>-79.380932</td>\n",
       "      <td>M5K 1A1</td>\n",
       "      <td>ON</td>\n",
       "    </tr>\n",
       "  </tbody>\n",
       "</table>\n",
       "</div>"
      ],
      "text/plain": [
       "                           name     categories             address        lat  \\\n",
       "1       CF Toronto Eaton Centre  Shopping Mall        220 Yonge St  43.654540   \n",
       "2  TD Centre Shopping Concourse  Shopping Mall  66 Wellington St W  43.647184   \n",
       "\n",
       "         lng postalCode state  \n",
       "1 -79.380677    M5B 2H1    ON  \n",
       "2 -79.380932    M5K 1A1    ON  "
      ]
     },
     "execution_count": 49,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "#Isolate shopping mall locations by selecting where category is equal to Shopping Mall\n",
    "array= ['Shopping Mall']\n",
    "mall_df= mall_clean_df3.loc[mall_clean_df3['categories'].isin(array)]\n",
    "mall_df"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "## Visualization"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "#### Merge the University, Gym, Bar and Shopping Mall dataframes in preparation for cluster map."
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 50,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "<div>\n",
       "<style scoped>\n",
       "    .dataframe tbody tr th:only-of-type {\n",
       "        vertical-align: middle;\n",
       "    }\n",
       "\n",
       "    .dataframe tbody tr th {\n",
       "        vertical-align: top;\n",
       "    }\n",
       "\n",
       "    .dataframe thead th {\n",
       "        text-align: right;\n",
       "    }\n",
       "</style>\n",
       "<table border=\"1\" class=\"dataframe\">\n",
       "  <thead>\n",
       "    <tr style=\"text-align: right;\">\n",
       "      <th></th>\n",
       "      <th>address</th>\n",
       "      <th>categories</th>\n",
       "      <th>lat</th>\n",
       "      <th>lng</th>\n",
       "      <th>name</th>\n",
       "      <th>postalCode</th>\n",
       "      <th>state</th>\n",
       "    </tr>\n",
       "  </thead>\n",
       "  <tbody>\n",
       "    <tr>\n",
       "      <td>12</td>\n",
       "      <td>100 McCaul St</td>\n",
       "      <td>University</td>\n",
       "      <td>43.652803</td>\n",
       "      <td>-79.391074</td>\n",
       "      <td>OCAD University</td>\n",
       "      <td>M5T 1W1</td>\n",
       "      <td>ON</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <td>31</td>\n",
       "      <td>350 Victoria St.</td>\n",
       "      <td>University</td>\n",
       "      <td>43.657935</td>\n",
       "      <td>-79.380490</td>\n",
       "      <td>Ryerson University</td>\n",
       "      <td>M5B 2K3</td>\n",
       "      <td>ON</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <td>39</td>\n",
       "      <td>University Ave</td>\n",
       "      <td>University</td>\n",
       "      <td>43.654620</td>\n",
       "      <td>-79.389150</td>\n",
       "      <td>University of Toronto</td>\n",
       "      <td>M5G 1V1</td>\n",
       "      <td>ON</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <td>2</td>\n",
       "      <td>372 Bay St.</td>\n",
       "      <td>Bar</td>\n",
       "      <td>43.651187</td>\n",
       "      <td>-79.381139</td>\n",
       "      <td>Blue Stone Grill &amp; Bar</td>\n",
       "      <td>M5H 1M7</td>\n",
       "      <td>ON</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <td>4</td>\n",
       "      <td>360 Yonge St.</td>\n",
       "      <td>Bar</td>\n",
       "      <td>43.658338</td>\n",
       "      <td>-79.381902</td>\n",
       "      <td>Bar+ Karaoke Lounge</td>\n",
       "      <td>M5B 1S5</td>\n",
       "      <td>ON</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <td>5</td>\n",
       "      <td>200 Victoria St.</td>\n",
       "      <td>Bar</td>\n",
       "      <td>43.654493</td>\n",
       "      <td>-79.379000</td>\n",
       "      <td>Pantages Lounge &amp; Bar</td>\n",
       "      <td>M5B 1W8</td>\n",
       "      <td>ON</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <td>7</td>\n",
       "      <td>595 Bay St #A09</td>\n",
       "      <td>Bar</td>\n",
       "      <td>43.656562</td>\n",
       "      <td>-79.382737</td>\n",
       "      <td>St. Louis Bar &amp; Grill</td>\n",
       "      <td>M5G 2C2</td>\n",
       "      <td>ON</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <td>8</td>\n",
       "      <td>194 Queen St W</td>\n",
       "      <td>Bar</td>\n",
       "      <td>43.650505</td>\n",
       "      <td>-79.388577</td>\n",
       "      <td>The Rex Hotel Jazz &amp; Blues Bar</td>\n",
       "      <td>M5V 1Z1</td>\n",
       "      <td>ON</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <td>19</td>\n",
       "      <td>595 Bay St.,Unit A08</td>\n",
       "      <td>Bar</td>\n",
       "      <td>43.655992</td>\n",
       "      <td>-79.383463</td>\n",
       "      <td>St. Louis Bar &amp; Grill</td>\n",
       "      <td>M5G 2C2</td>\n",
       "      <td>ON</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <td>20</td>\n",
       "      <td>249 Victoria Street</td>\n",
       "      <td>Bar</td>\n",
       "      <td>43.655380</td>\n",
       "      <td>-79.379088</td>\n",
       "      <td>Bar Senator</td>\n",
       "      <td>M5B 1V8</td>\n",
       "      <td>ON</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <td>26</td>\n",
       "      <td>360 Yonge St</td>\n",
       "      <td>Bar</td>\n",
       "      <td>43.657968</td>\n",
       "      <td>-79.381907</td>\n",
       "      <td>Bar+ Karaoke</td>\n",
       "      <td>M6S 1Z9</td>\n",
       "      <td>ON</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <td>28</td>\n",
       "      <td>33 Gerrard Street West</td>\n",
       "      <td>Bar</td>\n",
       "      <td>43.658727</td>\n",
       "      <td>-79.383047</td>\n",
       "      <td>T|Bar</td>\n",
       "      <td>M5G 1Z4</td>\n",
       "      <td>ON</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <td>30</td>\n",
       "      <td>325 Bay Street</td>\n",
       "      <td>Bar</td>\n",
       "      <td>43.649800</td>\n",
       "      <td>-79.380160</td>\n",
       "      <td>Bar Adelaide</td>\n",
       "      <td>M5H</td>\n",
       "      <td>ON</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <td>34</td>\n",
       "      <td>Pusateri’s @ Saks Fith Avenue</td>\n",
       "      <td>Bar</td>\n",
       "      <td>43.652209</td>\n",
       "      <td>-79.379316</td>\n",
       "      <td>Champagne Bar</td>\n",
       "      <td>M5C 1X7</td>\n",
       "      <td>ON</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <td>35</td>\n",
       "      <td>145 Richmond St W</td>\n",
       "      <td>Bar</td>\n",
       "      <td>43.649999</td>\n",
       "      <td>-79.385607</td>\n",
       "      <td>Tundra Bar</td>\n",
       "      <td>M5H 2L2</td>\n",
       "      <td>ON</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <td>39</td>\n",
       "      <td>10 Dundas St E</td>\n",
       "      <td>Bar</td>\n",
       "      <td>43.656745</td>\n",
       "      <td>-79.380484</td>\n",
       "      <td>Shark Club Sports Bar &amp; Grill</td>\n",
       "      <td>M5B 0A1</td>\n",
       "      <td>ON</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <td>41</td>\n",
       "      <td>22 Duncan St.</td>\n",
       "      <td>Bar</td>\n",
       "      <td>43.649962</td>\n",
       "      <td>-79.386945</td>\n",
       "      <td>The Vegas Bar</td>\n",
       "      <td>M5H 3G8</td>\n",
       "      <td>ON</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <td>1</td>\n",
       "      <td>220 Yonge St</td>\n",
       "      <td>Shopping Mall</td>\n",
       "      <td>43.654540</td>\n",
       "      <td>-79.380677</td>\n",
       "      <td>CF Toronto Eaton Centre</td>\n",
       "      <td>M5B 2H1</td>\n",
       "      <td>ON</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <td>2</td>\n",
       "      <td>66 Wellington St W</td>\n",
       "      <td>Shopping Mall</td>\n",
       "      <td>43.647184</td>\n",
       "      <td>-79.380932</td>\n",
       "      <td>TD Centre Shopping Concourse</td>\n",
       "      <td>M5K 1A1</td>\n",
       "      <td>ON</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <td>0</td>\n",
       "      <td>Sheraton Centre</td>\n",
       "      <td>Gym</td>\n",
       "      <td>43.650985</td>\n",
       "      <td>-79.384002</td>\n",
       "      <td>Fitness Centre</td>\n",
       "      <td>M5H 2M9</td>\n",
       "      <td>ON</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <td>1</td>\n",
       "      <td>525 Bay St.</td>\n",
       "      <td>Gym</td>\n",
       "      <td>43.654690</td>\n",
       "      <td>-79.381739</td>\n",
       "      <td>Fitness Centre</td>\n",
       "      <td>M5G 2L2</td>\n",
       "      <td>ON</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <td>2</td>\n",
       "      <td>483 Bay St</td>\n",
       "      <td>Gym</td>\n",
       "      <td>43.653436</td>\n",
       "      <td>-79.382314</td>\n",
       "      <td>GoodLife Fitness Toronto Bell Trinity Centre</td>\n",
       "      <td>M5G 2C9</td>\n",
       "      <td>ON</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <td>4</td>\n",
       "      <td>108 Chestnut Street</td>\n",
       "      <td>Gym</td>\n",
       "      <td>43.654603</td>\n",
       "      <td>-79.386204</td>\n",
       "      <td>doubletree fitness center (Doubletree Fitness ...</td>\n",
       "      <td>M5G 1R3</td>\n",
       "      <td>ON</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <td>5</td>\n",
       "      <td>319 Merton Street</td>\n",
       "      <td>Gym</td>\n",
       "      <td>43.653944</td>\n",
       "      <td>-79.383370</td>\n",
       "      <td>Busy Bee Fitness Experts</td>\n",
       "      <td>M4S 1A5</td>\n",
       "      <td>ON</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <td>6</td>\n",
       "      <td>100 Yonge St</td>\n",
       "      <td>Gym</td>\n",
       "      <td>43.649742</td>\n",
       "      <td>-79.378537</td>\n",
       "      <td>GoodLife Fitness Toronto Plaza</td>\n",
       "      <td>M5C 2W1</td>\n",
       "      <td>ON</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <td>9</td>\n",
       "      <td>111 Richmond St W, 11F</td>\n",
       "      <td>Gym</td>\n",
       "      <td>43.650319</td>\n",
       "      <td>-79.383782</td>\n",
       "      <td>Google Toronto Fitness Centre</td>\n",
       "      <td>M5H 2G4</td>\n",
       "      <td>ON</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <td>10</td>\n",
       "      <td>21 McCaul St</td>\n",
       "      <td>Gym</td>\n",
       "      <td>43.651148</td>\n",
       "      <td>-79.389683</td>\n",
       "      <td>GoodLife Fitness Toronto McCaul and Queen</td>\n",
       "      <td>M5T 1V7</td>\n",
       "      <td>ON</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <td>11</td>\n",
       "      <td>137 Yonge St</td>\n",
       "      <td>Gym</td>\n",
       "      <td>43.651242</td>\n",
       "      <td>-79.378068</td>\n",
       "      <td>GoodLife Fitness Toronto 137 Yonge Street</td>\n",
       "      <td>M5C 1W6</td>\n",
       "      <td>ON</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <td>12</td>\n",
       "      <td>250 Yonge St</td>\n",
       "      <td>Gym</td>\n",
       "      <td>43.654196</td>\n",
       "      <td>-79.381714</td>\n",
       "      <td>Flex - Personal Training Delivered to You</td>\n",
       "      <td>M5B 2M6</td>\n",
       "      <td>ON</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <td>14</td>\n",
       "      <td>100-80 Richmond St W</td>\n",
       "      <td>Gym</td>\n",
       "      <td>43.651429</td>\n",
       "      <td>-79.382356</td>\n",
       "      <td>Medx Precision Fitness</td>\n",
       "      <td>M5H 2A4</td>\n",
       "      <td>ON</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <td>16</td>\n",
       "      <td>02 - 190 Simcoe St</td>\n",
       "      <td>Gym</td>\n",
       "      <td>43.652721</td>\n",
       "      <td>-79.381328</td>\n",
       "      <td>Great West Life Fitness Centre</td>\n",
       "      <td>M5T 3M3</td>\n",
       "      <td>ON</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <td>18</td>\n",
       "      <td>439 University Ave</td>\n",
       "      <td>Gym</td>\n",
       "      <td>43.654297</td>\n",
       "      <td>-79.387679</td>\n",
       "      <td>New Element Training</td>\n",
       "      <td>M5G 1T6 ‎</td>\n",
       "      <td>ON</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <td>23</td>\n",
       "      <td>145 Richmond St. W</td>\n",
       "      <td>Gym</td>\n",
       "      <td>43.649126</td>\n",
       "      <td>-79.385323</td>\n",
       "      <td>Hilton Precor Fitness</td>\n",
       "      <td>M5H 2L2</td>\n",
       "      <td>ON</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <td>26</td>\n",
       "      <td>32 Grange Rd</td>\n",
       "      <td>Gym</td>\n",
       "      <td>43.651920</td>\n",
       "      <td>-79.391255</td>\n",
       "      <td>grange fitness</td>\n",
       "      <td>M5T 1C3</td>\n",
       "      <td>ON</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <td>27</td>\n",
       "      <td>139 Yonge Street</td>\n",
       "      <td>Gym</td>\n",
       "      <td>43.651203</td>\n",
       "      <td>-79.378760</td>\n",
       "      <td>Goodlife Fitness</td>\n",
       "      <td>M5C</td>\n",
       "      <td>ON</td>\n",
       "    </tr>\n",
       "  </tbody>\n",
       "</table>\n",
       "</div>"
      ],
      "text/plain": [
       "                          address     categories        lat        lng  \\\n",
       "12                  100 McCaul St     University  43.652803 -79.391074   \n",
       "31               350 Victoria St.     University  43.657935 -79.380490   \n",
       "39                 University Ave     University  43.654620 -79.389150   \n",
       "2                     372 Bay St.            Bar  43.651187 -79.381139   \n",
       "4                   360 Yonge St.            Bar  43.658338 -79.381902   \n",
       "5                200 Victoria St.            Bar  43.654493 -79.379000   \n",
       "7                 595 Bay St #A09            Bar  43.656562 -79.382737   \n",
       "8                  194 Queen St W            Bar  43.650505 -79.388577   \n",
       "19           595 Bay St.,Unit A08            Bar  43.655992 -79.383463   \n",
       "20            249 Victoria Street            Bar  43.655380 -79.379088   \n",
       "26                   360 Yonge St            Bar  43.657968 -79.381907   \n",
       "28         33 Gerrard Street West            Bar  43.658727 -79.383047   \n",
       "30                 325 Bay Street            Bar  43.649800 -79.380160   \n",
       "34  Pusateri’s @ Saks Fith Avenue            Bar  43.652209 -79.379316   \n",
       "35              145 Richmond St W            Bar  43.649999 -79.385607   \n",
       "39                 10 Dundas St E            Bar  43.656745 -79.380484   \n",
       "41                  22 Duncan St.            Bar  43.649962 -79.386945   \n",
       "1                    220 Yonge St  Shopping Mall  43.654540 -79.380677   \n",
       "2              66 Wellington St W  Shopping Mall  43.647184 -79.380932   \n",
       "0                 Sheraton Centre            Gym  43.650985 -79.384002   \n",
       "1                     525 Bay St.            Gym  43.654690 -79.381739   \n",
       "2                      483 Bay St            Gym  43.653436 -79.382314   \n",
       "4             108 Chestnut Street            Gym  43.654603 -79.386204   \n",
       "5               319 Merton Street            Gym  43.653944 -79.383370   \n",
       "6                    100 Yonge St            Gym  43.649742 -79.378537   \n",
       "9          111 Richmond St W, 11F            Gym  43.650319 -79.383782   \n",
       "10                   21 McCaul St            Gym  43.651148 -79.389683   \n",
       "11                   137 Yonge St            Gym  43.651242 -79.378068   \n",
       "12                   250 Yonge St            Gym  43.654196 -79.381714   \n",
       "14           100-80 Richmond St W            Gym  43.651429 -79.382356   \n",
       "16             02 - 190 Simcoe St            Gym  43.652721 -79.381328   \n",
       "18             439 University Ave            Gym  43.654297 -79.387679   \n",
       "23             145 Richmond St. W            Gym  43.649126 -79.385323   \n",
       "26                   32 Grange Rd            Gym  43.651920 -79.391255   \n",
       "27               139 Yonge Street            Gym  43.651203 -79.378760   \n",
       "\n",
       "                                                 name postalCode state  \n",
       "12                                    OCAD University    M5T 1W1    ON  \n",
       "31                                 Ryerson University    M5B 2K3    ON  \n",
       "39                              University of Toronto    M5G 1V1    ON  \n",
       "2                              Blue Stone Grill & Bar    M5H 1M7    ON  \n",
       "4                                 Bar+ Karaoke Lounge    M5B 1S5    ON  \n",
       "5                               Pantages Lounge & Bar    M5B 1W8    ON  \n",
       "7                               St. Louis Bar & Grill    M5G 2C2    ON  \n",
       "8                      The Rex Hotel Jazz & Blues Bar    M5V 1Z1    ON  \n",
       "19                              St. Louis Bar & Grill    M5G 2C2    ON  \n",
       "20                                        Bar Senator    M5B 1V8    ON  \n",
       "26                                       Bar+ Karaoke    M6S 1Z9    ON  \n",
       "28                                              T|Bar    M5G 1Z4    ON  \n",
       "30                                       Bar Adelaide        M5H    ON  \n",
       "34                                      Champagne Bar    M5C 1X7    ON  \n",
       "35                                         Tundra Bar    M5H 2L2    ON  \n",
       "39                      Shark Club Sports Bar & Grill    M5B 0A1    ON  \n",
       "41                                      The Vegas Bar    M5H 3G8    ON  \n",
       "1                             CF Toronto Eaton Centre    M5B 2H1    ON  \n",
       "2                        TD Centre Shopping Concourse    M5K 1A1    ON  \n",
       "0                                      Fitness Centre    M5H 2M9    ON  \n",
       "1                                      Fitness Centre    M5G 2L2    ON  \n",
       "2        GoodLife Fitness Toronto Bell Trinity Centre    M5G 2C9    ON  \n",
       "4   doubletree fitness center (Doubletree Fitness ...    M5G 1R3    ON  \n",
       "5                            Busy Bee Fitness Experts    M4S 1A5    ON  \n",
       "6                      GoodLife Fitness Toronto Plaza    M5C 2W1    ON  \n",
       "9                       Google Toronto Fitness Centre    M5H 2G4    ON  \n",
       "10          GoodLife Fitness Toronto McCaul and Queen    M5T 1V7    ON  \n",
       "11          GoodLife Fitness Toronto 137 Yonge Street    M5C 1W6    ON  \n",
       "12          Flex - Personal Training Delivered to You    M5B 2M6    ON  \n",
       "14                             Medx Precision Fitness    M5H 2A4    ON  \n",
       "16                     Great West Life Fitness Centre    M5T 3M3    ON  \n",
       "18                               New Element Training  M5G 1T6 ‎    ON  \n",
       "23                              Hilton Precor Fitness    M5H 2L2    ON  \n",
       "26                                     grange fitness    M5T 1C3    ON  \n",
       "27                                   Goodlife Fitness        M5C    ON  "
      ]
     },
     "execution_count": 51,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "#Create new dataframe of universities, gyms, bars and shopping malls\n",
    "frames = [topuni_df, bar_df, mall_df, gym_df]\n",
    "NextGen_df = pd.concat(frames, sort=True)\n",
    "NextGen_df"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "#### Create Cluster Map"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 52,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "<div style=\"width:100%;\"><div style=\"position:relative;width:100%;height:0;padding-bottom:60%;\"><iframe src=\"about:blank\" style=\"position:absolute;width:100%;height:100%;left:0;top:0;border:none !important;\" data-html=PCFET0NUWVBFIGh0bWw+CjxoZWFkPiAgICAKICAgIDxtZXRhIGh0dHAtZXF1aXY9ImNvbnRlbnQtdHlwZSIgY29udGVudD0idGV4dC9odG1sOyBjaGFyc2V0PVVURi04IiAvPgogICAgPHNjcmlwdD5MX1BSRUZFUl9DQU5WQVMgPSBmYWxzZTsgTF9OT19UT1VDSCA9IGZhbHNlOyBMX0RJU0FCTEVfM0QgPSBmYWxzZTs8L3NjcmlwdD4KICAgIDxzY3JpcHQgc3JjPSJodHRwczovL2Nkbi5qc2RlbGl2ci5uZXQvbnBtL2xlYWZsZXRAMS4yLjAvZGlzdC9sZWFmbGV0LmpzIj48L3NjcmlwdD4KICAgIDxzY3JpcHQgc3JjPSJodHRwczovL2FqYXguZ29vZ2xlYXBpcy5jb20vYWpheC9saWJzL2pxdWVyeS8xLjExLjEvanF1ZXJ5Lm1pbi5qcyI+PC9zY3JpcHQ+CiAgICA8c2NyaXB0IHNyYz0iaHR0cHM6Ly9tYXhjZG4uYm9vdHN0cmFwY2RuLmNvbS9ib290c3RyYXAvMy4yLjAvanMvYm9vdHN0cmFwLm1pbi5qcyI+PC9zY3JpcHQ+CiAgICA8c2NyaXB0IHNyYz0iaHR0cHM6Ly9jZG5qcy5jbG91ZGZsYXJlLmNvbS9hamF4L2xpYnMvTGVhZmxldC5hd2Vzb21lLW1hcmtlcnMvMi4wLjIvbGVhZmxldC5hd2Vzb21lLW1hcmtlcnMuanMiPjwvc2NyaXB0PgogICAgPGxpbmsgcmVsPSJzdHlsZXNoZWV0IiBocmVmPSJodHRwczovL2Nkbi5qc2RlbGl2ci5uZXQvbnBtL2xlYWZsZXRAMS4yLjAvZGlzdC9sZWFmbGV0LmNzcyIvPgogICAgPGxpbmsgcmVsPSJzdHlsZXNoZWV0IiBocmVmPSJodHRwczovL21heGNkbi5ib290c3RyYXBjZG4uY29tL2Jvb3RzdHJhcC8zLjIuMC9jc3MvYm9vdHN0cmFwLm1pbi5jc3MiLz4KICAgIDxsaW5rIHJlbD0ic3R5bGVzaGVldCIgaHJlZj0iaHR0cHM6Ly9tYXhjZG4uYm9vdHN0cmFwY2RuLmNvbS9ib290c3RyYXAvMy4yLjAvY3NzL2Jvb3RzdHJhcC10aGVtZS5taW4uY3NzIi8+CiAgICA8bGluayByZWw9InN0eWxlc2hlZXQiIGhyZWY9Imh0dHBzOi8vbWF4Y2RuLmJvb3RzdHJhcGNkbi5jb20vZm9udC1hd2Vzb21lLzQuNi4zL2Nzcy9mb250LWF3ZXNvbWUubWluLmNzcyIvPgogICAgPGxpbmsgcmVsPSJzdHlsZXNoZWV0IiBocmVmPSJodHRwczovL2NkbmpzLmNsb3VkZmxhcmUuY29tL2FqYXgvbGlicy9MZWFmbGV0LmF3ZXNvbWUtbWFya2Vycy8yLjAuMi9sZWFmbGV0LmF3ZXNvbWUtbWFya2Vycy5jc3MiLz4KICAgIDxsaW5rIHJlbD0ic3R5bGVzaGVldCIgaHJlZj0iaHR0cHM6Ly9yYXdnaXQuY29tL3B5dGhvbi12aXN1YWxpemF0aW9uL2ZvbGl1bS9tYXN0ZXIvZm9saXVtL3RlbXBsYXRlcy9sZWFmbGV0LmF3ZXNvbWUucm90YXRlLmNzcyIvPgogICAgPHN0eWxlPmh0bWwsIGJvZHkge3dpZHRoOiAxMDAlO2hlaWdodDogMTAwJTttYXJnaW46IDA7cGFkZGluZzogMDt9PC9zdHlsZT4KICAgIDxzdHlsZT4jbWFwIHtwb3NpdGlvbjphYnNvbHV0ZTt0b3A6MDtib3R0b206MDtyaWdodDowO2xlZnQ6MDt9PC9zdHlsZT4KICAgIAogICAgICAgICAgICA8c3R5bGU+ICNtYXBfNDdlMzQ4OTliZWI2NDNiZGE3YTRiYmE5MGM4NDkzZDggewogICAgICAgICAgICAgICAgcG9zaXRpb24gOiByZWxhdGl2ZTsKICAgICAgICAgICAgICAgIHdpZHRoIDogMTAwLjAlOwogICAgICAgICAgICAgICAgaGVpZ2h0OiAxMDAuMCU7CiAgICAgICAgICAgICAgICBsZWZ0OiAwLjAlOwogICAgICAgICAgICAgICAgdG9wOiAwLjAlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICA8L3N0eWxlPgogICAgICAgIAo8L2hlYWQ+Cjxib2R5PiAgICAKICAgIAogICAgICAgICAgICA8ZGl2IGNsYXNzPSJmb2xpdW0tbWFwIiBpZD0ibWFwXzQ3ZTM0ODk5YmViNjQzYmRhN2E0YmJhOTBjODQ5M2Q4IiA+PC9kaXY+CiAgICAgICAgCjwvYm9keT4KPHNjcmlwdD4gICAgCiAgICAKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGJvdW5kcyA9IG51bGw7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgdmFyIG1hcF80N2UzNDg5OWJlYjY0M2JkYTdhNGJiYTkwYzg0OTNkOCA9IEwubWFwKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ21hcF80N2UzNDg5OWJlYjY0M2JkYTdhNGJiYTkwYzg0OTNkOCcsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7Y2VudGVyOiBbNDMuNjUzNDgxNywtNzkuMzgzOTM0N10sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB6b29tOiAxMywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1heEJvdW5kczogYm91bmRzLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGF5ZXJzOiBbXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdvcmxkQ29weUp1bXA6IGZhbHNlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3JzOiBMLkNSUy5FUFNHMzg1NwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHRpbGVfbGF5ZXJfNzBiYWJlMzg4MGQ3NDNjNjk4MGUzNTI4NzFlYjI3MDIgPSBMLnRpbGVMYXllcigKICAgICAgICAgICAgICAgICdodHRwczovL3tzfS50aWxlLm9wZW5zdHJlZXRtYXAub3JnL3t6fS97eH0ve3l9LnBuZycsCiAgICAgICAgICAgICAgICB7CiAgImF0dHJpYnV0aW9uIjogbnVsbCwKICAiZGV0ZWN0UmV0aW5hIjogZmFsc2UsCiAgIm1heFpvb20iOiAxOCwKICAibWluWm9vbSI6IDEsCiAgIm5vV3JhcCI6IGZhbHNlLAogICJzdWJkb21haW5zIjogImFiYyIKfQogICAgICAgICAgICAgICAgKS5hZGRUbyhtYXBfNDdlMzQ4OTliZWI2NDNiZGE3YTRiYmE5MGM4NDkzZDgpOwogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyX2UxNGE2OGYyMzI3MzRiNDc4NGRjN2IwYzA1NzMwNTYyID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbNDMuNjUyODAyNTExNzEwMTMsLTc5LjM5MTA3NDM2OTk5OTJdLAogICAgICAgICAgICAgICAgewogICJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwKICAiY29sb3IiOiAiQ3lhbiIsCiAgImRhc2hBcnJheSI6IG51bGwsCiAgImRhc2hPZmZzZXQiOiBudWxsLAogICJmaWxsIjogdHJ1ZSwKICAiZmlsbENvbG9yIjogIkN5YW4iLAogICJmaWxsT3BhY2l0eSI6IDAuNywKICAiZmlsbFJ1bGUiOiAiZXZlbm9kZCIsCiAgImxpbmVDYXAiOiAicm91bmQiLAogICJsaW5lSm9pbiI6ICJyb3VuZCIsCiAgIm9wYWNpdHkiOiAxLjAsCiAgInJhZGl1cyI6IDUsCiAgInN0cm9rZSI6IHRydWUsCiAgIndlaWdodCI6IDMKfQogICAgICAgICAgICAgICAgKS5hZGRUbyhtYXBfNDdlMzQ4OTliZWI2NDNiZGE3YTRiYmE5MGM4NDkzZDgpOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfMGU4YjUzNjZkZjU2NGNiMmJkYTU3MzQ3NDcyOTBkZmEgPSBMLnBvcHVwKHttYXhXaWR0aDogJzMwMCd9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfNWU5ZGEyNTA2NWVmNDU5MGI1MGM5ZGFjNjMxNGUzOWUgPSAkKCc8ZGl2IGlkPSJodG1sXzVlOWRhMjUwNjVlZjQ1OTBiNTBjOWRhYzYzMTRlMzllIiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5Vbml2ZXJzaXR5IENsdXN0ZXIgMTAwIE1jQ2F1bCBTdDwvZGl2PicpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfMGU4YjUzNjZkZjU2NGNiMmJkYTU3MzQ3NDcyOTBkZmEuc2V0Q29udGVudChodG1sXzVlOWRhMjUwNjVlZjQ1OTBiNTBjOWRhYzYzMTRlMzllKTsKICAgICAgICAgICAgCgogICAgICAgICAgICBjaXJjbGVfbWFya2VyX2UxNGE2OGYyMzI3MzRiNDc4NGRjN2IwYzA1NzMwNTYyLmJpbmRQb3B1cChwb3B1cF8wZThiNTM2NmRmNTY0Y2IyYmRhNTczNDc0NzI5MGRmYSk7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl80OTI0OTFiMzdkZDg0MTc4ODNjMzI3Mzc2ZGY1N2NmZSA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWzQzLjY1NzkzNTA0ODI2MjU0LC03OS4zODA0OTA0MzQ0MzI1Ml0sCiAgICAgICAgICAgICAgICB7CiAgImJ1YmJsaW5nTW91c2VFdmVudHMiOiB0cnVlLAogICJjb2xvciI6ICJDeWFuIiwKICAiZGFzaEFycmF5IjogbnVsbCwKICAiZGFzaE9mZnNldCI6IG51bGwsCiAgImZpbGwiOiB0cnVlLAogICJmaWxsQ29sb3IiOiAiQ3lhbiIsCiAgImZpbGxPcGFjaXR5IjogMC43LAogICJmaWxsUnVsZSI6ICJldmVub2RkIiwKICAibGluZUNhcCI6ICJyb3VuZCIsCiAgImxpbmVKb2luIjogInJvdW5kIiwKICAib3BhY2l0eSI6IDEuMCwKICAicmFkaXVzIjogNSwKICAic3Ryb2tlIjogdHJ1ZSwKICAid2VpZ2h0IjogMwp9CiAgICAgICAgICAgICAgICApLmFkZFRvKG1hcF80N2UzNDg5OWJlYjY0M2JkYTdhNGJiYTkwYzg0OTNkOCk7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF85NTBlODAzZmMyZTI0Mjc5YWZlNzMyZjc2Yjg1OWU5MCA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF80YjNmYzA0OGU0MjU0YjNhOWE2Mjg5MWJhODYxOWYyOCA9ICQoJzxkaXYgaWQ9Imh0bWxfNGIzZmMwNDhlNDI1NGIzYTlhNjI4OTFiYTg2MTlmMjgiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPlVuaXZlcnNpdHkgQ2x1c3RlciAzNTAgVmljdG9yaWEgU3QuPC9kaXY+JylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF85NTBlODAzZmMyZTI0Mjc5YWZlNzMyZjc2Yjg1OWU5MC5zZXRDb250ZW50KGh0bWxfNGIzZmMwNDhlNDI1NGIzYTlhNjI4OTFiYTg2MTlmMjgpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIGNpcmNsZV9tYXJrZXJfNDkyNDkxYjM3ZGQ4NDE3ODgzYzMyNzM3NmRmNTdjZmUuYmluZFBvcHVwKHBvcHVwXzk1MGU4MDNmYzJlMjQyNzlhZmU3MzJmNzZiODU5ZTkwKTsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyX2Q5ZTViYTRlYTQwNjRlNTFhZjU1OGEwNWRkNjlhYjRlID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbNDMuNjU0NjIsLTc5LjM4OTE1XSwKICAgICAgICAgICAgICAgIHsKICAiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsCiAgImNvbG9yIjogIkN5YW4iLAogICJkYXNoQXJyYXkiOiBudWxsLAogICJkYXNoT2Zmc2V0IjogbnVsbCwKICAiZmlsbCI6IHRydWUsCiAgImZpbGxDb2xvciI6ICJDeWFuIiwKICAiZmlsbE9wYWNpdHkiOiAwLjcsCiAgImZpbGxSdWxlIjogImV2ZW5vZGQiLAogICJsaW5lQ2FwIjogInJvdW5kIiwKICAibGluZUpvaW4iOiAicm91bmQiLAogICJvcGFjaXR5IjogMS4wLAogICJyYWRpdXMiOiA1LAogICJzdHJva2UiOiB0cnVlLAogICJ3ZWlnaHQiOiAzCn0KICAgICAgICAgICAgICAgICkuYWRkVG8obWFwXzQ3ZTM0ODk5YmViNjQzYmRhN2E0YmJhOTBjODQ5M2Q4KTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwXzQxODg4NGJjNDU2ZTQwMjc5NzA1NmI0OTUyNTc2Mjg5ID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sXzZkZTlmNWIyMTk4MTQxYTk4NDhmYmUxZDBmNGE5OTc0ID0gJCgnPGRpdiBpZD0iaHRtbF82ZGU5ZjViMjE5ODE0MWE5ODQ4ZmJlMWQwZjRhOTk3NCIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+VW5pdmVyc2l0eSBDbHVzdGVyIFVuaXZlcnNpdHkgQXZlPC9kaXY+JylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF80MTg4ODRiYzQ1NmU0MDI3OTcwNTZiNDk1MjU3NjI4OS5zZXRDb250ZW50KGh0bWxfNmRlOWY1YjIxOTgxNDFhOTg0OGZiZTFkMGY0YTk5NzQpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIGNpcmNsZV9tYXJrZXJfZDllNWJhNGVhNDA2NGU1MWFmNTU4YTA1ZGQ2OWFiNGUuYmluZFBvcHVwKHBvcHVwXzQxODg4NGJjNDU2ZTQwMjc5NzA1NmI0OTUyNTc2Mjg5KTsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyXzVmNWM0OTMzNmVkYzQ1NzI4ZTlkNGY4M2ExNTVlNzc4ID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbNDMuNjUxMTg3MTMzMzAxNDgsLTc5LjM4MTEzOTI1NjE1MjM3XSwKICAgICAgICAgICAgICAgIHsKICAiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsCiAgImNvbG9yIjogIkZ1Y2hzaWEiLAogICJkYXNoQXJyYXkiOiBudWxsLAogICJkYXNoT2Zmc2V0IjogbnVsbCwKICAiZmlsbCI6IHRydWUsCiAgImZpbGxDb2xvciI6ICJGdWNoc2lhIiwKICAiZmlsbE9wYWNpdHkiOiAwLjcsCiAgImZpbGxSdWxlIjogImV2ZW5vZGQiLAogICJsaW5lQ2FwIjogInJvdW5kIiwKICAibGluZUpvaW4iOiAicm91bmQiLAogICJvcGFjaXR5IjogMS4wLAogICJyYWRpdXMiOiA1LAogICJzdHJva2UiOiB0cnVlLAogICJ3ZWlnaHQiOiAzCn0KICAgICAgICAgICAgICAgICkuYWRkVG8obWFwXzQ3ZTM0ODk5YmViNjQzYmRhN2E0YmJhOTBjODQ5M2Q4KTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwXzdiM2U0ODUyN2RiNTQ3NThhMzE0Y2RmOTJiOWYyZWY5ID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sX2FlMGViYzk1ODZlZjQwMDdhMmYwMDI1MGE4MTNiNGRlID0gJCgnPGRpdiBpZD0iaHRtbF9hZTBlYmM5NTg2ZWY0MDA3YTJmMDAyNTBhODEzYjRkZSIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+QmFyIENsdXN0ZXIgMzcyIEJheSBTdC48L2Rpdj4nKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwXzdiM2U0ODUyN2RiNTQ3NThhMzE0Y2RmOTJiOWYyZWY5LnNldENvbnRlbnQoaHRtbF9hZTBlYmM5NTg2ZWY0MDA3YTJmMDAyNTBhODEzYjRkZSk7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgY2lyY2xlX21hcmtlcl81ZjVjNDkzMzZlZGM0NTcyOGU5ZDRmODNhMTU1ZTc3OC5iaW5kUG9wdXAocG9wdXBfN2IzZTQ4NTI3ZGI1NDc1OGEzMTRjZGY5MmI5ZjJlZjkpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGNpcmNsZV9tYXJrZXJfNzUwY2YyMTY2ZGJmNDU3ODkwNzVlYzNkODE3NTM0NTkgPSBMLmNpcmNsZU1hcmtlcigKICAgICAgICAgICAgICAgIFs0My42NTgzMzgxNTEyNTg4OCwtNzkuMzgxOTAyMDU0NzU1NDRdLAogICAgICAgICAgICAgICAgewogICJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwKICAiY29sb3IiOiAiRnVjaHNpYSIsCiAgImRhc2hBcnJheSI6IG51bGwsCiAgImRhc2hPZmZzZXQiOiBudWxsLAogICJmaWxsIjogdHJ1ZSwKICAiZmlsbENvbG9yIjogIkZ1Y2hzaWEiLAogICJmaWxsT3BhY2l0eSI6IDAuNywKICAiZmlsbFJ1bGUiOiAiZXZlbm9kZCIsCiAgImxpbmVDYXAiOiAicm91bmQiLAogICJsaW5lSm9pbiI6ICJyb3VuZCIsCiAgIm9wYWNpdHkiOiAxLjAsCiAgInJhZGl1cyI6IDUsCiAgInN0cm9rZSI6IHRydWUsCiAgIndlaWdodCI6IDMKfQogICAgICAgICAgICAgICAgKS5hZGRUbyhtYXBfNDdlMzQ4OTliZWI2NDNiZGE3YTRiYmE5MGM4NDkzZDgpOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfOTI3NmY0ZWRiOWVhNDcwMzkzZjYwODAyOTY3OTE3OWMgPSBMLnBvcHVwKHttYXhXaWR0aDogJzMwMCd9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfMjE0NTZmNWJhMzQ4NGM5ZDkxY2M0YWI3YmU3ZjMyODcgPSAkKCc8ZGl2IGlkPSJodG1sXzIxNDU2ZjViYTM0ODRjOWQ5MWNjNGFiN2JlN2YzMjg3IiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5CYXIgQ2x1c3RlciAzNjAgWW9uZ2UgU3QuPC9kaXY+JylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF85Mjc2ZjRlZGI5ZWE0NzAzOTNmNjA4MDI5Njc5MTc5Yy5zZXRDb250ZW50KGh0bWxfMjE0NTZmNWJhMzQ4NGM5ZDkxY2M0YWI3YmU3ZjMyODcpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIGNpcmNsZV9tYXJrZXJfNzUwY2YyMTY2ZGJmNDU3ODkwNzVlYzNkODE3NTM0NTkuYmluZFBvcHVwKHBvcHVwXzkyNzZmNGVkYjllYTQ3MDM5M2Y2MDgwMjk2NzkxNzljKTsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyXzk2ODI2NmY0ZjIzMTQ2MDdiNmMxNTAyMGUxYzUwZTY3ID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbNDMuNjU0NDkzNDMxMjY5NTY0LC03OS4zNzg5OTk2MDA0MTA1XSwKICAgICAgICAgICAgICAgIHsKICAiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsCiAgImNvbG9yIjogIkZ1Y2hzaWEiLAogICJkYXNoQXJyYXkiOiBudWxsLAogICJkYXNoT2Zmc2V0IjogbnVsbCwKICAiZmlsbCI6IHRydWUsCiAgImZpbGxDb2xvciI6ICJGdWNoc2lhIiwKICAiZmlsbE9wYWNpdHkiOiAwLjcsCiAgImZpbGxSdWxlIjogImV2ZW5vZGQiLAogICJsaW5lQ2FwIjogInJvdW5kIiwKICAibGluZUpvaW4iOiAicm91bmQiLAogICJvcGFjaXR5IjogMS4wLAogICJyYWRpdXMiOiA1LAogICJzdHJva2UiOiB0cnVlLAogICJ3ZWlnaHQiOiAzCn0KICAgICAgICAgICAgICAgICkuYWRkVG8obWFwXzQ3ZTM0ODk5YmViNjQzYmRhN2E0YmJhOTBjODQ5M2Q4KTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwX2NiNjY0MDZkM2E2YjRlYzZhNjY0NGVjNDUyNDU3MjJmID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sX2I3NjI0MGVmMDgyMTQ2OTlhZjg2YjQ1NGY2NDgzZDg0ID0gJCgnPGRpdiBpZD0iaHRtbF9iNzYyNDBlZjA4MjE0Njk5YWY4NmI0NTRmNjQ4M2Q4NCIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+QmFyIENsdXN0ZXIgMjAwIFZpY3RvcmlhIFN0LjwvZGl2PicpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfY2I2NjQwNmQzYTZiNGVjNmE2NjQ0ZWM0NTI0NTcyMmYuc2V0Q29udGVudChodG1sX2I3NjI0MGVmMDgyMTQ2OTlhZjg2YjQ1NGY2NDgzZDg0KTsKICAgICAgICAgICAgCgogICAgICAgICAgICBjaXJjbGVfbWFya2VyXzk2ODI2NmY0ZjIzMTQ2MDdiNmMxNTAyMGUxYzUwZTY3LmJpbmRQb3B1cChwb3B1cF9jYjY2NDA2ZDNhNmI0ZWM2YTY2NDRlYzQ1MjQ1NzIyZik7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl8yNTIzNDBlZWVhMjM0MzNmYWI4ZWU4OTUyMTdjYTZlNyA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWzQzLjY1NjU2MjA5MDQ1Njk0LC03OS4zODI3MzY2NDAwNjIzOF0sCiAgICAgICAgICAgICAgICB7CiAgImJ1YmJsaW5nTW91c2VFdmVudHMiOiB0cnVlLAogICJjb2xvciI6ICJGdWNoc2lhIiwKICAiZGFzaEFycmF5IjogbnVsbCwKICAiZGFzaE9mZnNldCI6IG51bGwsCiAgImZpbGwiOiB0cnVlLAogICJmaWxsQ29sb3IiOiAiRnVjaHNpYSIsCiAgImZpbGxPcGFjaXR5IjogMC43LAogICJmaWxsUnVsZSI6ICJldmVub2RkIiwKICAibGluZUNhcCI6ICJyb3VuZCIsCiAgImxpbmVKb2luIjogInJvdW5kIiwKICAib3BhY2l0eSI6IDEuMCwKICAicmFkaXVzIjogNSwKICAic3Ryb2tlIjogdHJ1ZSwKICAid2VpZ2h0IjogMwp9CiAgICAgICAgICAgICAgICApLmFkZFRvKG1hcF80N2UzNDg5OWJlYjY0M2JkYTdhNGJiYTkwYzg0OTNkOCk7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF9kOTM3YjI0NWNlM2U0Njk4YmI4ZGY3YzljNjEyOTFlYyA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF8wOGM1ZWEwYzA4ZDM0NzIzYmQ4NDNlNDk3MTAwZmQ4NCA9ICQoJzxkaXYgaWQ9Imh0bWxfMDhjNWVhMGMwOGQzNDcyM2JkODQzZTQ5NzEwMGZkODQiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPkJhciBDbHVzdGVyIDU5NSBCYXkgU3QgI0EwOTwvZGl2PicpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfZDkzN2IyNDVjZTNlNDY5OGJiOGRmN2M5YzYxMjkxZWMuc2V0Q29udGVudChodG1sXzA4YzVlYTBjMDhkMzQ3MjNiZDg0M2U0OTcxMDBmZDg0KTsKICAgICAgICAgICAgCgogICAgICAgICAgICBjaXJjbGVfbWFya2VyXzI1MjM0MGVlZWEyMzQzM2ZhYjhlZTg5NTIxN2NhNmU3LmJpbmRQb3B1cChwb3B1cF9kOTM3YjI0NWNlM2U0Njk4YmI4ZGY3YzljNjEyOTFlYyk7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl80YTg1NTU0YWE4NmE0Yzk5YjY3NzNmNjNkMmQ4MTIyNyA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWzQzLjY1MDUwNDc1NTQ0MDA1LC03OS4zODg1NzcyMzM4OTg5N10sCiAgICAgICAgICAgICAgICB7CiAgImJ1YmJsaW5nTW91c2VFdmVudHMiOiB0cnVlLAogICJjb2xvciI6ICJGdWNoc2lhIiwKICAiZGFzaEFycmF5IjogbnVsbCwKICAiZGFzaE9mZnNldCI6IG51bGwsCiAgImZpbGwiOiB0cnVlLAogICJmaWxsQ29sb3IiOiAiRnVjaHNpYSIsCiAgImZpbGxPcGFjaXR5IjogMC43LAogICJmaWxsUnVsZSI6ICJldmVub2RkIiwKICAibGluZUNhcCI6ICJyb3VuZCIsCiAgImxpbmVKb2luIjogInJvdW5kIiwKICAib3BhY2l0eSI6IDEuMCwKICAicmFkaXVzIjogNSwKICAic3Ryb2tlIjogdHJ1ZSwKICAid2VpZ2h0IjogMwp9CiAgICAgICAgICAgICAgICApLmFkZFRvKG1hcF80N2UzNDg5OWJlYjY0M2JkYTdhNGJiYTkwYzg0OTNkOCk7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF81MjdlMjNkMDU3YTk0YjI3YjFhN2JlNjNhZThmZmIxOSA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF84ZWMzNDYxMjEyY2U0OWI4ODMyMGExOWI3NGJjMzEyMCA9ICQoJzxkaXYgaWQ9Imh0bWxfOGVjMzQ2MTIxMmNlNDliODgzMjBhMTliNzRiYzMxMjAiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPkJhciBDbHVzdGVyIDE5NCBRdWVlbiBTdCBXPC9kaXY+JylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF81MjdlMjNkMDU3YTk0YjI3YjFhN2JlNjNhZThmZmIxOS5zZXRDb250ZW50KGh0bWxfOGVjMzQ2MTIxMmNlNDliODgzMjBhMTliNzRiYzMxMjApOwogICAgICAgICAgICAKCiAgICAgICAgICAgIGNpcmNsZV9tYXJrZXJfNGE4NTU1NGFhODZhNGM5OWI2NzczZjYzZDJkODEyMjcuYmluZFBvcHVwKHBvcHVwXzUyN2UyM2QwNTdhOTRiMjdiMWE3YmU2M2FlOGZmYjE5KTsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyXzQ1NDJjYTI4YjQ2NzQyMDI5NTY1YzA4NjQ3ZmU1ZDU2ID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbNDMuNjU1OTkyMiwtNzkuMzgzNDYyOTk5OTk5OTldLAogICAgICAgICAgICAgICAgewogICJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwKICAiY29sb3IiOiAiRnVjaHNpYSIsCiAgImRhc2hBcnJheSI6IG51bGwsCiAgImRhc2hPZmZzZXQiOiBudWxsLAogICJmaWxsIjogdHJ1ZSwKICAiZmlsbENvbG9yIjogIkZ1Y2hzaWEiLAogICJmaWxsT3BhY2l0eSI6IDAuNywKICAiZmlsbFJ1bGUiOiAiZXZlbm9kZCIsCiAgImxpbmVDYXAiOiAicm91bmQiLAogICJsaW5lSm9pbiI6ICJyb3VuZCIsCiAgIm9wYWNpdHkiOiAxLjAsCiAgInJhZGl1cyI6IDUsCiAgInN0cm9rZSI6IHRydWUsCiAgIndlaWdodCI6IDMKfQogICAgICAgICAgICAgICAgKS5hZGRUbyhtYXBfNDdlMzQ4OTliZWI2NDNiZGE3YTRiYmE5MGM4NDkzZDgpOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfMGExYWUwYzQ5NGRiNGM4MmE5NjBjZjY3NjYwYzU2OTcgPSBMLnBvcHVwKHttYXhXaWR0aDogJzMwMCd9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfZTZhZjNkMTMzM2RkNDg4OWE4NTU1MjllOWRmNzczMzMgPSAkKCc8ZGl2IGlkPSJodG1sX2U2YWYzZDEzMzNkZDQ4ODlhODU1NTI5ZTlkZjc3MzMzIiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5CYXIgQ2x1c3RlciA1OTUgQmF5IFN0LixVbml0IEEwODwvZGl2PicpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfMGExYWUwYzQ5NGRiNGM4MmE5NjBjZjY3NjYwYzU2OTcuc2V0Q29udGVudChodG1sX2U2YWYzZDEzMzNkZDQ4ODlhODU1NTI5ZTlkZjc3MzMzKTsKICAgICAgICAgICAgCgogICAgICAgICAgICBjaXJjbGVfbWFya2VyXzQ1NDJjYTI4YjQ2NzQyMDI5NTY1YzA4NjQ3ZmU1ZDU2LmJpbmRQb3B1cChwb3B1cF8wYTFhZTBjNDk0ZGI0YzgyYTk2MGNmNjc2NjBjNTY5Nyk7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl9mN2ZmOWUzZjVjMTk0NzVhYTUyNDUwYjRmZDNhNGJkNSA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWzQzLjY1NTM4MDM1Nzg5NDE1LC03OS4zNzkwODgzMDQxNzE1M10sCiAgICAgICAgICAgICAgICB7CiAgImJ1YmJsaW5nTW91c2VFdmVudHMiOiB0cnVlLAogICJjb2xvciI6ICJGdWNoc2lhIiwKICAiZGFzaEFycmF5IjogbnVsbCwKICAiZGFzaE9mZnNldCI6IG51bGwsCiAgImZpbGwiOiB0cnVlLAogICJmaWxsQ29sb3IiOiAiRnVjaHNpYSIsCiAgImZpbGxPcGFjaXR5IjogMC43LAogICJmaWxsUnVsZSI6ICJldmVub2RkIiwKICAibGluZUNhcCI6ICJyb3VuZCIsCiAgImxpbmVKb2luIjogInJvdW5kIiwKICAib3BhY2l0eSI6IDEuMCwKICAicmFkaXVzIjogNSwKICAic3Ryb2tlIjogdHJ1ZSwKICAid2VpZ2h0IjogMwp9CiAgICAgICAgICAgICAgICApLmFkZFRvKG1hcF80N2UzNDg5OWJlYjY0M2JkYTdhNGJiYTkwYzg0OTNkOCk7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF85MDU5MmU1YjhiN2I0NmYwODcyYmZlZmU5NmY5NjA5NSA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF8zYTYyZDMyZjAxMzc0YjBmYjIxM2EwNThlMzE0NDY3YyA9ICQoJzxkaXYgaWQ9Imh0bWxfM2E2MmQzMmYwMTM3NGIwZmIyMTNhMDU4ZTMxNDQ2N2MiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPkJhciBDbHVzdGVyIDI0OSBWaWN0b3JpYSBTdHJlZXQ8L2Rpdj4nKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwXzkwNTkyZTViOGI3YjQ2ZjA4NzJiZmVmZTk2Zjk2MDk1LnNldENvbnRlbnQoaHRtbF8zYTYyZDMyZjAxMzc0YjBmYjIxM2EwNThlMzE0NDY3Yyk7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgY2lyY2xlX21hcmtlcl9mN2ZmOWUzZjVjMTk0NzVhYTUyNDUwYjRmZDNhNGJkNS5iaW5kUG9wdXAocG9wdXBfOTA1OTJlNWI4YjdiNDZmMDg3MmJmZWZlOTZmOTYwOTUpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGNpcmNsZV9tYXJrZXJfNmRiYjhhNzE3NTI5NGJjNjk1Y2FhMjk3YWM5NzZiMzggPSBMLmNpcmNsZU1hcmtlcigKICAgICAgICAgICAgICAgIFs0My42NTc5NjgwNzQ2OTI1MSwtNzkuMzgxOTA2OTg2MjM2NTZdLAogICAgICAgICAgICAgICAgewogICJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwKICAiY29sb3IiOiAiRnVjaHNpYSIsCiAgImRhc2hBcnJheSI6IG51bGwsCiAgImRhc2hPZmZzZXQiOiBudWxsLAogICJmaWxsIjogdHJ1ZSwKICAiZmlsbENvbG9yIjogIkZ1Y2hzaWEiLAogICJmaWxsT3BhY2l0eSI6IDAuNywKICAiZmlsbFJ1bGUiOiAiZXZlbm9kZCIsCiAgImxpbmVDYXAiOiAicm91bmQiLAogICJsaW5lSm9pbiI6ICJyb3VuZCIsCiAgIm9wYWNpdHkiOiAxLjAsCiAgInJhZGl1cyI6IDUsCiAgInN0cm9rZSI6IHRydWUsCiAgIndlaWdodCI6IDMKfQogICAgICAgICAgICAgICAgKS5hZGRUbyhtYXBfNDdlMzQ4OTliZWI2NDNiZGE3YTRiYmE5MGM4NDkzZDgpOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfNDAyNDViMDVmMjhhNGEwOGI3N2U0ZWVhYTM5ODM3MWUgPSBMLnBvcHVwKHttYXhXaWR0aDogJzMwMCd9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfYzI5MzMwNTlkMzcwNDQ5N2JlNDA1OTU0NjZjOGQ4NzUgPSAkKCc8ZGl2IGlkPSJodG1sX2MyOTMzMDU5ZDM3MDQ0OTdiZTQwNTk1NDY2YzhkODc1IiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5CYXIgQ2x1c3RlciAzNjAgWW9uZ2UgU3Q8L2Rpdj4nKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwXzQwMjQ1YjA1ZjI4YTRhMDhiNzdlNGVlYWEzOTgzNzFlLnNldENvbnRlbnQoaHRtbF9jMjkzMzA1OWQzNzA0NDk3YmU0MDU5NTQ2NmM4ZDg3NSk7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgY2lyY2xlX21hcmtlcl82ZGJiOGE3MTc1Mjk0YmM2OTVjYWEyOTdhYzk3NmIzOC5iaW5kUG9wdXAocG9wdXBfNDAyNDViMDVmMjhhNGEwOGI3N2U0ZWVhYTM5ODM3MWUpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGNpcmNsZV9tYXJrZXJfNzc0NWVmNGFmZWYyNDRiOTkxZGVjMmZjZGQ1MmFmMjAgPSBMLmNpcmNsZU1hcmtlcigKICAgICAgICAgICAgICAgIFs0My42NTg3MjcwMDAwMDAwMDYsLTc5LjM4MzA0NzQ0OTA3Mzc5XSwKICAgICAgICAgICAgICAgIHsKICAiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsCiAgImNvbG9yIjogIkZ1Y2hzaWEiLAogICJkYXNoQXJyYXkiOiBudWxsLAogICJkYXNoT2Zmc2V0IjogbnVsbCwKICAiZmlsbCI6IHRydWUsCiAgImZpbGxDb2xvciI6ICJGdWNoc2lhIiwKICAiZmlsbE9wYWNpdHkiOiAwLjcsCiAgImZpbGxSdWxlIjogImV2ZW5vZGQiLAogICJsaW5lQ2FwIjogInJvdW5kIiwKICAibGluZUpvaW4iOiAicm91bmQiLAogICJvcGFjaXR5IjogMS4wLAogICJyYWRpdXMiOiA1LAogICJzdHJva2UiOiB0cnVlLAogICJ3ZWlnaHQiOiAzCn0KICAgICAgICAgICAgICAgICkuYWRkVG8obWFwXzQ3ZTM0ODk5YmViNjQzYmRhN2E0YmJhOTBjODQ5M2Q4KTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwX2M3ODk2YTEyNmE4NzQ0NDY4ZWMyOTIyNWZjNjcxYjVlID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sX2U3M2RmZGM2M2JmOTRiYjZiY2MwYzk4OGU4OGQyMGNjID0gJCgnPGRpdiBpZD0iaHRtbF9lNzNkZmRjNjNiZjk0YmI2YmNjMGM5ODhlODhkMjBjYyIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+QmFyIENsdXN0ZXIgMzMgR2VycmFyZCBTdHJlZXQgV2VzdDwvZGl2PicpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfYzc4OTZhMTI2YTg3NDQ0NjhlYzI5MjI1ZmM2NzFiNWUuc2V0Q29udGVudChodG1sX2U3M2RmZGM2M2JmOTRiYjZiY2MwYzk4OGU4OGQyMGNjKTsKICAgICAgICAgICAgCgogICAgICAgICAgICBjaXJjbGVfbWFya2VyXzc3NDVlZjRhZmVmMjQ0Yjk5MWRlYzJmY2RkNTJhZjIwLmJpbmRQb3B1cChwb3B1cF9jNzg5NmExMjZhODc0NDQ2OGVjMjkyMjVmYzY3MWI1ZSk7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl9jNmI0ZWM0Yzg2MzM0ZjMzOTA1OTBhNWJlZWUwNWU0ZCA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWzQzLjY0OTgsLTc5LjM4MDE2XSwKICAgICAgICAgICAgICAgIHsKICAiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsCiAgImNvbG9yIjogIkZ1Y2hzaWEiLAogICJkYXNoQXJyYXkiOiBudWxsLAogICJkYXNoT2Zmc2V0IjogbnVsbCwKICAiZmlsbCI6IHRydWUsCiAgImZpbGxDb2xvciI6ICJGdWNoc2lhIiwKICAiZmlsbE9wYWNpdHkiOiAwLjcsCiAgImZpbGxSdWxlIjogImV2ZW5vZGQiLAogICJsaW5lQ2FwIjogInJvdW5kIiwKICAibGluZUpvaW4iOiAicm91bmQiLAogICJvcGFjaXR5IjogMS4wLAogICJyYWRpdXMiOiA1LAogICJzdHJva2UiOiB0cnVlLAogICJ3ZWlnaHQiOiAzCn0KICAgICAgICAgICAgICAgICkuYWRkVG8obWFwXzQ3ZTM0ODk5YmViNjQzYmRhN2E0YmJhOTBjODQ5M2Q4KTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwXzQ2NWY1ZjUzNWM1MTQ2M2Y4OGJiZTk4MzdmOTYyMDA3ID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sXzZhOGE3ZmZhN2YxODRlOWU4MjhlYjQ3OWY2NGVjZDk2ID0gJCgnPGRpdiBpZD0iaHRtbF82YThhN2ZmYTdmMTg0ZTllODI4ZWI0NzlmNjRlY2Q5NiIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+QmFyIENsdXN0ZXIgMzI1IEJheSBTdHJlZXQ8L2Rpdj4nKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwXzQ2NWY1ZjUzNWM1MTQ2M2Y4OGJiZTk4MzdmOTYyMDA3LnNldENvbnRlbnQoaHRtbF82YThhN2ZmYTdmMTg0ZTllODI4ZWI0NzlmNjRlY2Q5Nik7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgY2lyY2xlX21hcmtlcl9jNmI0ZWM0Yzg2MzM0ZjMzOTA1OTBhNWJlZWUwNWU0ZC5iaW5kUG9wdXAocG9wdXBfNDY1ZjVmNTM1YzUxNDYzZjg4YmJlOTgzN2Y5NjIwMDcpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGNpcmNsZV9tYXJrZXJfZWJjZDMzMTUxMDU1NDA5NGI4MTY0Y2IxYWVkMmRlNDggPSBMLmNpcmNsZU1hcmtlcigKICAgICAgICAgICAgICAgIFs0My42NTIyMDksLTc5LjM3OTMxNl0sCiAgICAgICAgICAgICAgICB7CiAgImJ1YmJsaW5nTW91c2VFdmVudHMiOiB0cnVlLAogICJjb2xvciI6ICJGdWNoc2lhIiwKICAiZGFzaEFycmF5IjogbnVsbCwKICAiZGFzaE9mZnNldCI6IG51bGwsCiAgImZpbGwiOiB0cnVlLAogICJmaWxsQ29sb3IiOiAiRnVjaHNpYSIsCiAgImZpbGxPcGFjaXR5IjogMC43LAogICJmaWxsUnVsZSI6ICJldmVub2RkIiwKICAibGluZUNhcCI6ICJyb3VuZCIsCiAgImxpbmVKb2luIjogInJvdW5kIiwKICAib3BhY2l0eSI6IDEuMCwKICAicmFkaXVzIjogNSwKICAic3Ryb2tlIjogdHJ1ZSwKICAid2VpZ2h0IjogMwp9CiAgICAgICAgICAgICAgICApLmFkZFRvKG1hcF80N2UzNDg5OWJlYjY0M2JkYTdhNGJiYTkwYzg0OTNkOCk7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF8yMGY1NzVjNzk0NWI0YmVkYmM3Y2ZkNmM5ZmY4MGRiZiA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF81ZmE2YzIwYzVhMzQ0ZDZhYjQ0N2E3M2JmZTUxYjEwNSA9ICQoJzxkaXYgaWQ9Imh0bWxfNWZhNmMyMGM1YTM0NGQ2YWI0NDdhNzNiZmU1MWIxMDUiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPkJhciBDbHVzdGVyIFB1c2F0ZXJp4oCZcyBAIFNha3MgRml0aCBBdmVudWU8L2Rpdj4nKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwXzIwZjU3NWM3OTQ1YjRiZWRiYzdjZmQ2YzlmZjgwZGJmLnNldENvbnRlbnQoaHRtbF81ZmE2YzIwYzVhMzQ0ZDZhYjQ0N2E3M2JmZTUxYjEwNSk7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgY2lyY2xlX21hcmtlcl9lYmNkMzMxNTEwNTU0MDk0YjgxNjRjYjFhZWQyZGU0OC5iaW5kUG9wdXAocG9wdXBfMjBmNTc1Yzc5NDViNGJlZGJjN2NmZDZjOWZmODBkYmYpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGNpcmNsZV9tYXJrZXJfYjM3MzE1MGIwZDFiNGM4NDhhODIwZGNiZTgwYjkwZWIgPSBMLmNpcmNsZU1hcmtlcigKICAgICAgICAgICAgICAgIFs0My42NDk5OTkzMjIyODMzOSwtNzkuMzg1NjA3MDk0OTU3NDRdLAogICAgICAgICAgICAgICAgewogICJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwKICAiY29sb3IiOiAiRnVjaHNpYSIsCiAgImRhc2hBcnJheSI6IG51bGwsCiAgImRhc2hPZmZzZXQiOiBudWxsLAogICJmaWxsIjogdHJ1ZSwKICAiZmlsbENvbG9yIjogIkZ1Y2hzaWEiLAogICJmaWxsT3BhY2l0eSI6IDAuNywKICAiZmlsbFJ1bGUiOiAiZXZlbm9kZCIsCiAgImxpbmVDYXAiOiAicm91bmQiLAogICJsaW5lSm9pbiI6ICJyb3VuZCIsCiAgIm9wYWNpdHkiOiAxLjAsCiAgInJhZGl1cyI6IDUsCiAgInN0cm9rZSI6IHRydWUsCiAgIndlaWdodCI6IDMKfQogICAgICAgICAgICAgICAgKS5hZGRUbyhtYXBfNDdlMzQ4OTliZWI2NDNiZGE3YTRiYmE5MGM4NDkzZDgpOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfZTc1YmE2NjEwMTVhNGZmYmEzYzI3ZThmZTA4ZDc5MWIgPSBMLnBvcHVwKHttYXhXaWR0aDogJzMwMCd9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfMDYxZmNkYmI2NGM3NDVjYjgzMzYyMzMzZDE5YzFkYjYgPSAkKCc8ZGl2IGlkPSJodG1sXzA2MWZjZGJiNjRjNzQ1Y2I4MzM2MjMzM2QxOWMxZGI2IiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5CYXIgQ2x1c3RlciAxNDUgUmljaG1vbmQgU3QgVzwvZGl2PicpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfZTc1YmE2NjEwMTVhNGZmYmEzYzI3ZThmZTA4ZDc5MWIuc2V0Q29udGVudChodG1sXzA2MWZjZGJiNjRjNzQ1Y2I4MzM2MjMzM2QxOWMxZGI2KTsKICAgICAgICAgICAgCgogICAgICAgICAgICBjaXJjbGVfbWFya2VyX2IzNzMxNTBiMGQxYjRjODQ4YTgyMGRjYmU4MGI5MGViLmJpbmRQb3B1cChwb3B1cF9lNzViYTY2MTAxNWE0ZmZiYTNjMjdlOGZlMDhkNzkxYik7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl85NzlkMzc3OTk5OTc0ZWY2OTQ1YzkyZmQ1YjMwM2ExOCA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWzQzLjY1Njc0NTUsLTc5LjM4MDQ4NF0sCiAgICAgICAgICAgICAgICB7CiAgImJ1YmJsaW5nTW91c2VFdmVudHMiOiB0cnVlLAogICJjb2xvciI6ICJGdWNoc2lhIiwKICAiZGFzaEFycmF5IjogbnVsbCwKICAiZGFzaE9mZnNldCI6IG51bGwsCiAgImZpbGwiOiB0cnVlLAogICJmaWxsQ29sb3IiOiAiRnVjaHNpYSIsCiAgImZpbGxPcGFjaXR5IjogMC43LAogICJmaWxsUnVsZSI6ICJldmVub2RkIiwKICAibGluZUNhcCI6ICJyb3VuZCIsCiAgImxpbmVKb2luIjogInJvdW5kIiwKICAib3BhY2l0eSI6IDEuMCwKICAicmFkaXVzIjogNSwKICAic3Ryb2tlIjogdHJ1ZSwKICAid2VpZ2h0IjogMwp9CiAgICAgICAgICAgICAgICApLmFkZFRvKG1hcF80N2UzNDg5OWJlYjY0M2JkYTdhNGJiYTkwYzg0OTNkOCk7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF81MmIyNjE2Njk4ZGU0MjQ1Yjk5NTI5NDBiYWQ4ZTAwMiA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF8yNTIzZTE0YmIwYTA0Y2MzOWQ4OWRlN2JhOTdhYjZhZCA9ICQoJzxkaXYgaWQ9Imh0bWxfMjUyM2UxNGJiMGEwNGNjMzlkODlkZTdiYTk3YWI2YWQiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPkJhciBDbHVzdGVyIDEwIER1bmRhcyBTdCBFPC9kaXY+JylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF81MmIyNjE2Njk4ZGU0MjQ1Yjk5NTI5NDBiYWQ4ZTAwMi5zZXRDb250ZW50KGh0bWxfMjUyM2UxNGJiMGEwNGNjMzlkODlkZTdiYTk3YWI2YWQpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIGNpcmNsZV9tYXJrZXJfOTc5ZDM3Nzk5OTk3NGVmNjk0NWM5MmZkNWIzMDNhMTguYmluZFBvcHVwKHBvcHVwXzUyYjI2MTY2OThkZTQyNDViOTk1Mjk0MGJhZDhlMDAyKTsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyXzUyZjMwNWRiNjg1ZTRlNTdhNDUwYjljNmEyNWI2NDM3ID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbNDMuNjQ5OTYxOTE3MTg1MTQ1LC03OS4zODY5NDU0NTgyNjU5NF0sCiAgICAgICAgICAgICAgICB7CiAgImJ1YmJsaW5nTW91c2VFdmVudHMiOiB0cnVlLAogICJjb2xvciI6ICJGdWNoc2lhIiwKICAiZGFzaEFycmF5IjogbnVsbCwKICAiZGFzaE9mZnNldCI6IG51bGwsCiAgImZpbGwiOiB0cnVlLAogICJmaWxsQ29sb3IiOiAiRnVjaHNpYSIsCiAgImZpbGxPcGFjaXR5IjogMC43LAogICJmaWxsUnVsZSI6ICJldmVub2RkIiwKICAibGluZUNhcCI6ICJyb3VuZCIsCiAgImxpbmVKb2luIjogInJvdW5kIiwKICAib3BhY2l0eSI6IDEuMCwKICAicmFkaXVzIjogNSwKICAic3Ryb2tlIjogdHJ1ZSwKICAid2VpZ2h0IjogMwp9CiAgICAgICAgICAgICAgICApLmFkZFRvKG1hcF80N2UzNDg5OWJlYjY0M2JkYTdhNGJiYTkwYzg0OTNkOCk7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF81ZDJlNTY5ODU4ZjA0MDhmOGQ3NmQxNDI0MTk0MTE2ZSA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF9iYzY4NjA1Y2U2NDQ0Yjg5YTFhNjc4ODRjODllMDllNiA9ICQoJzxkaXYgaWQ9Imh0bWxfYmM2ODYwNWNlNjQ0NGI4OWExYTY3ODg0Yzg5ZTA5ZTYiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPkJhciBDbHVzdGVyIDIyIER1bmNhbiBTdC48L2Rpdj4nKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwXzVkMmU1Njk4NThmMDQwOGY4ZDc2ZDE0MjQxOTQxMTZlLnNldENvbnRlbnQoaHRtbF9iYzY4NjA1Y2U2NDQ0Yjg5YTFhNjc4ODRjODllMDllNik7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgY2lyY2xlX21hcmtlcl81MmYzMDVkYjY4NWU0ZTU3YTQ1MGI5YzZhMjViNjQzNy5iaW5kUG9wdXAocG9wdXBfNWQyZTU2OTg1OGYwNDA4ZjhkNzZkMTQyNDE5NDExNmUpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGNpcmNsZV9tYXJrZXJfZDE2ZjQwMWY0YzU4NGNjZDg0NjBkODRkNjliYWNhOTAgPSBMLmNpcmNsZU1hcmtlcigKICAgICAgICAgICAgICAgIFs0My42NTQ1NDAxMTI5ODg1MzUsLTc5LjM4MDY3NzM4MzUyOTkzXSwKICAgICAgICAgICAgICAgIHsKICAiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsCiAgImNvbG9yIjogIlB1cnBsZSIsCiAgImRhc2hBcnJheSI6IG51bGwsCiAgImRhc2hPZmZzZXQiOiBudWxsLAogICJmaWxsIjogdHJ1ZSwKICAiZmlsbENvbG9yIjogIlB1cnBsZSIsCiAgImZpbGxPcGFjaXR5IjogMC43LAogICJmaWxsUnVsZSI6ICJldmVub2RkIiwKICAibGluZUNhcCI6ICJyb3VuZCIsCiAgImxpbmVKb2luIjogInJvdW5kIiwKICAib3BhY2l0eSI6IDEuMCwKICAicmFkaXVzIjogNSwKICAic3Ryb2tlIjogdHJ1ZSwKICAid2VpZ2h0IjogMwp9CiAgICAgICAgICAgICAgICApLmFkZFRvKG1hcF80N2UzNDg5OWJlYjY0M2JkYTdhNGJiYTkwYzg0OTNkOCk7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF82OWIzYzM5ZmM2YTU0ZDBjYWM1OTRmZDFlYjJlNDU2YiA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF80NWNmYTMyZGVjZDg0M2Y0YmExNWZiY2Q5OTkyNTg5MyA9ICQoJzxkaXYgaWQ9Imh0bWxfNDVjZmEzMmRlY2Q4NDNmNGJhMTVmYmNkOTk5MjU4OTMiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPlNob3BwaW5nIE1hbGwgQ2x1c3RlciAyMjAgWW9uZ2UgU3Q8L2Rpdj4nKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwXzY5YjNjMzlmYzZhNTRkMGNhYzU5NGZkMWViMmU0NTZiLnNldENvbnRlbnQoaHRtbF80NWNmYTMyZGVjZDg0M2Y0YmExNWZiY2Q5OTkyNTg5Myk7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgY2lyY2xlX21hcmtlcl9kMTZmNDAxZjRjNTg0Y2NkODQ2MGQ4NGQ2OWJhY2E5MC5iaW5kUG9wdXAocG9wdXBfNjliM2MzOWZjNmE1NGQwY2FjNTk0ZmQxZWIyZTQ1NmIpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGNpcmNsZV9tYXJrZXJfMWQwZmI0N2RmNTQwNGMzM2E4NTUxZTE1ZTgwNDA1YmEgPSBMLmNpcmNsZU1hcmtlcigKICAgICAgICAgICAgICAgIFs0My42NDcxODQyNDYxMTk4NCwtNzkuMzgwOTMxODUzNTcxNDddLAogICAgICAgICAgICAgICAgewogICJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwKICAiY29sb3IiOiAiUHVycGxlIiwKICAiZGFzaEFycmF5IjogbnVsbCwKICAiZGFzaE9mZnNldCI6IG51bGwsCiAgImZpbGwiOiB0cnVlLAogICJmaWxsQ29sb3IiOiAiUHVycGxlIiwKICAiZmlsbE9wYWNpdHkiOiAwLjcsCiAgImZpbGxSdWxlIjogImV2ZW5vZGQiLAogICJsaW5lQ2FwIjogInJvdW5kIiwKICAibGluZUpvaW4iOiAicm91bmQiLAogICJvcGFjaXR5IjogMS4wLAogICJyYWRpdXMiOiA1LAogICJzdHJva2UiOiB0cnVlLAogICJ3ZWlnaHQiOiAzCn0KICAgICAgICAgICAgICAgICkuYWRkVG8obWFwXzQ3ZTM0ODk5YmViNjQzYmRhN2E0YmJhOTBjODQ5M2Q4KTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwXzBlMTFjYmYwOTAwNjQ1YmY4YTYyZjI3NTJiY2MxOWM4ID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sXzM0MmUwN2JiNGJkNDRkNGRiM2M1YzAzMGVhNzBiNjc5ID0gJCgnPGRpdiBpZD0iaHRtbF8zNDJlMDdiYjRiZDQ0ZDRkYjNjNWMwMzBlYTcwYjY3OSIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+U2hvcHBpbmcgTWFsbCBDbHVzdGVyIDY2IFdlbGxpbmd0b24gU3QgVzwvZGl2PicpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfMGUxMWNiZjA5MDA2NDViZjhhNjJmMjc1MmJjYzE5Yzguc2V0Q29udGVudChodG1sXzM0MmUwN2JiNGJkNDRkNGRiM2M1YzAzMGVhNzBiNjc5KTsKICAgICAgICAgICAgCgogICAgICAgICAgICBjaXJjbGVfbWFya2VyXzFkMGZiNDdkZjU0MDRjMzNhODU1MWUxNWU4MDQwNWJhLmJpbmRQb3B1cChwb3B1cF8wZTExY2JmMDkwMDY0NWJmOGE2MmYyNzUyYmNjMTljOCk7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl80YjI2NDIyYjZmMjU0MzY2YTVhOWI4ODdkZThlMjk4OCA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWzQzLjY1MDk4NTA1MTY2NTkyLC03OS4zODQwMDIzMjA4NDgxNF0sCiAgICAgICAgICAgICAgICB7CiAgImJ1YmJsaW5nTW91c2VFdmVudHMiOiB0cnVlLAogICJjb2xvciI6ICJCbHVlIiwKICAiZGFzaEFycmF5IjogbnVsbCwKICAiZGFzaE9mZnNldCI6IG51bGwsCiAgImZpbGwiOiB0cnVlLAogICJmaWxsQ29sb3IiOiAiQmx1ZSIsCiAgImZpbGxPcGFjaXR5IjogMC43LAogICJmaWxsUnVsZSI6ICJldmVub2RkIiwKICAibGluZUNhcCI6ICJyb3VuZCIsCiAgImxpbmVKb2luIjogInJvdW5kIiwKICAib3BhY2l0eSI6IDEuMCwKICAicmFkaXVzIjogNSwKICAic3Ryb2tlIjogdHJ1ZSwKICAid2VpZ2h0IjogMwp9CiAgICAgICAgICAgICAgICApLmFkZFRvKG1hcF80N2UzNDg5OWJlYjY0M2JkYTdhNGJiYTkwYzg0OTNkOCk7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF8xMjFlZjdjMzk0Njc0Y2ViOTJkODdjMWU5OGIzODQ3YiA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF9mZGNlZTFmYjYxYzE0NzYyOWM1MTRjMWNmZjAwN2UzOSA9ICQoJzxkaXYgaWQ9Imh0bWxfZmRjZWUxZmI2MWMxNDc2MjljNTE0YzFjZmYwMDdlMzkiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPkd5bSBDbHVzdGVyIFNoZXJhdG9uIENlbnRyZTwvZGl2PicpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfMTIxZWY3YzM5NDY3NGNlYjkyZDg3YzFlOThiMzg0N2Iuc2V0Q29udGVudChodG1sX2ZkY2VlMWZiNjFjMTQ3NjI5YzUxNGMxY2ZmMDA3ZTM5KTsKICAgICAgICAgICAgCgogICAgICAgICAgICBjaXJjbGVfbWFya2VyXzRiMjY0MjJiNmYyNTQzNjZhNWE5Yjg4N2RlOGUyOTg4LmJpbmRQb3B1cChwb3B1cF8xMjFlZjdjMzk0Njc0Y2ViOTJkODdjMWU5OGIzODQ3Yik7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl9jMjhlYWQ2ZDliM2Q0OWM3YmU5MjM3MjE5YThmNTBjMSA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWzQzLjY1NDY5MDQ1NTk1NTU0NiwtNzkuMzgxNzM4NTg3NDMwM10sCiAgICAgICAgICAgICAgICB7CiAgImJ1YmJsaW5nTW91c2VFdmVudHMiOiB0cnVlLAogICJjb2xvciI6ICJCbHVlIiwKICAiZGFzaEFycmF5IjogbnVsbCwKICAiZGFzaE9mZnNldCI6IG51bGwsCiAgImZpbGwiOiB0cnVlLAogICJmaWxsQ29sb3IiOiAiQmx1ZSIsCiAgImZpbGxPcGFjaXR5IjogMC43LAogICJmaWxsUnVsZSI6ICJldmVub2RkIiwKICAibGluZUNhcCI6ICJyb3VuZCIsCiAgImxpbmVKb2luIjogInJvdW5kIiwKICAib3BhY2l0eSI6IDEuMCwKICAicmFkaXVzIjogNSwKICAic3Ryb2tlIjogdHJ1ZSwKICAid2VpZ2h0IjogMwp9CiAgICAgICAgICAgICAgICApLmFkZFRvKG1hcF80N2UzNDg5OWJlYjY0M2JkYTdhNGJiYTkwYzg0OTNkOCk7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF84YjlmNzNlNzg2MmQ0YTJmYWRhOWFmNjk4M2ZjZWQ5MiA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF80ZDI1OTc5YzI2ZDA0YzUxOTU0ODI0Y2MwZjQ1MmUzOSA9ICQoJzxkaXYgaWQ9Imh0bWxfNGQyNTk3OWMyNmQwNGM1MTk1NDgyNGNjMGY0NTJlMzkiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPkd5bSBDbHVzdGVyIDUyNSBCYXkgU3QuPC9kaXY+JylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF84YjlmNzNlNzg2MmQ0YTJmYWRhOWFmNjk4M2ZjZWQ5Mi5zZXRDb250ZW50KGh0bWxfNGQyNTk3OWMyNmQwNGM1MTk1NDgyNGNjMGY0NTJlMzkpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIGNpcmNsZV9tYXJrZXJfYzI4ZWFkNmQ5YjNkNDljN2JlOTIzNzIxOWE4ZjUwYzEuYmluZFBvcHVwKHBvcHVwXzhiOWY3M2U3ODYyZDRhMmZhZGE5YWY2OTgzZmNlZDkyKTsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyX2Y3ZmMxODBhZDNlOTQ0OWY5OTFhZmUwOWJlMTlhZjY1ID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbNDMuNjUzNDM2LC03OS4zODIzMTRdLAogICAgICAgICAgICAgICAgewogICJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwKICAiY29sb3IiOiAiQmx1ZSIsCiAgImRhc2hBcnJheSI6IG51bGwsCiAgImRhc2hPZmZzZXQiOiBudWxsLAogICJmaWxsIjogdHJ1ZSwKICAiZmlsbENvbG9yIjogIkJsdWUiLAogICJmaWxsT3BhY2l0eSI6IDAuNywKICAiZmlsbFJ1bGUiOiAiZXZlbm9kZCIsCiAgImxpbmVDYXAiOiAicm91bmQiLAogICJsaW5lSm9pbiI6ICJyb3VuZCIsCiAgIm9wYWNpdHkiOiAxLjAsCiAgInJhZGl1cyI6IDUsCiAgInN0cm9rZSI6IHRydWUsCiAgIndlaWdodCI6IDMKfQogICAgICAgICAgICAgICAgKS5hZGRUbyhtYXBfNDdlMzQ4OTliZWI2NDNiZGE3YTRiYmE5MGM4NDkzZDgpOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfYjY2MWRhNGUzMTc2NGNkMWIyNjA5ZmI4ZmFlNjRiZjkgPSBMLnBvcHVwKHttYXhXaWR0aDogJzMwMCd9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfZjE1ZWM0ZjU4ZmZmNGY0MmE2YWEzZjBkZWE3YWI4NDggPSAkKCc8ZGl2IGlkPSJodG1sX2YxNWVjNGY1OGZmZjRmNDJhNmFhM2YwZGVhN2FiODQ4IiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5HeW0gQ2x1c3RlciA0ODMgQmF5IFN0PC9kaXY+JylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF9iNjYxZGE0ZTMxNzY0Y2QxYjI2MDlmYjhmYWU2NGJmOS5zZXRDb250ZW50KGh0bWxfZjE1ZWM0ZjU4ZmZmNGY0MmE2YWEzZjBkZWE3YWI4NDgpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIGNpcmNsZV9tYXJrZXJfZjdmYzE4MGFkM2U5NDQ5Zjk5MWFmZTA5YmUxOWFmNjUuYmluZFBvcHVwKHBvcHVwX2I2NjFkYTRlMzE3NjRjZDFiMjYwOWZiOGZhZTY0YmY5KTsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyXzJmMDNmODI3MDE1MDQ1NTRhZmRlZjRiNjc0MzJhNjQzID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbNDMuNjU0NjAzMTM5NzI0MzMsLTc5LjM4NjIwMzg4NTA3ODQzXSwKICAgICAgICAgICAgICAgIHsKICAiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsCiAgImNvbG9yIjogIkJsdWUiLAogICJkYXNoQXJyYXkiOiBudWxsLAogICJkYXNoT2Zmc2V0IjogbnVsbCwKICAiZmlsbCI6IHRydWUsCiAgImZpbGxDb2xvciI6ICJCbHVlIiwKICAiZmlsbE9wYWNpdHkiOiAwLjcsCiAgImZpbGxSdWxlIjogImV2ZW5vZGQiLAogICJsaW5lQ2FwIjogInJvdW5kIiwKICAibGluZUpvaW4iOiAicm91bmQiLAogICJvcGFjaXR5IjogMS4wLAogICJyYWRpdXMiOiA1LAogICJzdHJva2UiOiB0cnVlLAogICJ3ZWlnaHQiOiAzCn0KICAgICAgICAgICAgICAgICkuYWRkVG8obWFwXzQ3ZTM0ODk5YmViNjQzYmRhN2E0YmJhOTBjODQ5M2Q4KTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwXzk2ZGJiYjAxZTY5ZDQ4MTZiZmY4OTk3YTZlYTRmMDgyID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sXzUxNjcyMzk1NDk2YTRhOGFhYzc5NWYzYTc5M2E2MjY4ID0gJCgnPGRpdiBpZD0iaHRtbF81MTY3MjM5NTQ5NmE0YThhYWM3OTVmM2E3OTNhNjI2OCIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+R3ltIENsdXN0ZXIgMTA4IENoZXN0bnV0IFN0cmVldDwvZGl2PicpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfOTZkYmJiMDFlNjlkNDgxNmJmZjg5OTdhNmVhNGYwODIuc2V0Q29udGVudChodG1sXzUxNjcyMzk1NDk2YTRhOGFhYzc5NWYzYTc5M2E2MjY4KTsKICAgICAgICAgICAgCgogICAgICAgICAgICBjaXJjbGVfbWFya2VyXzJmMDNmODI3MDE1MDQ1NTRhZmRlZjRiNjc0MzJhNjQzLmJpbmRQb3B1cChwb3B1cF85NmRiYmIwMWU2OWQ0ODE2YmZmODk5N2E2ZWE0ZjA4Mik7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl8xZGIxZWZmYmE3OWU0OWI4YTlkNDg0Y2NkMWZjNzFiZCA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWzQzLjY1Mzk0NDEwMjc0NTQ4NCwtNzkuMzgzMzcwMzk5NDkxNDddLAogICAgICAgICAgICAgICAgewogICJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwKICAiY29sb3IiOiAiQmx1ZSIsCiAgImRhc2hBcnJheSI6IG51bGwsCiAgImRhc2hPZmZzZXQiOiBudWxsLAogICJmaWxsIjogdHJ1ZSwKICAiZmlsbENvbG9yIjogIkJsdWUiLAogICJmaWxsT3BhY2l0eSI6IDAuNywKICAiZmlsbFJ1bGUiOiAiZXZlbm9kZCIsCiAgImxpbmVDYXAiOiAicm91bmQiLAogICJsaW5lSm9pbiI6ICJyb3VuZCIsCiAgIm9wYWNpdHkiOiAxLjAsCiAgInJhZGl1cyI6IDUsCiAgInN0cm9rZSI6IHRydWUsCiAgIndlaWdodCI6IDMKfQogICAgICAgICAgICAgICAgKS5hZGRUbyhtYXBfNDdlMzQ4OTliZWI2NDNiZGE3YTRiYmE5MGM4NDkzZDgpOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfYThlOTUxZmIzZGRkNDFlOGFhNTE5OTVmMjExMjQ3ZDAgPSBMLnBvcHVwKHttYXhXaWR0aDogJzMwMCd9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfNWQwYWUxZDYzZGI1NDA5M2I3YWMxOTQ0NmMyOTc4YTAgPSAkKCc8ZGl2IGlkPSJodG1sXzVkMGFlMWQ2M2RiNTQwOTNiN2FjMTk0NDZjMjk3OGEwIiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5HeW0gQ2x1c3RlciAzMTkgTWVydG9uIFN0cmVldDwvZGl2PicpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfYThlOTUxZmIzZGRkNDFlOGFhNTE5OTVmMjExMjQ3ZDAuc2V0Q29udGVudChodG1sXzVkMGFlMWQ2M2RiNTQwOTNiN2FjMTk0NDZjMjk3OGEwKTsKICAgICAgICAgICAgCgogICAgICAgICAgICBjaXJjbGVfbWFya2VyXzFkYjFlZmZiYTc5ZTQ5YjhhOWQ0ODRjY2QxZmM3MWJkLmJpbmRQb3B1cChwb3B1cF9hOGU5NTFmYjNkZGQ0MWU4YWE1MTk5NWYyMTEyNDdkMCk7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl9kYzU1NDNiZWQ3MGI0NWM0YmJiNDFkY2QwZDljMGZiZCA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWzQzLjY0OTc0MiwtNzkuMzc4NTM3XSwKICAgICAgICAgICAgICAgIHsKICAiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsCiAgImNvbG9yIjogIkJsdWUiLAogICJkYXNoQXJyYXkiOiBudWxsLAogICJkYXNoT2Zmc2V0IjogbnVsbCwKICAiZmlsbCI6IHRydWUsCiAgImZpbGxDb2xvciI6ICJCbHVlIiwKICAiZmlsbE9wYWNpdHkiOiAwLjcsCiAgImZpbGxSdWxlIjogImV2ZW5vZGQiLAogICJsaW5lQ2FwIjogInJvdW5kIiwKICAibGluZUpvaW4iOiAicm91bmQiLAogICJvcGFjaXR5IjogMS4wLAogICJyYWRpdXMiOiA1LAogICJzdHJva2UiOiB0cnVlLAogICJ3ZWlnaHQiOiAzCn0KICAgICAgICAgICAgICAgICkuYWRkVG8obWFwXzQ3ZTM0ODk5YmViNjQzYmRhN2E0YmJhOTBjODQ5M2Q4KTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwXzhlYzljOGExMDFkZDQ4MDI4YmY1NmQyOTY5NzBlNGZmID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sXzdmZTVjNDY1YTdiNDQwOTM5MjEwZGE5ZjAxN2Q3MDA5ID0gJCgnPGRpdiBpZD0iaHRtbF83ZmU1YzQ2NWE3YjQ0MDkzOTIxMGRhOWYwMTdkNzAwOSIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+R3ltIENsdXN0ZXIgMTAwIFlvbmdlIFN0PC9kaXY+JylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF84ZWM5YzhhMTAxZGQ0ODAyOGJmNTZkMjk2OTcwZTRmZi5zZXRDb250ZW50KGh0bWxfN2ZlNWM0NjVhN2I0NDA5MzkyMTBkYTlmMDE3ZDcwMDkpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIGNpcmNsZV9tYXJrZXJfZGM1NTQzYmVkNzBiNDVjNGJiYjQxZGNkMGQ5YzBmYmQuYmluZFBvcHVwKHBvcHVwXzhlYzljOGExMDFkZDQ4MDI4YmY1NmQyOTY5NzBlNGZmKTsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyX2EyM2MwN2Y1ZjgxNTQxNzBiMDU4MTZjNDc1ZDBkOWJiID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbNDMuNjUwMzE5LC03OS4zODM3ODJdLAogICAgICAgICAgICAgICAgewogICJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwKICAiY29sb3IiOiAiQmx1ZSIsCiAgImRhc2hBcnJheSI6IG51bGwsCiAgImRhc2hPZmZzZXQiOiBudWxsLAogICJmaWxsIjogdHJ1ZSwKICAiZmlsbENvbG9yIjogIkJsdWUiLAogICJmaWxsT3BhY2l0eSI6IDAuNywKICAiZmlsbFJ1bGUiOiAiZXZlbm9kZCIsCiAgImxpbmVDYXAiOiAicm91bmQiLAogICJsaW5lSm9pbiI6ICJyb3VuZCIsCiAgIm9wYWNpdHkiOiAxLjAsCiAgInJhZGl1cyI6IDUsCiAgInN0cm9rZSI6IHRydWUsCiAgIndlaWdodCI6IDMKfQogICAgICAgICAgICAgICAgKS5hZGRUbyhtYXBfNDdlMzQ4OTliZWI2NDNiZGE3YTRiYmE5MGM4NDkzZDgpOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfNzc1M2I4MThlZTk4NGM4ZTlmN2RiNmYyNTNjNTcxYTAgPSBMLnBvcHVwKHttYXhXaWR0aDogJzMwMCd9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfN2ZiYjZiNGE4NDE4NGVhMDllZWYzYzkzNDEyZTQxYTYgPSAkKCc8ZGl2IGlkPSJodG1sXzdmYmI2YjRhODQxODRlYTA5ZWVmM2M5MzQxMmU0MWE2IiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5HeW0gQ2x1c3RlciAxMTEgUmljaG1vbmQgU3QgVywgMTFGPC9kaXY+JylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF83NzUzYjgxOGVlOTg0YzhlOWY3ZGI2ZjI1M2M1NzFhMC5zZXRDb250ZW50KGh0bWxfN2ZiYjZiNGE4NDE4NGVhMDllZWYzYzkzNDEyZTQxYTYpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIGNpcmNsZV9tYXJrZXJfYTIzYzA3ZjVmODE1NDE3MGIwNTgxNmM0NzVkMGQ5YmIuYmluZFBvcHVwKHBvcHVwXzc3NTNiODE4ZWU5ODRjOGU5ZjdkYjZmMjUzYzU3MWEwKTsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyX2FjZTlkYjUxMjA4ZjQ1MGY5YjRhY2Y0NjQzODA2NzdkID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbNDMuNjUxMTQ4LC03OS4zODk2ODNdLAogICAgICAgICAgICAgICAgewogICJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwKICAiY29sb3IiOiAiQmx1ZSIsCiAgImRhc2hBcnJheSI6IG51bGwsCiAgImRhc2hPZmZzZXQiOiBudWxsLAogICJmaWxsIjogdHJ1ZSwKICAiZmlsbENvbG9yIjogIkJsdWUiLAogICJmaWxsT3BhY2l0eSI6IDAuNywKICAiZmlsbFJ1bGUiOiAiZXZlbm9kZCIsCiAgImxpbmVDYXAiOiAicm91bmQiLAogICJsaW5lSm9pbiI6ICJyb3VuZCIsCiAgIm9wYWNpdHkiOiAxLjAsCiAgInJhZGl1cyI6IDUsCiAgInN0cm9rZSI6IHRydWUsCiAgIndlaWdodCI6IDMKfQogICAgICAgICAgICAgICAgKS5hZGRUbyhtYXBfNDdlMzQ4OTliZWI2NDNiZGE3YTRiYmE5MGM4NDkzZDgpOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfMWMwYmQ4ODUwN2IzNGE0ZThkNGFhMjlhN2RiNjgyYTYgPSBMLnBvcHVwKHttYXhXaWR0aDogJzMwMCd9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfNGE0YzYyMmI3MmNiNDM2YTg0NmMyMDkxZTAwNGRiYzkgPSAkKCc8ZGl2IGlkPSJodG1sXzRhNGM2MjJiNzJjYjQzNmE4NDZjMjA5MWUwMDRkYmM5IiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5HeW0gQ2x1c3RlciAyMSBNY0NhdWwgU3Q8L2Rpdj4nKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwXzFjMGJkODg1MDdiMzRhNGU4ZDRhYTI5YTdkYjY4MmE2LnNldENvbnRlbnQoaHRtbF80YTRjNjIyYjcyY2I0MzZhODQ2YzIwOTFlMDA0ZGJjOSk7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgY2lyY2xlX21hcmtlcl9hY2U5ZGI1MTIwOGY0NTBmOWI0YWNmNDY0MzgwNjc3ZC5iaW5kUG9wdXAocG9wdXBfMWMwYmQ4ODUwN2IzNGE0ZThkNGFhMjlhN2RiNjgyYTYpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGNpcmNsZV9tYXJrZXJfN2NhMmFjYjQyODNiNDcwNWEwZTliNzc2NmU5Y2ZkNjIgPSBMLmNpcmNsZU1hcmtlcigKICAgICAgICAgICAgICAgIFs0My42NTEyNDIsLTc5LjM3ODA2OF0sCiAgICAgICAgICAgICAgICB7CiAgImJ1YmJsaW5nTW91c2VFdmVudHMiOiB0cnVlLAogICJjb2xvciI6ICJCbHVlIiwKICAiZGFzaEFycmF5IjogbnVsbCwKICAiZGFzaE9mZnNldCI6IG51bGwsCiAgImZpbGwiOiB0cnVlLAogICJmaWxsQ29sb3IiOiAiQmx1ZSIsCiAgImZpbGxPcGFjaXR5IjogMC43LAogICJmaWxsUnVsZSI6ICJldmVub2RkIiwKICAibGluZUNhcCI6ICJyb3VuZCIsCiAgImxpbmVKb2luIjogInJvdW5kIiwKICAib3BhY2l0eSI6IDEuMCwKICAicmFkaXVzIjogNSwKICAic3Ryb2tlIjogdHJ1ZSwKICAid2VpZ2h0IjogMwp9CiAgICAgICAgICAgICAgICApLmFkZFRvKG1hcF80N2UzNDg5OWJlYjY0M2JkYTdhNGJiYTkwYzg0OTNkOCk7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF85ZmUzNDAzMDYzZjk0NGJlODVhNjQ1MmRhY2FmZTViMiA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF9hNjdiOTNmODRhMGU0MzZlOTMxNTlmM2I5MzIzMjQ4NiA9ICQoJzxkaXYgaWQ9Imh0bWxfYTY3YjkzZjg0YTBlNDM2ZTkzMTU5ZjNiOTMyMzI0ODYiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPkd5bSBDbHVzdGVyIDEzNyBZb25nZSBTdDwvZGl2PicpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfOWZlMzQwMzA2M2Y5NDRiZTg1YTY0NTJkYWNhZmU1YjIuc2V0Q29udGVudChodG1sX2E2N2I5M2Y4NGEwZTQzNmU5MzE1OWYzYjkzMjMyNDg2KTsKICAgICAgICAgICAgCgogICAgICAgICAgICBjaXJjbGVfbWFya2VyXzdjYTJhY2I0MjgzYjQ3MDVhMGU5Yjc3NjZlOWNmZDYyLmJpbmRQb3B1cChwb3B1cF85ZmUzNDAzMDYzZjk0NGJlODVhNjQ1MmRhY2FmZTViMik7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl9iZWQxYTQ5ZmVjZDA0NTYyODgxYTQ3OWI5ZTk2Y2Q3MiA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWzQzLjY1NDE5NTYwODg0NzczNiwtNzkuMzgxNzEzODY3MTg3NV0sCiAgICAgICAgICAgICAgICB7CiAgImJ1YmJsaW5nTW91c2VFdmVudHMiOiB0cnVlLAogICJjb2xvciI6ICJCbHVlIiwKICAiZGFzaEFycmF5IjogbnVsbCwKICAiZGFzaE9mZnNldCI6IG51bGwsCiAgImZpbGwiOiB0cnVlLAogICJmaWxsQ29sb3IiOiAiQmx1ZSIsCiAgImZpbGxPcGFjaXR5IjogMC43LAogICJmaWxsUnVsZSI6ICJldmVub2RkIiwKICAibGluZUNhcCI6ICJyb3VuZCIsCiAgImxpbmVKb2luIjogInJvdW5kIiwKICAib3BhY2l0eSI6IDEuMCwKICAicmFkaXVzIjogNSwKICAic3Ryb2tlIjogdHJ1ZSwKICAid2VpZ2h0IjogMwp9CiAgICAgICAgICAgICAgICApLmFkZFRvKG1hcF80N2UzNDg5OWJlYjY0M2JkYTdhNGJiYTkwYzg0OTNkOCk7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF8zMDFhZDUyZWNlYjI0OTIyYTMyZjYwNGJhMWM0MjBiNSA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF82Njg5NzNkYzU5ZTA0OGYwYTU4MTAxMmIwNWVkNmQ1NiA9ICQoJzxkaXYgaWQ9Imh0bWxfNjY4OTczZGM1OWUwNDhmMGE1ODEwMTJiMDVlZDZkNTYiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPkd5bSBDbHVzdGVyIDI1MCBZb25nZSBTdDwvZGl2PicpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfMzAxYWQ1MmVjZWIyNDkyMmEzMmY2MDRiYTFjNDIwYjUuc2V0Q29udGVudChodG1sXzY2ODk3M2RjNTllMDQ4ZjBhNTgxMDEyYjA1ZWQ2ZDU2KTsKICAgICAgICAgICAgCgogICAgICAgICAgICBjaXJjbGVfbWFya2VyX2JlZDFhNDlmZWNkMDQ1NjI4ODFhNDc5YjllOTZjZDcyLmJpbmRQb3B1cChwb3B1cF8zMDFhZDUyZWNlYjI0OTIyYTMyZjYwNGJhMWM0MjBiNSk7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl83YjFjYWEyNTI5NGI0OGRlODEyNDM0MDI4NmUyNzkxNSA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWzQzLjY1MTQyOSwtNzkuMzgyMzU2XSwKICAgICAgICAgICAgICAgIHsKICAiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsCiAgImNvbG9yIjogIkJsdWUiLAogICJkYXNoQXJyYXkiOiBudWxsLAogICJkYXNoT2Zmc2V0IjogbnVsbCwKICAiZmlsbCI6IHRydWUsCiAgImZpbGxDb2xvciI6ICJCbHVlIiwKICAiZmlsbE9wYWNpdHkiOiAwLjcsCiAgImZpbGxSdWxlIjogImV2ZW5vZGQiLAogICJsaW5lQ2FwIjogInJvdW5kIiwKICAibGluZUpvaW4iOiAicm91bmQiLAogICJvcGFjaXR5IjogMS4wLAogICJyYWRpdXMiOiA1LAogICJzdHJva2UiOiB0cnVlLAogICJ3ZWlnaHQiOiAzCn0KICAgICAgICAgICAgICAgICkuYWRkVG8obWFwXzQ3ZTM0ODk5YmViNjQzYmRhN2E0YmJhOTBjODQ5M2Q4KTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwX2M2NWY0M2U5ZDc2MzQyMGFiZmJjNjdmYTZmNzU5ZTk3ID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sX2UxZmMwOWZlNzE2YjRhYWNhMTBhOTdhOTQ3ZDI1NTFmID0gJCgnPGRpdiBpZD0iaHRtbF9lMWZjMDlmZTcxNmI0YWFjYTEwYTk3YTk0N2QyNTUxZiIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+R3ltIENsdXN0ZXIgMTAwLTgwIFJpY2htb25kIFN0IFc8L2Rpdj4nKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwX2M2NWY0M2U5ZDc2MzQyMGFiZmJjNjdmYTZmNzU5ZTk3LnNldENvbnRlbnQoaHRtbF9lMWZjMDlmZTcxNmI0YWFjYTEwYTk3YTk0N2QyNTUxZik7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgY2lyY2xlX21hcmtlcl83YjFjYWEyNTI5NGI0OGRlODEyNDM0MDI4NmUyNzkxNS5iaW5kUG9wdXAocG9wdXBfYzY1ZjQzZTlkNzYzNDIwYWJmYmM2N2ZhNmY3NTllOTcpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGNpcmNsZV9tYXJrZXJfNGU4Y2NlZWQ4MThhNDk3OWE4NmMwYzA5MTAzOTNlMWUgPSBMLmNpcmNsZU1hcmtlcigKICAgICAgICAgICAgICAgIFs0My42NTI3MjA3MTIwODMyNjYsLTc5LjM4MTMyNzYyOTA4OTM2XSwKICAgICAgICAgICAgICAgIHsKICAiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsCiAgImNvbG9yIjogIkJsdWUiLAogICJkYXNoQXJyYXkiOiBudWxsLAogICJkYXNoT2Zmc2V0IjogbnVsbCwKICAiZmlsbCI6IHRydWUsCiAgImZpbGxDb2xvciI6ICJCbHVlIiwKICAiZmlsbE9wYWNpdHkiOiAwLjcsCiAgImZpbGxSdWxlIjogImV2ZW5vZGQiLAogICJsaW5lQ2FwIjogInJvdW5kIiwKICAibGluZUpvaW4iOiAicm91bmQiLAogICJvcGFjaXR5IjogMS4wLAogICJyYWRpdXMiOiA1LAogICJzdHJva2UiOiB0cnVlLAogICJ3ZWlnaHQiOiAzCn0KICAgICAgICAgICAgICAgICkuYWRkVG8obWFwXzQ3ZTM0ODk5YmViNjQzYmRhN2E0YmJhOTBjODQ5M2Q4KTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwXzdlNDk0YTMxZmFhNTQ3YWVhN2RmYzkyNTk3ZWFiMzljID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sXzBiZWEwMTdlYWE4MDQ1MzZiZjk2MWEwODdjYTQ2MWI4ID0gJCgnPGRpdiBpZD0iaHRtbF8wYmVhMDE3ZWFhODA0NTM2YmY5NjFhMDg3Y2E0NjFiOCIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+R3ltIENsdXN0ZXIgMDIgLSAxOTAgU2ltY29lIFN0PC9kaXY+JylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF83ZTQ5NGEzMWZhYTU0N2FlYTdkZmM5MjU5N2VhYjM5Yy5zZXRDb250ZW50KGh0bWxfMGJlYTAxN2VhYTgwNDUzNmJmOTYxYTA4N2NhNDYxYjgpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIGNpcmNsZV9tYXJrZXJfNGU4Y2NlZWQ4MThhNDk3OWE4NmMwYzA5MTAzOTNlMWUuYmluZFBvcHVwKHBvcHVwXzdlNDk0YTMxZmFhNTQ3YWVhN2RmYzkyNTk3ZWFiMzljKTsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyX2Y5NzNkMjMyNDUwZDRmZjliYWJlODgzOGQ2ZmU3MmZmID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbNDMuNjU0Mjk2NTIxNTEyODc2LC03OS4zODc2NzkxMDAwMzY2Ml0sCiAgICAgICAgICAgICAgICB7CiAgImJ1YmJsaW5nTW91c2VFdmVudHMiOiB0cnVlLAogICJjb2xvciI6ICJCbHVlIiwKICAiZGFzaEFycmF5IjogbnVsbCwKICAiZGFzaE9mZnNldCI6IG51bGwsCiAgImZpbGwiOiB0cnVlLAogICJmaWxsQ29sb3IiOiAiQmx1ZSIsCiAgImZpbGxPcGFjaXR5IjogMC43LAogICJmaWxsUnVsZSI6ICJldmVub2RkIiwKICAibGluZUNhcCI6ICJyb3VuZCIsCiAgImxpbmVKb2luIjogInJvdW5kIiwKICAib3BhY2l0eSI6IDEuMCwKICAicmFkaXVzIjogNSwKICAic3Ryb2tlIjogdHJ1ZSwKICAid2VpZ2h0IjogMwp9CiAgICAgICAgICAgICAgICApLmFkZFRvKG1hcF80N2UzNDg5OWJlYjY0M2JkYTdhNGJiYTkwYzg0OTNkOCk7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF9iMWRhN2I3OTc3ODU0ODU3YTg1MGE3ZTk2MWI0ZDg3MiA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF9lNDRlZWY4YmU1NjI0YTZkODRiYTVmOTNkYjcwOThhNSA9ICQoJzxkaXYgaWQ9Imh0bWxfZTQ0ZWVmOGJlNTYyNGE2ZDg0YmE1ZjkzZGI3MDk4YTUiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPkd5bSBDbHVzdGVyIDQzOSBVbml2ZXJzaXR5IEF2ZTwvZGl2PicpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfYjFkYTdiNzk3Nzg1NDg1N2E4NTBhN2U5NjFiNGQ4NzIuc2V0Q29udGVudChodG1sX2U0NGVlZjhiZTU2MjRhNmQ4NGJhNWY5M2RiNzA5OGE1KTsKICAgICAgICAgICAgCgogICAgICAgICAgICBjaXJjbGVfbWFya2VyX2Y5NzNkMjMyNDUwZDRmZjliYWJlODgzOGQ2ZmU3MmZmLmJpbmRQb3B1cChwb3B1cF9iMWRhN2I3OTc3ODU0ODU3YTg1MGE3ZTk2MWI0ZDg3Mik7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl9hZTdkNjg1ZGJmNmM0MDAyYTQyNDQxZmNmOTBlM2UyOSA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWzQzLjY0OTEyNTc2NTYwNjA0LC03OS4zODUzMjM0OTcxNzc2NV0sCiAgICAgICAgICAgICAgICB7CiAgImJ1YmJsaW5nTW91c2VFdmVudHMiOiB0cnVlLAogICJjb2xvciI6ICJCbHVlIiwKICAiZGFzaEFycmF5IjogbnVsbCwKICAiZGFzaE9mZnNldCI6IG51bGwsCiAgImZpbGwiOiB0cnVlLAogICJmaWxsQ29sb3IiOiAiQmx1ZSIsCiAgImZpbGxPcGFjaXR5IjogMC43LAogICJmaWxsUnVsZSI6ICJldmVub2RkIiwKICAibGluZUNhcCI6ICJyb3VuZCIsCiAgImxpbmVKb2luIjogInJvdW5kIiwKICAib3BhY2l0eSI6IDEuMCwKICAicmFkaXVzIjogNSwKICAic3Ryb2tlIjogdHJ1ZSwKICAid2VpZ2h0IjogMwp9CiAgICAgICAgICAgICAgICApLmFkZFRvKG1hcF80N2UzNDg5OWJlYjY0M2JkYTdhNGJiYTkwYzg0OTNkOCk7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF8zYzU1ZGNmNzU3NWI0ODc5YjlmOTNiMzRiNWZkNWRiMyA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF9hMTk3YjExNmFlZDY0OWI2YjJkYWI0MTY4YTg5ZTE0YyA9ICQoJzxkaXYgaWQ9Imh0bWxfYTE5N2IxMTZhZWQ2NDliNmIyZGFiNDE2OGE4OWUxNGMiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPkd5bSBDbHVzdGVyIDE0NSBSaWNobW9uZCBTdC4gVzwvZGl2PicpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfM2M1NWRjZjc1NzViNDg3OWI5ZjkzYjM0YjVmZDVkYjMuc2V0Q29udGVudChodG1sX2ExOTdiMTE2YWVkNjQ5YjZiMmRhYjQxNjhhODllMTRjKTsKICAgICAgICAgICAgCgogICAgICAgICAgICBjaXJjbGVfbWFya2VyX2FlN2Q2ODVkYmY2YzQwMDJhNDI0NDFmY2Y5MGUzZTI5LmJpbmRQb3B1cChwb3B1cF8zYzU1ZGNmNzU3NWI0ODc5YjlmOTNiMzRiNWZkNWRiMyk7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl85Mzk4MjYxOWEyM2Y0ZmNmOWUyMmYwNTNjNjA2NGQwZiA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWzQzLjY1MTkyLC03OS4zOTEyNTVdLAogICAgICAgICAgICAgICAgewogICJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwKICAiY29sb3IiOiAiQmx1ZSIsCiAgImRhc2hBcnJheSI6IG51bGwsCiAgImRhc2hPZmZzZXQiOiBudWxsLAogICJmaWxsIjogdHJ1ZSwKICAiZmlsbENvbG9yIjogIkJsdWUiLAogICJmaWxsT3BhY2l0eSI6IDAuNywKICAiZmlsbFJ1bGUiOiAiZXZlbm9kZCIsCiAgImxpbmVDYXAiOiAicm91bmQiLAogICJsaW5lSm9pbiI6ICJyb3VuZCIsCiAgIm9wYWNpdHkiOiAxLjAsCiAgInJhZGl1cyI6IDUsCiAgInN0cm9rZSI6IHRydWUsCiAgIndlaWdodCI6IDMKfQogICAgICAgICAgICAgICAgKS5hZGRUbyhtYXBfNDdlMzQ4OTliZWI2NDNiZGE3YTRiYmE5MGM4NDkzZDgpOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfZjFlMTVlNzljOGQwNGFkNWI5MTU1ZWIxZjg0MmMyZTMgPSBMLnBvcHVwKHttYXhXaWR0aDogJzMwMCd9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfYzhiNDJlZTI0ZWZlNDVlMjk2YTRlMTgyYjI1NDcyMTAgPSAkKCc8ZGl2IGlkPSJodG1sX2M4YjQyZWUyNGVmZTQ1ZTI5NmE0ZTE4MmIyNTQ3MjEwIiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5HeW0gQ2x1c3RlciAzMiBHcmFuZ2UgUmQ8L2Rpdj4nKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwX2YxZTE1ZTc5YzhkMDRhZDViOTE1NWViMWY4NDJjMmUzLnNldENvbnRlbnQoaHRtbF9jOGI0MmVlMjRlZmU0NWUyOTZhNGUxODJiMjU0NzIxMCk7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgY2lyY2xlX21hcmtlcl85Mzk4MjYxOWEyM2Y0ZmNmOWUyMmYwNTNjNjA2NGQwZi5iaW5kUG9wdXAocG9wdXBfZjFlMTVlNzljOGQwNGFkNWI5MTU1ZWIxZjg0MmMyZTMpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGNpcmNsZV9tYXJrZXJfYjM5NWFkNmVmYjgzNDYxMThhOGM0YzdkMWNmYzIxY2YgPSBMLmNpcmNsZU1hcmtlcigKICAgICAgICAgICAgICAgIFs0My42NTEyMDMsLTc5LjM3ODc2XSwKICAgICAgICAgICAgICAgIHsKICAiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsCiAgImNvbG9yIjogIkJsdWUiLAogICJkYXNoQXJyYXkiOiBudWxsLAogICJkYXNoT2Zmc2V0IjogbnVsbCwKICAiZmlsbCI6IHRydWUsCiAgImZpbGxDb2xvciI6ICJCbHVlIiwKICAiZmlsbE9wYWNpdHkiOiAwLjcsCiAgImZpbGxSdWxlIjogImV2ZW5vZGQiLAogICJsaW5lQ2FwIjogInJvdW5kIiwKICAibGluZUpvaW4iOiAicm91bmQiLAogICJvcGFjaXR5IjogMS4wLAogICJyYWRpdXMiOiA1LAogICJzdHJva2UiOiB0cnVlLAogICJ3ZWlnaHQiOiAzCn0KICAgICAgICAgICAgICAgICkuYWRkVG8obWFwXzQ3ZTM0ODk5YmViNjQzYmRhN2E0YmJhOTBjODQ5M2Q4KTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwXzFmNGY5ZTJiMzIwMTQ0ZGQ4NzNhNGU2YTFmZjZhYzBkID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sXzg1OGY2MDRmMjg0NDRhMmFhOTY4ZjNkMmQ4ODYxMjdhID0gJCgnPGRpdiBpZD0iaHRtbF84NThmNjA0ZjI4NDQ0YTJhYTk2OGYzZDJkODg2MTI3YSIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+R3ltIENsdXN0ZXIgMTM5IFlvbmdlIFN0cmVldDwvZGl2PicpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfMWY0ZjllMmIzMjAxNDRkZDg3M2E0ZTZhMWZmNmFjMGQuc2V0Q29udGVudChodG1sXzg1OGY2MDRmMjg0NDRhMmFhOTY4ZjNkMmQ4ODYxMjdhKTsKICAgICAgICAgICAgCgogICAgICAgICAgICBjaXJjbGVfbWFya2VyX2IzOTVhZDZlZmI4MzQ2MTE4YThjNGM3ZDFjZmMyMWNmLmJpbmRQb3B1cChwb3B1cF8xZjRmOWUyYjMyMDE0NGRkODczYTRlNmExZmY2YWMwZCk7CgogICAgICAgICAgICAKICAgICAgICAKPC9zY3JpcHQ+ onload=\"this.contentDocument.open();this.contentDocument.write(atob(this.getAttribute('data-html')));this.contentDocument.close();\" allowfullscreen webkitallowfullscreen mozallowfullscreen></iframe></div></div>"
      ],
      "text/plain": [
       "<folium.folium.Map at 0x1a467e2ad48>"
      ]
     },
     "execution_count": 53,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "#Create map of clusters using latitude and longitude\n",
    "latitude= 43.6534817\n",
    "longitude= -79.3839347\n",
    "\n",
    "kclusters=7\n",
    "\n",
    "map_clusters = folium.Map(location=[latitude, longitude], zoom_start=13)\n",
    "\n",
    "#Set color scheme for the clusters\n",
    "x = np.arange(kclusters)\n",
    "ys = [i+x+(i*x)**2 for i in range(kclusters)]\n",
    "colors_array = cm.rainbow(np.linspace(0, 1, len(ys)))\n",
    "rainbow = [colors.rgb2hex(i) for i in colors_array]\n",
    "rainbow = [\"Blue\",\"Cyan\",\"Fuchsia\",\"Purple\"]\n",
    "\n",
    "#Add markers to the map and assign marker colors\n",
    "markers_colors = []\n",
    "for lat, lon, poi, cluster in zip(NextGen_df['lat'], NextGen_df['lng'],NextGen_df['categories'], NextGen_df['address']):\n",
    "    label = folium.Popup(str(poi) + ' Cluster ' + str(cluster), parse_html=True)\n",
    "    folium.CircleMarker(\n",
    "        [lat, lon],\n",
    "        radius=5,\n",
    "        popup=label,\n",
    "        color=rainbow[np.select(\n",
    "                                [poi==\"Gym\", \n",
    "                                 poi==\"University\", \n",
    "                                 poi==\"Bar\", \n",
    "                                 poi==\"Shopping Mall\"], \n",
    "                                [0,1,2,3],default=0\n",
    "                               )\n",
    "                     ],\n",
    "        fill=True,\n",
    "        fill_color=rainbow[np.select(\n",
    "                                [poi==\"Gym\", \n",
    "                                 poi==\"University\",\n",
    "                                 poi==\"Bar\", \n",
    "                                 poi==\"Shopping Mall\"], \n",
    "                                [0,1,2,3],default=0\n",
    "                               )\n",
    "                     ],\n",
    "        fill_opacity=0.7).add_to(map_clusters)  \n",
    "    \n",
    "       \n",
    "map_clusters"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "### Insights "
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "#### Given the results of the cluster map, NextGen's restaurant may see more traffic if they open near Ryerson University. In comparison to the University of Toronto and OCAD University, Ryerson has more near by venues. The caveat is that the majority of their closer venues are bars. However, this could work in NextGen's favour as their menu items focus on vegan 'comfort' and 'bar' foods. It should also be noted that out of the three universities, Ryerson's location is the closet to the nearest shopping mall."
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "##### For further analysis, please see full report."
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "##### Thank you!"
   ]
  }
 ],
 "metadata": {
  "kernelspec": {
   "display_name": "Python 3",
   "language": "python",
   "name": "python3"
  },
  "language_info": {
   "codemirror_mode": {
    "name": "ipython",
    "version": 3
   },
   "file_extension": ".py",
   "mimetype": "text/x-python",
   "name": "python",
   "nbconvert_exporter": "python",
   "pygments_lexer": "ipython3",
   "version": "3.7.4"
  }
 },
 "nbformat": 4,
 "nbformat_minor": 4
}
